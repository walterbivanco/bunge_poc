2026-01-07 10:52:01,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:14,270 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:16,111 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:20,736 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:28,555 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:42,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:52:42,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:42,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:53:02,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:53:02,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:53:02,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:53:10,361 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:53:10,361 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:53:10,361 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:53:11,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:53:11,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:53:11,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:54:20,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:54:20,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:54:20,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:06:47,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:06:47,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:06:47,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:07:02,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [31c01a23]: "Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:07:02,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Schema obtenido (1695.67ms)
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Paso 2: Construyendo prompt
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Prompt construido (0.13ms, 2160 chars)
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Paso 3: Generando SQL con Gemini
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:07:04,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:07:06,953 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 2633.87ms: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_status:8, grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:06,962 - nl2sql_chatbot - ERROR - ‚ùå [31c01a23] Error procesando pregunta: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_status:8, grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 87, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:06,966 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:07:06,967 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 31c01a23
2026-01-07 11:07:06,967 - nl2sql_chatbot - INFO - ‚ùì Question: "Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:07:06,967 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 4339.80ms
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO -   - Get Schema: 1695.67ms
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO -   - Build Prompt: 0.13ms
2026-01-07 11:07:06,968 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:07:23,351 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [5162fd23]: Contratos de SOJA en 2025
2026-01-07 11:07:23,352 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:07:24,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Schema obtenido (1566.19ms)
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Paso 2: Construyendo prompt
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Prompt construido (0.14ms, 2150 chars)
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Paso 3: Generando SQL con Gemini
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:07:24,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:07:26,630 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 1710.28ms: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:26,631 - nl2sql_chatbot - ERROR - ‚ùå [5162fd23] Error procesando pregunta: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 87, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 5162fd23
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 3280.27ms
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO -   - Get Schema: 1566.19ms
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO -   - Build Prompt: 0.14ms
2026-01-07 11:07:26,634 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:26,634 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:11:25,831 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:11:25,831 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:11:25,831 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:11:46,468 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [ee4feb60]: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:11:46,468 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:11:47,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Schema obtenido (1377.53ms)
2026-01-07 11:11:47,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 2: Construyendo prompt
2026-01-07 11:11:47,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Prompt construido (0.49ms, 2159 chars)
2026-01-07 11:11:47,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 3: Generando SQL con Gemini
2026-01-07 11:11:47,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:11:47,848 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:11:51,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:11:51,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3873.67ms
2026-01-07 11:11:51,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:11:51,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:12:54,834 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:12:54,835 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 1,824,066 (1.74 MB)
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2768.76ms
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 10
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: ee4feb60
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 71135.54ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Get Schema: 1377.53ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Build Prompt: 0.49ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3873.67ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2768.76ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üìä Rows: 10
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:12:57,605 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:12:57,605 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:12:57,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [ee4feb60] completado exitosamente en 71135.54ms
2026-01-07 11:14:36,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:36,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:36,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:38,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:38,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:38,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:41,518 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:41,519 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:41,519 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:43,824 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:43,824 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:43,825 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:45,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:45,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:45,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:48,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:48,765 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:48,765 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:51,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:51,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:51,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:53,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:53,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:53,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:55,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:55,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:55,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:15:35,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:15:35,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:15:35,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:15:44,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:15:44,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:15:44,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:15:49,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:15:49,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:15:49,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:16:07,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:16:07,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:16:07,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:17:33,403 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:17:33,404 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:17:33,404 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:18:06,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:18:06,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:18:06,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:18:22,121 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [88059123]: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:18:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:18:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:18:23,752 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.63s (24 columnas)
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Schema obtenido (1.63s)
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 2: Construyendo prompt
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Prompt construido (0.000s, 2159 chars)
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 3: Generando SQL con Gemini
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:18:23,754 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:18:34,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:18:34,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 11.16s
2026-01-07 11:18:34,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:18:34,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:18:35,325 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:18:35,325 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.35s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 10
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 88059123
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 15.56s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO -   - Get Schema: 1.63s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 11.16s
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.35s
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - üìä Rows: 10
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [88059123] completado exitosamente en 15.56s
2026-01-07 11:19:02,004 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [d6bcf93a]: Contratos de SOJA en 2025
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Schema obtenido (0.00s)
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 2: Construyendo prompt
2026-01-07 11:19:02,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Prompt construido (0.000s, 2150 chars)
2026-01-07 11:19:02,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 3: Generando SQL con Gemini
2026-01-07 11:19:02,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:19:02,007 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:19:10,838 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-07 11:19:12,844 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-07 11:19:18,331 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 738, 'candidates_tokens': 53, 'total_tokens': 791}
2026-01-07 11:19:18,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 16.33s
2026-01-07 11:19:18,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:19:18,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:19:18,868 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:19:18,868 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:19:20,917 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.05s
2026-01-07 11:19:20,917 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: d6bcf93a
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 18.91s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 16.33s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.05s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 738, 'candidates_tokens': 53, 'total_tokens': 791}
2026-01-07 11:19:20,919 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:19:20,919 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:19:20,919 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:19:20,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [d6bcf93a] completado exitosamente en 18.91s
2026-01-07 11:21:04,010 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:04,010 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:04,011 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:21:10,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:10,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:10,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:21:19,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:19,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:19,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:21:32,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:32,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:32,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:25:07,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:25:07,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:25:07,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:29:09,442 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:29:09,442 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:29:09,442 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:29:25,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [66333239]: Contratos de SOJA en 2025
2026-01-07 11:29:25,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:29:25,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:29:27,337 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.62s (24 columnas)
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Schema obtenido (1.62s)
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Paso 2: Construyendo prompt
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Prompt construido (0.000s, 891 chars)
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Paso 3: Generando SQL con Gemini
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:29:27,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:29:27,348 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 0.00s: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 80, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 771, in _generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 3201, in _prepare_request
    request_v1beta1 = super()._prepare_request(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 546, in _prepare_request
    category=gapic_content_types.HarmCategory(category),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 757, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 1171, in __new__
    raise ve_exc
ValueError: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
2026-01-07 11:29:27,355 - nl2sql_chatbot - ERROR - ‚ùå [66333239] Error procesando pregunta: Error al generar SQL con Gemini: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 80, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 771, in _generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 3201, in _prepare_request
    request_v1beta1 = super()._prepare_request(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 546, in _prepare_request
    category=gapic_content_types.HarmCategory(category),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 757, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 1171, in __new__
    raise ve_exc
ValueError: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 142, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 66333239
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 1.64s
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO -   - Get Schema: 1.62s
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:29:27,358 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
2026-01-07 11:29:27,358 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:30:11,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:30:11,304 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:30:11,304 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:30:30,292 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:30:30,292 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:30:30,293 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:30:40,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:30:40,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:30:40,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:30:52,398 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [3900dc65]: Contratos de SOJA en 2025
2026-01-07 11:30:52,399 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:30:52,399 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:30:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.94s (24 columnas)
2026-01-07 11:30:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Schema obtenido (1.94s)
2026-01-07 11:30:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 2: Construyendo prompt
2026-01-07 11:30:54,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Prompt construido (0.000s, 891 chars)
2026-01-07 11:30:54,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 3: Generando SQL con Gemini
2026-01-07 11:30:54,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:30:54,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:30:58,874 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.53s
2026-01-07 11:30:58,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:30:58,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.54s
2026-01-07 11:30:58,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:30:58,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:32:02,000 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:32:02,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.44s
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 3900dc65
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 72.04s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Get Schema: 1.94s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.54s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.44s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [3900dc65] completado exitosamente en 72.04s
2026-01-07 11:37:31,066 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:37:31,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:37:31,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:37:49,899 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [8064dd02]: Contratos de SOJA en 2025
2026-01-07 11:37:49,900 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:37:49,900 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:37:51,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.43s (24 columnas)
2026-01-07 11:37:51,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Schema obtenido (1.43s)
2026-01-07 11:37:51,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 2: Construyendo prompt
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Prompt construido (0.000s, 891 chars)
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 3: Generando SQL con Gemini
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:38:18,880 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 27.55s
2026-01-07 11:38:18,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:38:18,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 27.55s
2026-01-07 11:38:18,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:38:18,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:38:18,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.505s
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-07 11:38:21,014 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-07 11:38:21,482 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.093s
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.61s
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] BigQuery completado (2.61s)
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 8064dd02
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 31.59s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Get Schema: 1.43s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 27.55s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.61s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [8064dd02] completado exitosamente en 31.59s
2026-01-07 11:41:22,564 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:41:22,564 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:41:22,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:41:39,797 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [e595379e]: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:41:39,797 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:41:39,798 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:41:41,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.84s (24 columnas)
2026-01-07 11:41:41,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Schema obtenido (1.84s)
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Paso 2: Construyendo prompt
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Prompt construido (0.000s, 900 chars)
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Paso 3: Generando SQL con Gemini
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-1.5-flash-002
2026-01-07 11:41:41,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:41:43,687 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 2.05s: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.NOT_FOUND
	details = "Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.129.106:443 {grpc_status:5, grpc_message:"Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 74, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
2026-01-07 11:41:43,696 - nl2sql_chatbot - ERROR - ‚ùå [e595379e] Error procesando pregunta: Error al generar SQL con Gemini: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.NOT_FOUND
	details = "Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.129.106:443 {grpc_status:5, grpc_message:"Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 74, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 136, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: e595379e
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 3.90s
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO -   - Get Schema: 1.84s
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:41:43,700 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:43:28,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:43:28,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:43:28,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:43:48,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [a89b2a78]: ¬øCu√°ntos contratos hay por estado?
2026-01-07 11:43:48,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:43:48,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.66s (24 columnas)
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Schema obtenido (1.66s)
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 2: Construyendo prompt
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Prompt construido (0.000s, 900 chars)
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 3: Generando SQL con Gemini
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:43:49,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:43:53,096 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-07 11:43:55,097 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-07 11:43:56,470 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 4s antes de reintentar...
2026-01-07 11:44:00,471 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 2/3 - Llamando a Gemini...
2026-01-07 11:44:37,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 37.42s
2026-01-07 11:44:37,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 312, 'candidates_tokens': 53, 'total_tokens': 365}
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 2 reintento(s) en 47.97s
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT ESTADOCONTRATO, COUNT(*) AS cantidad_contratos FROM `bunge-de-poc-insumos.Bronce.viterra` GRO...
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.503s
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT ESTADOCONTRATO, COUNT(*) AS cantidad_contratos FROM `bunge-de-poc-insumos.Bronce.viterra` GRO...
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-07 11:44:40,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-07 11:44:40,709 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.315s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 80,849 (0.08 MB)
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.82s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 10
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] BigQuery completado (2.82s)
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: a89b2a78
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ùì Question: ¬øCu√°ntos contratos hay por estado?
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 52.45s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Get Schema: 1.66s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 47.97s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.82s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - üîç SQL: SELECT ESTADOCONTRATO, COUNT(*) AS cantidad_contratos FROM `bunge-de-poc-insumos.Bronce.viterra` GROUP BY ESTADOCONTRATO LIMIT 100
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - üìä Rows: 10
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 312, 'candidates_tokens': 53, 'total_tokens': 365}
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [a89b2a78] completado exitosamente en 52.45s
2026-01-08 14:30:40,561 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-08 14:30:40,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-08 14:30:40,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-08 14:31:10,428 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [1b3a3c18]: Contratos de SOJA en 2025
2026-01-08 14:31:10,429 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 1: Obteniendo schema de BigQuery
2026-01-08 14:31:10,429 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-08 14:31:11,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.47s (24 columnas)
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Schema obtenido (1.47s)
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 2: Construyendo prompt
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Prompt construido (0.000s, 891 chars)
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 3: Generando SQL con Gemini
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-08 14:31:11,899 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-08 14:31:16,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.46s
2026-01-08 14:31:16,359 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.46s
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 4: Ejecutando SQL en BigQuery
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.374s
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-08 14:31:18,285 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-08 14:31:18,733 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.998s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 1,824,066 (1.74 MB)
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.38s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] BigQuery completado (2.38s)
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ================================================================================
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 1b3a3c18
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 8.32s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Get Schema: 1.47s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.46s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.38s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ================================================================================
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [1b3a3c18] completado exitosamente en 8.32s
2026-01-13 11:50:05,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 11:50:05,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 11:50:05,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 11:50:35,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [31f29f38]: "Contratos de SOJA en 2025"
2026-01-13 11:50:35,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 1: Obteniendo schema de BigQuery
2026-01-13 11:50:35,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 11:50:36,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.50s (14 columnas)
2026-01-13 11:50:36,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Schema obtenido (1.50s)
2026-01-13 11:50:36,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 2: Construyendo prompt
2026-01-13 11:50:36,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Prompt construido (0.000s, 657 chars)
2026-01-13 11:50:36,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 3: Generando SQL con Gemini
2026-01-13 11:50:36,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 11:50:36,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 11:50:40,385 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.79s
2026-01-13 11:50:40,386 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 203, 'candidates_tokens': 147, 'total_tokens': 350}
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.80s
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT cliente, producto, proveedor, cosecha, negocio, provincia_lugarentrega, total_contratos, tota...
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 63.116s
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT cliente, producto, proveedor, cosecha, negocio, provincia_lugarentrega, total_contratos, tota...
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 11:51:45,317 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 11:51:45,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.274s
2026-01-13 11:51:45,780 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 645,784 (0.62 MB)
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 65.39s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 53
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] BigQuery completado (65.39s)
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 31f29f38
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ùì Question: "Contratos de SOJA en 2025"
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 70.70s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Get Schema: 1.50s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.80s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 65.39s
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - üîç SQL: SELECT cliente, producto, proveedor, cosecha, negocio, provincia_lugarentrega, total_contratos, total_cantidad, total_cantidad_entregada, total_cantidad_liquidada, precio_promedio, monto_total, anio_concertacion, mes_concertacion FROM `bunge-de-poc-insumos.Gold.contratos_gold` WHERE producto = 'SOJA' AND anio_concertacion = 2025 LIMIT 100
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - üìä Rows: 53
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 203, 'candidates_tokens': 147, 'total_tokens': 350}
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [31f29f38] completado exitosamente en 70.70s
2026-01-13 11:51:52,944 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 11:51:52,944 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 11:51:52,944 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 11:52:03,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [67f583fd]: Contratos de SOJA en 2025
2026-01-13 11:52:03,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 1: Obteniendo schema de BigQuery
2026-01-13 11:52:03,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 11:52:05,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.36s (14 columnas)
2026-01-13 11:52:05,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Schema obtenido (1.36s)
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 2: Construyendo prompt
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Prompt construido (0.000s, 643 chars)
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 3: Generando SQL con Gemini
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 11:52:05,082 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 11:52:08,567 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.48s
2026-01-13 11:52:08,570 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 11:52:08,570 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.49s
2026-01-13 11:52:08,571 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:52:08,571 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 11:52:08,572 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.361s
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 11:52:10,812 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 11:52:11,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.370s
2026-01-13 11:52:11,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 646,695 (0.62 MB)
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.05s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] BigQuery completado (3.05s)
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 67f583fd
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 7.90s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO -   - Get Schema: 1.36s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.49s
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.05s
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - üîç SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_quantity, total_quantity_delivered, total_quantity_settled, average_price, total_amount, agreement_year, agreement_month FROM `bunge-de-poc-insumos.Gold.contracts_gold` WHERE product = 'SOJA' AND agreement_year = 2025 LIMIT 100
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [67f583fd] completado exitosamente en 7.90s
2026-01-13 11:52:40,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 11:52:40,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 11:52:40,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 11:52:55,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [c39f19bd]: Mu√©strame los √∫ltimos 10 contratos
2026-01-13 11:52:55,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 1: Obteniendo schema de BigQuery
2026-01-13 11:52:55,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 3.02s (14 columnas)
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Schema obtenido (3.02s)
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 2: Construyendo prompt
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Prompt construido (0.000s, 652 chars)
2026-01-13 11:52:58,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 3: Generando SQL con Gemini
2026-01-13 11:52:58,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 11:52:58,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 11:53:01,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.71s
2026-01-13 11:53:01,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 190, 'candidates_tokens': 125, 'total_tokens': 315}
2026-01-13 11:53:01,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.72s
2026-01-13 11:53:01,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:53:01,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 11:53:01,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 11:53:02,260 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.362s
2026-01-13 11:53:02,261 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 11:53:02,261 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:53:02,261 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 11:53:04,348 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 11:53:04,936 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.675s
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 646,695 (0.62 MB)
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.04s
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] BigQuery completado (3.05s)
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: c39f19bd
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.79s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Get Schema: 3.02s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.72s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.05s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - üîç SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_quantity, total_quantity_delivered, total_quantity_settled, average_price, total_amount, agreement_year, agreement_month FROM `bunge-de-poc-insumos.Gold.contracts_gold` ORDER BY agreement_year DESC, agreement_month DESC LIMIT 100
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 190, 'candidates_tokens': 125, 'total_tokens': 315}
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [c39f19bd] completado exitosamente en 9.79s
2026-01-13 12:05:43,380 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:05:43,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:05:43,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:05:50,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:05:50,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:05:50,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:06:23,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:06:23,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:06:23,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:22:42,758 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:22:42,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:22:42,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:23:44,520 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:23:44,520 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:23:44,520 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:24:43,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:24:43,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:24:43,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:25:09,550 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [651afde9]: Contratos de SOJA en 2025
2026-01-13 12:25:09,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:25:09,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 12:25:12,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 2.57s (14 columnas)
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Schema obtenido (2.57s)
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 2: Construyendo prompt
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Prompt construido (0.000s, 643 chars)
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 3: Generando SQL con Gemini
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:25:12,124 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:25:15,754 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.63s
2026-01-13 12:25:15,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 12:25:15,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.63s
2026-01-13 12:25:15,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 12:25:15,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:25:15,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.369s
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:25:17,899 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:25:18,382 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.256s
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.05s
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] BigQuery completado (3.05s)
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 651afde9
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.26s
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO -   - Get Schema: 2.57s
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.63s
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.05s
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - üîç SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_quantity, total_quantity_delivered, total_quantity_settled, average_price, total_amount, agreement_year, agreement_month FROM `bunge-de-poc-insumos.Gold.contracts_gold` WHERE product = 'SOJA' AND agreement_year = 2025 LIMIT 100
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:25:18,811 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:25:18,811 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [651afde9] completado exitosamente en 9.26s
2026-01-13 12:33:32,083 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [34edc6b1]: How many contracts are there by status?
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Schema obtenido (0.00s)
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 2: Construyendo prompt
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Prompt construido (0.000s, 657 chars)
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 3: Generando SQL con Gemini
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:33:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:33:34,830 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.75s
2026-01-13 12:33:34,832 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 188, 'candidates_tokens': 114, 'total_tokens': 302}
2026-01-13 12:33:34,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.75s
2026-01-13 12:33:34,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN customer END) AS pend...
2026-01-13 12:33:34,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:33:34,834 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:33:35,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.554s
2026-01-13 12:33:35,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:33:35,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN customer END) AS pend...
2026-01-13 12:33:35,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:33:37,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:33:37,902 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.514s
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 225,258 (0.21 MB)
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.07s
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] BigQuery completado (3.07s)
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 34edc6b1
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there by status?
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.82s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.75s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.07s
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - üîç SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN customer END) AS pending_delivery, COUNT(DISTINCT CASE WHEN total_quantity_delivered > total_quantity_settled THEN customer END) AS pending_settlement, COUNT(DISTINCT CASE WHEN total_quantity = total_quantity_settled THEN customer END) AS completed FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 188, 'candidates_tokens': 114, 'total_tokens': 302}
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [34edc6b1] completado exitosamente en 5.82s
2026-01-13 12:41:56,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:41:56,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:41:56,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:42:04,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [138a10c7]: How many contracts are there by status
2026-01-13 12:42:04,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:42:04,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 12:42:06,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.78s (14 columnas)
2026-01-13 12:42:06,144 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Schema obtenido (1.79s)
2026-01-13 12:42:06,144 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 2: Construyendo prompt
2026-01-13 12:42:06,144 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Prompt construido (0.000s, 656 chars)
2026-01-13 12:42:06,145 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 3: Generando SQL con Gemini
2026-01-13 12:42:06,146 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:42:06,147 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:42:09,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.44s
2026-01-13 12:42:09,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 187, 'candidates_tokens': 129, 'total_tokens': 316}
2026-01-13 12:42:09,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.44s
2026-01-13 12:42:09,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END)...
2026-01-13 12:42:09,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:42:09,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:42:09,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.363s
2026-01-13 12:42:09,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:42:09,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END)...
2026-01-13 12:42:09,954 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:42:11,754 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:42:12,460 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.507s
2026-01-13 12:42:12,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 163,824 (0.16 MB)
2026-01-13 12:42:12,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.87s
2026-01-13 12:42:12,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-13 12:42:12,463 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] BigQuery completado (2.87s)
2026-01-13 12:42:12,463 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:12,464 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 138a10c7
2026-01-13 12:42:12,464 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there by status
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 8.11s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Get Schema: 1.79s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.44s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.87s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - üîç SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END) AS Open_Contracts, COUNT(DISTINCT CASE WHEN total_quantity = total_quantity_delivered THEN 'Delivered' ELSE NULL END) AS Delivered_Contracts, COUNT(DISTINCT CASE WHEN total_quantity_delivered = total_quantity_settled THEN 'Settled' ELSE NULL END) AS Settled_Contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 187, 'candidates_tokens': 129, 'total_tokens': 316}
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [138a10c7] completado exitosamente en 8.11s
2026-01-13 12:42:37,038 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [77d7b1b3]: Show me sales by month
2026-01-13 12:42:37,039 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Schema obtenido (0.00s)
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 2: Construyendo prompt
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Prompt construido (0.000s, 640 chars)
2026-01-13 12:42:37,041 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 3: Generando SQL con Gemini
2026-01-13 12:42:37,041 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:42:37,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:42:39,492 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.45s
2026-01-13 12:42:39,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 185, 'candidates_tokens': 87, 'total_tokens': 272}
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.45s
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT agreement_year, agreement_month, SUM(total_amount) AS total_sales FROM `bunge-de-poc-insumos....
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.506s
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT agreement_year, agreement_month, SUM(total_amount) AS total_sales FROM `bunge-de-poc-insumos....
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:42:41,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:42:42,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.272s
2026-01-13 12:42:42,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 109,216 (0.10 MB)
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.78s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 65
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] BigQuery completado (2.78s)
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 77d7b1b3
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ùì Question: Show me sales by month
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.24s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.45s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.78s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üîç SQL: SELECT agreement_year, agreement_month, SUM(total_amount) AS total_sales FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY agreement_year, agreement_month ORDER BY agreement_year, agreement_month LIMIT 100
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üìä Rows: 65
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 185, 'candidates_tokens': 87, 'total_tokens': 272}
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [77d7b1b3] completado exitosamente en 5.24s
2026-01-13 12:42:59,187 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [0efecfe8]: Average price per product
2026-01-13 12:42:59,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:42:59,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:42:59,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Schema obtenido (0.00s)
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 2: Construyendo prompt
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Prompt construido (0.000s, 643 chars)
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 3: Generando SQL con Gemini
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:43:01,301 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.11s
2026-01-13 12:43:01,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 184, 'candidates_tokens': 47, 'total_tokens': 231}
2026-01-13 12:43:01,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.11s
2026-01-13 12:43:01,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-13 12:43:01,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:43:01,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.540s
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:43:03,311 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:43:03,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.067s
2026-01-13 12:43:03,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 91,428 (0.09 MB)
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.61s
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] BigQuery completado (2.61s)
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 0efecfe8
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ùì Question: Average price per product
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 4.72s
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.11s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.61s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - üîç SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY product LIMIT 100
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 184, 'candidates_tokens': 47, 'total_tokens': 231}
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:03,913 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [0efecfe8] completado exitosamente en 4.72s
2026-01-13 12:43:21,958 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [55fec23d]: Total revenue by region
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Schema obtenido (0.00s)
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 2: Construyendo prompt
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Prompt construido (0.000s, 641 chars)
2026-01-13 12:43:21,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 3: Generando SQL con Gemini
2026-01-13 12:43:21,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:43:21,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:43:24,801 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.84s
2026-01-13 12:43:24,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 184, 'candidates_tokens': 51, 'total_tokens': 235}
2026-01-13 12:43:24,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.84s
2026-01-13 12:43:24,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_amount) AS total_revenue FROM `bunge-de-poc-insumos.Gold.contrac...
2026-01-13 12:43:24,803 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:43:24,803 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.488s
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_amount) AS total_revenue FROM `bunge-de-poc-insumos.Gold.contrac...
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:43:26,806 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.816s
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 96,861 (0.09 MB)
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.31s
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] BigQuery completado (2.31s)
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 55fec23d
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - ‚ùì Question: Total revenue by region
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.15s
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.84s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.31s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_amount) AS total_revenue FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province LIMIT 100
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 184, 'candidates_tokens': 51, 'total_tokens': 235}
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [55fec23d] completado exitosamente en 5.15s
2026-01-13 12:44:54,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:44:54,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:44:54,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:18,642 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:18,643 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:18,643 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:21,258 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:21,258 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:21,259 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:40,327 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:40,327 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:40,327 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:41,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:41,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:41,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:47:10,252 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:47:10,252 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:47:10,252 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:55:34,716 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [a6acb5b3]: What is the count of contracts by province?"**
  - Tipo esperado: Bar Chart
2026-01-13 12:55:34,717 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:55:34,717 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 12:55:37,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 2.60s (14 columnas)
2026-01-13 12:55:37,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Schema obtenido (2.60s)
2026-01-13 12:55:37,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 2: Construyendo prompt
2026-01-13 12:55:37,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Prompt construido (0.000s, 693 chars)
2026-01-13 12:55:37,322 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 3: Generando SQL con Gemini
2026-01-13 12:55:37,322 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:55:37,323 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:55:41,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.68s
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 198, 'candidates_tokens': 58, 'total_tokens': 256}
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.69s
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.354s
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:55:43,187 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:55:43,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.410s
2026-01-13 12:55:43,774 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 69,557 (0.07 MB)
2026-01-13 12:55:43,774 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.77s
2026-01-13 12:55:43,774 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-13 12:55:43,775 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] BigQuery completado (2.77s)
2026-01-13 12:55:43,775 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 12:55:43,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 12:55:45,758 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Recomendaci√≥n de gr√°fico: bar
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: a6acb5b3
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ‚ùì Question: What is the count of contracts by province?"**
  - Tipo esperado: Bar Chart
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.04s
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO -   - Get Schema: 2.60s
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.69s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.77s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO -   - Chart Recommendation: 1.98s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province ORDER BY total_contracts DESC LIMIT 100
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 198, 'candidates_tokens': 58, 'total_tokens': 256}
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [a6acb5b3] completado exitosamente en 11.04s
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [634c2e19]: Show me the number of contracts per month in 2025"
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Schema obtenido (0.00s)
2026-01-13 12:56:03,973 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 2: Construyendo prompt
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Prompt construido (0.001s, 668 chars)
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 3: Generando SQL con Gemini
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:56:06,014 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.04s
2026-01-13 12:56:06,016 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 195, 'candidates_tokens': 62, 'total_tokens': 257}
2026-01-13 12:56:06,016 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.04s
2026-01-13 12:56:06,016 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.cont...
2026-01-13 12:56:06,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:56:06,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.499s
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.cont...
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:56:08,104 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:56:08,512 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.996s
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 81,912 (0.08 MB)
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.50s
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 12
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] BigQuery completado (2.50s)
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 12:56:08,514 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 12:56:10,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 12:56:10,498 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Recomendaci√≥n de gr√°fico: bar
2026-01-13 12:56:10,498 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:56:10,498 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 634c2e19
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the number of contracts per month in 2025"
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 6.53s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.04s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.50s
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO -   - Chart Recommendation: 1.98s
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - üîç SQL: SELECT agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` WHERE agreement_year = 2025 GROUP BY agreement_month LIMIT 100
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - üìä Rows: 12
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 195, 'candidates_tokens': 62, 'total_tokens': 257}
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:56:10,501 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:56:10,501 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [634c2e19] completado exitosamente en 6.53s
2026-01-13 14:28:45,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 14:28:45,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 14:28:45,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 14:36:02,670 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [5497f7d6]: How many contracts are there by status
2026-01-13 14:36:02,671 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Paso 1: Obteniendo schema de BigQuery
2026-01-13 14:36:02,671 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 14:36:04,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 2.07s (14 columnas)
2026-01-13 14:36:04,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Schema obtenido (2.07s)
2026-01-13 14:36:04,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Paso 2: Construyendo prompt
2026-01-13 14:36:04,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Prompt construido (0.000s, 656 chars)
2026-01-13 14:36:04,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Paso 3: Generando SQL con Gemini
2026-01-13 14:36:04,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 14:36:04,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 14:36:07,985 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.24s
2026-01-13 14:36:07,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 187, 'candidates_tokens': 129, 'total_tokens': 316}
2026-01-13 14:36:07,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.24s
2026-01-13 14:36:07,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END)...
2026-01-13 14:36:07,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 14:36:07,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 14:37:11,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 63.268s
2026-01-13 14:37:11,258 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 14:37:11,258 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END)...
2026-01-13 14:37:11,259 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 14:37:12,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 14:37:13,095 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.837s
2026-01-13 14:37:13,096 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 65.11s
2026-01-13 14:37:13,096 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-13 14:37:13,096 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] BigQuery completado (65.11s)
2026-01-13 14:37:13,096 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 14:37:13,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 14:37:15,147 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 14:37:15,147 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5497f7d6] Recomendaci√≥n de gr√°fico: bar
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 5497f7d6
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there by status
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 72.48s
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO -   - Get Schema: 2.07s
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 14:37:15,148 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.24s
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 65.11s
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO -   - Chart Recommendation: 2.05s
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - üîç SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END) AS Open_Contracts, COUNT(DISTINCT CASE WHEN total_quantity = total_quantity_delivered THEN 'Delivered' ELSE NULL END) AS Delivered_Contracts, COUNT(DISTINCT CASE WHEN total_quantity_delivered = total_quantity_settled THEN 'Settled' ELSE NULL END) AS Settled_Contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 187, 'candidates_tokens': 129, 'total_tokens': 316}
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 14:37:15,149 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [5497f7d6] completado exitosamente en 72.48s
2026-01-13 14:37:37,947 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [78b775c1]: What is the count of contracts by province
2026-01-13 14:37:37,950 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Paso 1: Obteniendo schema de BigQuery
2026-01-13 14:37:37,950 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 14:37:37,951 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Schema obtenido (0.00s)
2026-01-13 14:37:37,951 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Paso 2: Construyendo prompt
2026-01-13 14:37:37,951 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Prompt construido (0.000s, 660 chars)
2026-01-13 14:37:37,951 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Paso 3: Generando SQL con Gemini
2026-01-13 14:37:37,951 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 14:37:37,954 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 14:37:39,542 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 1.59s
2026-01-13 14:37:39,543 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 188, 'candidates_tokens': 51, 'total_tokens': 239}
2026-01-13 14:37:39,543 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 1.59s
2026-01-13 14:37:39,543 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, COUNT(DISTINCT customer) AS contract_count FROM `bunge-de-poc-insumos.Gold...
2026-01-13 14:37:39,544 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 14:37:39,544 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 14:37:40,200 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.656s
2026-01-13 14:37:40,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 14:37:40,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, COUNT(DISTINCT customer) AS contract_count FROM `bunge-de-poc-insumos.Gold...
2026-01-13 14:37:40,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 14:37:41,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 14:37:42,034 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.833s
2026-01-13 14:37:42,034 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 103,687 (0.10 MB)
2026-01-13 14:37:42,034 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.49s
2026-01-13 14:37:42,035 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-13 14:37:42,035 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] BigQuery completado (2.49s)
2026-01-13 14:37:42,035 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 14:37:42,035 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 14:37:43,505 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 14:37:43,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [78b775c1] Recomendaci√≥n de gr√°fico: bar
2026-01-13 14:37:43,507 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 14:37:43,508 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 78b775c1
2026-01-13 14:37:43,508 - nl2sql_chatbot - INFO - ‚ùì Question: What is the count of contracts by province
2026-01-13 14:37:43,508 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.56s
2026-01-13 14:37:43,508 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 14:37:43,509 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 14:37:43,509 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 14:37:43,509 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 1.59s
2026-01-13 14:37:43,509 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.49s
2026-01-13 14:37:43,509 - nl2sql_chatbot - INFO -   - Chart Recommendation: 1.47s
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, COUNT(DISTINCT customer) AS contract_count FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province LIMIT 100
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 188, 'candidates_tokens': 51, 'total_tokens': 239}
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 14:37:43,510 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [78b775c1] completado exitosamente en 5.56s
2026-01-13 15:44:41,382 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 15:44:41,383 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 15:44:41,383 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 15:45:03,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [9c9868d4]: Show me the average price per product type
2026-01-13 15:45:03,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Paso 1: Obteniendo schema de BigQuery
2026-01-13 15:45:03,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 15:45:04,026 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-13 15:45:05,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.07s (14 columnas)
2026-01-13 15:45:05,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Schema obtenido (1.07s)
2026-01-13 15:45:05,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Paso 2: Construyendo prompt
2026-01-13 15:45:05,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Prompt construido (0.000s, 660 chars)
2026-01-13 15:45:05,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Paso 3: Generando SQL con Gemini
2026-01-13 15:45:05,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 15:45:05,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 15:45:08,966 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.91s
2026-01-13 15:45:08,968 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 188, 'candidates_tokens': 47, 'total_tokens': 235}
2026-01-13 15:45:08,968 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.91s
2026-01-13 15:45:08,968 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-13 15:45:08,968 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 15:45:08,968 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 15:45:08,987 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-13 15:45:08,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-13 15:45:08,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 15:45:08,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-13 15:45:08,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 15:45:10,331 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 15:45:10,720 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.732s
2026-01-13 15:45:10,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.75s
2026-01-13 15:45:10,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-13 15:45:10,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] BigQuery completado (1.75s)
2026-01-13 15:45:10,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 15:45:10,723 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 15:45:15,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 15:45:15,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9c9868d4] Recomendaci√≥n de gr√°fico: bar
2026-01-13 15:45:15,318 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 9c9868d4
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product type
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.33s
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO -   - Get Schema: 1.07s
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.91s
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.75s
2026-01-13 15:45:15,319 - nl2sql_chatbot - INFO -   - Chart Recommendation: 4.60s
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - üîç SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY product LIMIT 100
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 188, 'candidates_tokens': 47, 'total_tokens': 235}
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 15:45:15,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [9c9868d4] completado exitosamente en 11.33s
2026-01-15 12:35:00,966 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-15 12:35:00,966 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-15 12:35:00,966 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-15 12:35:58,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [8f077913]: List all contracts ordered by date
2026-01-15 12:35:58,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Paso 1: Obteniendo schema de BigQuery
2026-01-15 12:35:58,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-15 12:35:58,323 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:35:59,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 1.05s
2026-01-15 12:35:59,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Schema obtenido (1.05s)
2026-01-15 12:35:59,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-15 12:35:59,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-15 12:35:59,355 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:35:59,368 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:36:00,224 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProducts (bunge-de-poc-insumos.Gold.DimProducts): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProducts: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProducts?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProducts
2026-01-15 12:36:00,242 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:36:00,946 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProvince (bunge-de-poc-insumos.Gold.DimProvince): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProvince: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProvince?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProvince
2026-01-15 12:36:00,962 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:36:01,705 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimTime (bunge-de-poc-insumos.Gold.DimTime): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimTime: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimTime?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimTime
2026-01-15 12:36:01,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.37s (0 tablas)
2026-01-15 12:36:01,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Paso 2: Construyendo prompt
2026-01-15 12:36:01,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Prompt construido (0.000s, 788 chars)
2026-01-15 12:36:01,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Paso 3: Generando SQL con Gemini
2026-01-15 12:36:01,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-15 12:36:01,707 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-15 12:36:06,837 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.13s
2026-01-15 12:36:06,838 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 214, 'candidates_tokens': 48, 'total_tokens': 262}
2026-01-15 12:36:06,838 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.13s
2026-01-15 12:36:06,838 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Gold.contracts_gold` ORDER BY agreement_year, agreement_month LI...
2026-01-15 12:36:06,838 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Paso 4: Ejecutando SQL en BigQuery
2026-01-15 12:36:06,838 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-15 12:36:06,849 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:36:06,850 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.012s
2026-01-15 12:36:06,850 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-15 12:36:06,850 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Gold.contracts_gold` ORDER BY agreement_year, agreement_month LI...
2026-01-15 12:36:06,850 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-15 12:36:08,401 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-15 12:36:08,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.997s
2026-01-15 12:36:08,851 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 646,695 (0.62 MB)
2026-01-15 12:36:08,851 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.01s
2026-01-15 12:36:08,851 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-15 12:36:08,851 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] BigQuery completado (2.01s)
2026-01-15 12:36:08,851 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-15 12:36:08,852 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-15 12:36:13,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: line
2026-01-15 12:36:13,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f077913] Recomendaci√≥n de gr√°fico: line
2026-01-15 12:36:13,541 - nl2sql_chatbot - INFO - ================================================================================
2026-01-15 12:36:13,541 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 8f077913
2026-01-15 12:36:13,541 - nl2sql_chatbot - INFO - ‚ùì Question: List all contracts ordered by date
2026-01-15 12:36:13,541 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 15.25s
2026-01-15 12:36:13,541 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-15 12:36:13,541 - nl2sql_chatbot - INFO -   - Get Schema: 1.05s
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.13s
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.01s
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO -   - Chart Recommendation: 4.69s
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Gold.contracts_gold` ORDER BY agreement_year, agreement_month LIMIT 100
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 214, 'candidates_tokens': 48, 'total_tokens': 262}
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-15 12:36:13,542 - nl2sql_chatbot - INFO - ================================================================================
2026-01-15 12:36:13,543 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [8f077913] completado exitosamente en 15.25s
2026-01-15 12:36:45,406 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [769b8108]: What is the average price of all contracts?
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Paso 1: Obteniendo schema de BigQuery
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Schema obtenido (0.00s)
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (instant√°neo)
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Paso 2: Construyendo prompt
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Prompt construido (0.000s, 797 chars)
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Paso 3: Generando SQL con Gemini
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-15 12:36:45,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-15 12:36:49,304 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.90s
2026-01-15 12:36:49,305 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 217, 'candidates_tokens': 41, 'total_tokens': 258}
2026-01-15 12:36:49,305 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.90s
2026-01-15 12:36:49,305 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-15 12:36:49,306 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Paso 4: Ejecutando SQL en BigQuery
2026-01-15 12:36:49,306 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-15 12:36:49,328 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:36:49,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.023s
2026-01-15 12:36:49,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-15 12:36:49,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-15 12:36:49,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-15 12:36:50,689 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-15 12:36:51,077 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.748s
2026-01-15 12:36:51,077 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 54,608 (0.05 MB)
2026-01-15 12:36:51,078 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.77s
2026-01-15 12:36:51,078 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-15 12:36:51,078 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] BigQuery completado (1.77s)
2026-01-15 12:36:51,078 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-15 12:36:51,078 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-15 12:36:56,343 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Error al analizar datos para gr√°fico: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-15 12:36:56,343 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [769b8108] Recomendaci√≥n de gr√°fico: None
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO - ================================================================================
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 769b8108
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO - ‚ùì Question: What is the average price of all contracts?
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.94s
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-15 12:36:56,344 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.90s
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.77s
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO -   - Chart Recommendation: 5.27s
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - üîç SQL: SELECT AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 217, 'candidates_tokens': 41, 'total_tokens': 258}
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - ================================================================================
2026-01-15 12:36:56,345 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [769b8108] completado exitosamente en 10.94s
2026-01-15 12:56:49,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-15 12:56:49,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-15 12:56:49,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-15 12:57:11,029 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [18d2b73b]: How many contracts are there in total?"
2026-01-15 12:57:11,030 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Paso 1: Obteniendo schema de BigQuery
2026-01-15 12:57:11,030 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-15 12:57:11,062 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:57:11,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.96s
2026-01-15 12:57:11,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Schema obtenido (0.96s)
2026-01-15 12:57:11,988 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-15 12:57:11,989 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-15 12:57:12,004 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:57:12,018 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:57:12,773 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProducts (bunge-de-poc-insumos.Gold.DimProducts): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProducts: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProducts?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProducts
2026-01-15 12:57:12,791 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:57:13,484 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProvince (bunge-de-poc-insumos.Gold.DimProvince): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProvince: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProvince?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProvince
2026-01-15 12:57:13,498 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:57:14,268 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimTime (bunge-de-poc-insumos.Gold.DimTime): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimTime: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimTime?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimTime
2026-01-15 12:57:14,269 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.28s (0 tablas)
2026-01-15 12:57:14,269 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Paso 2: Construyendo prompt
2026-01-15 12:57:14,269 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Prompt construido (0.000s, 793 chars)
2026-01-15 12:57:14,269 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Paso 3: Generando SQL con Gemini
2026-01-15 12:57:14,269 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-15 12:57:14,270 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-15 12:57:19,063 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-15 12:57:21,068 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-15 12:57:26,762 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.69s
2026-01-15 12:57:26,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 216, 'candidates_tokens': 46, 'total_tokens': 262}
2026-01-15 12:57:26,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 12.49s
2026-01-15 12:57:26,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT...
2026-01-15 12:57:26,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Paso 4: Ejecutando SQL en BigQuery
2026-01-15 12:57:26,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-15 12:57:26,780 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-15 12:57:26,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.017s
2026-01-15 12:57:26,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-15 12:57:26,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT...
2026-01-15 12:57:26,782 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-15 12:57:28,116 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-15 12:57:28,512 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.730s
2026-01-15 12:57:28,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 27,304 (0.03 MB)
2026-01-15 12:57:28,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.75s
2026-01-15 12:57:28,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-15 12:57:28,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] BigQuery completado (1.75s)
2026-01-15 12:57:28,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-15 12:57:28,514 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-15 12:57:32,716 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-15 12:57:32,717 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [18d2b73b] Recomendaci√≥n de gr√°fico: bar
2026-01-15 12:57:32,717 - nl2sql_chatbot - INFO - ================================================================================
2026-01-15 12:57:32,717 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 18d2b73b
2026-01-15 12:57:32,717 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there in total?"
2026-01-15 12:57:32,717 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 21.69s
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO -   - Get Schema: 0.96s
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 12.49s
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.75s
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO -   - Chart Recommendation: 4.20s
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - üîç SQL: SELECT SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 216, 'candidates_tokens': 46, 'total_tokens': 262}
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-15 12:57:32,718 - nl2sql_chatbot - INFO - ================================================================================
2026-01-15 12:57:32,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [18d2b73b] completado exitosamente en 21.69s
2026-01-16 14:31:06,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 14:31:06,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 14:31:06,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 14:37:38,829 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [aa213def]: "What is the count of contracts by province?"
2026-01-16 14:37:38,830 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Paso 1: Obteniendo schema de BigQuery
2026-01-16 14:37:38,830 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 14:37:38,853 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:37:40,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 1.24s
2026-01-16 14:37:40,068 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Schema obtenido (1.24s)
2026-01-16 14:37:40,068 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-16 14:37:40,068 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 14:37:40,078 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:37:40,087 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:37:40,900 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProducts (bunge-de-poc-insumos.Gold.DimProducts): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProducts: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProducts?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProducts
2026-01-16 14:37:40,915 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:37:41,726 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProvince (bunge-de-poc-insumos.Gold.DimProvince): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProvince: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProvince?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProvince
2026-01-16 14:37:41,736 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:37:42,442 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimTime (bunge-de-poc-insumos.Gold.DimTime): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimTime: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimTime?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimTime
2026-01-16 14:37:42,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.37s (0 tablas)
2026-01-16 14:37:42,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Paso 2: Construyendo prompt
2026-01-16 14:37:42,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Prompt construido (0.000s, 799 chars)
2026-01-16 14:37:42,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Paso 3: Generando SQL con Gemini
2026-01-16 14:37:42,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 14:37:42,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 14:37:46,733 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.29s
2026-01-16 14:37:46,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 218, 'candidates_tokens': 67, 'total_tokens': 285}
2026-01-16 14:37:46,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.29s
2026-01-16 14:37:46,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 14:37:46,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 14:37:46,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 14:37:46,746 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:37:46,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.012s
2026-01-16 14:37:46,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 14:37:46,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 14:37:46,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 14:37:48,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 14:37:48,564 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.817s
2026-01-16 14:37:48,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 69,557 (0.07 MB)
2026-01-16 14:37:48,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.83s
2026-01-16 14:37:48,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 14:37:48,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] BigQuery completado (1.83s)
2026-01-16 14:37:48,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 14:37:48,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 14:37:52,297 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aa213def] Recomendaci√≥n de gr√°fico: bar
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: aa213def
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO - ‚ùì Question: "What is the count of contracts by province?"
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 13.47s
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO -   - Get Schema: 1.24s
2026-01-16 14:37:52,298 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.29s
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.83s
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.73s
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY 1 ORDER BY total_contracts DESC LIMIT 100
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 218, 'candidates_tokens': 67, 'total_tokens': 285}
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 14:37:52,299 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [aa213def] completado exitosamente en 13.47s
2026-01-16 14:38:54,526 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [b3927662]: "Show me contracts by product category"*
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Paso 1: Obteniendo schema de BigQuery
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Schema obtenido (0.00s)
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (instant√°neo)
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Paso 2: Construyendo prompt
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Prompt construido (0.000s, 794 chars)
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Paso 3: Generando SQL con Gemini
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 14:38:54,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 14:38:58,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.74s
2026-01-16 14:38:58,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 216, 'candidates_tokens': 66, 'total_tokens': 282}
2026-01-16 14:38:58,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.74s
2026-01-16 14:38:58,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT product, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_go...
2026-01-16 14:38:58,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 14:38:58,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 14:38:58,277 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 14:38:58,278 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.013s
2026-01-16 14:38:58,278 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 14:38:58,278 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT product, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_go...
2026-01-16 14:38:58,278 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 14:38:59,816 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 14:39:00,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.962s
2026-01-16 14:39:00,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 64,124 (0.06 MB)
2026-01-16 14:39:00,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.98s
2026-01-16 14:39:00,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-16 14:39:00,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] BigQuery completado (1.98s)
2026-01-16 14:39:00,241 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 14:39:00,241 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 14:39:26,089 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 14:39:26,089 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b3927662] Recomendaci√≥n de gr√°fico: bar
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: b3927662
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO - ‚ùì Question: "Show me contracts by product category"*
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 31.56s
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 14:39:26,090 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.74s
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.98s
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO -   - Chart Recommendation: 25.85s
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - üîç SQL: SELECT product, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY product ORDER BY total_contracts DESC LIMIT 100
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 216, 'candidates_tokens': 66, 'total_tokens': 282}
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 14:39:26,091 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [b3927662] completado exitosamente en 31.56s
2026-01-16 15:39:55,106 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:39:55,106 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:39:55,106 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:40:19,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [b58f10f6]: Show me the average price per product type"
2026-01-16 15:40:19,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Paso 1: Obteniendo schema de BigQuery
2026-01-16 15:40:19,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 15:40:19,922 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:40:20,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.99s
2026-01-16 15:40:20,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Schema obtenido (0.99s)
2026-01-16 15:40:20,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-16 15:40:20,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 15:40:20,895 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:40:20,905 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:40:21,640 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProducts (bunge-de-poc-insumos.Gold.DimProducts): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProducts: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProducts?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProducts
2026-01-16 15:40:21,653 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:40:22,322 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProvince (bunge-de-poc-insumos.Gold.DimProvince): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProvince: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProvince?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProvince
2026-01-16 15:40:22,336 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:40:23,008 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimTime (bunge-de-poc-insumos.Gold.DimTime): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimTime: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimTime?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimTime
2026-01-16 15:40:23,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.12s (0 tablas)
2026-01-16 15:40:23,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Paso 2: Construyendo prompt
2026-01-16 15:40:23,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Prompt construido (0.000s, 797 chars)
2026-01-16 15:40:23,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Paso 3: Generando SQL con Gemini
2026-01-16 15:40:23,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 15:40:23,009 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 15:40:26,850 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.84s
2026-01-16 15:40:26,851 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 217, 'candidates_tokens': 57, 'total_tokens': 274}
2026-01-16 15:40:26,852 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.84s
2026-01-16 15:40:26,852 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-16 15:40:26,852 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 15:40:26,852 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 15:40:26,866 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:40:26,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-16 15:40:26,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 15:40:26,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-16 15:40:26,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 15:40:28,337 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 15:40:28,746 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.879s
2026-01-16 15:40:28,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 91,428 (0.09 MB)
2026-01-16 15:40:28,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.89s
2026-01-16 15:40:28,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-16 15:40:28,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] BigQuery completado (1.90s)
2026-01-16 15:40:28,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 15:40:28,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 15:40:32,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b58f10f6] Recomendaci√≥n de gr√°fico: bar
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: b58f10f6
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product type"
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 12.60s
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 15:40:32,494 - nl2sql_chatbot - INFO -   - Get Schema: 0.99s
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.84s
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.90s
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.75s
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - üîç SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY product LIMIT 100
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 217, 'candidates_tokens': 57, 'total_tokens': 274}
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:40:32,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [b58f10f6] completado exitosamente en 12.60s
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [abaa55d8]: "List contracts grouped by province name"
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Paso 1: Obteniendo schema de BigQuery
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Schema obtenido (0.00s)
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (instant√°neo)
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Paso 2: Construyendo prompt
2026-01-16 15:41:47,433 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Prompt construido (0.000s, 795 chars)
2026-01-16 15:41:47,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Paso 3: Generando SQL con Gemini
2026-01-16 15:41:47,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 15:41:47,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 15:41:50,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.49s
2026-01-16 15:41:50,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 216, 'candidates_tokens': 61, 'total_tokens': 277}
2026-01-16 15:41:50,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.49s
2026-01-16 15:41:50,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 15:41:50,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 15:41:50,927 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 15:41:50,939 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:41:50,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.013s
2026-01-16 15:41:50,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 15:41:50,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 15:41:50,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 15:41:52,150 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 15:41:52,561 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.621s
2026-01-16 15:41:52,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 69,557 (0.07 MB)
2026-01-16 15:41:52,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.64s
2026-01-16 15:41:52,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 15:41:52,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] BigQuery completado (1.64s)
2026-01-16 15:41:52,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 15:41:52,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 15:41:56,403 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 15:41:56,403 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [abaa55d8] Recomendaci√≥n de gr√°fico: bar
2026-01-16 15:41:56,404 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:41:56,404 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: abaa55d8
2026-01-16 15:41:56,404 - nl2sql_chatbot - INFO - ‚ùì Question: "List contracts grouped by province name"
2026-01-16 15:41:56,404 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 8.97s
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.49s
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.64s
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.84s
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province LIMIT 100
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 15:41:56,405 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 216, 'candidates_tokens': 61, 'total_tokens': 277}
2026-01-16 15:41:56,406 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 15:41:56,406 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 15:41:56,406 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:41:56,406 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [abaa55d8] completado exitosamente en 8.97s
2026-01-16 15:44:13,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:44:13,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:44:13,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:44:20,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:44:20,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:44:20,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:44:42,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:44:42,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:44:42,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:44:46,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:44:46,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:44:46,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:44:51,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:44:51,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:44:51,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:45:04,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:45:04,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:45:04,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:53:04,477 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:53:04,477 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:53:04,477 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:53:19,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [2a8c04fa]: "List contracts grouped by province name"
2026-01-16 15:53:19,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Paso 1: Obteniendo schema de BigQuery
2026-01-16 15:53:19,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 15:53:19,771 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:53:20,835 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 1.09s
2026-01-16 15:53:20,836 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Schema obtenido (1.09s)
2026-01-16 15:53:20,836 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-16 15:53:20,836 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 15:53:20,848 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:53:20,859 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:53:21,651 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProducts (bunge-de-poc-insumos.Gold.DimProducts): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProducts: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProducts?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProducts
2026-01-16 15:53:21,664 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:53:22,334 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProvince (bunge-de-poc-insumos.Gold.DimProvince): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProvince: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProvince?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProvince
2026-01-16 15:53:22,347 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:53:23,066 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimTime (bunge-de-poc-insumos.Gold.DimTime): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimTime: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimTime?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimTime
2026-01-16 15:53:23,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.23s (0 tablas)
2026-01-16 15:53:23,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Paso 2: Construyendo prompt
2026-01-16 15:53:23,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Prompt construido (0.000s, 1126 chars)
2026-01-16 15:53:23,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Paso 3: Generando SQL con Gemini
2026-01-16 15:53:23,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 15:53:23,068 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 15:53:30,950 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 7.88s
2026-01-16 15:53:30,951 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 294, 'candidates_tokens': 107, 'total_tokens': 401}
2026-01-16 15:53:30,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 7.88s
2026-01-16 15:53:30,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, SUM(contracts_gold.total_contracts) AS total_contracts FROM `bunge...
2026-01-16 15:53:30,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [2a8c04fa] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 15:53:30,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 15:53:30,966 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:53:30,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-16 15:53:30,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 15:53:30,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, SUM(contracts_gold.total_contracts) AS total_contracts FROM `bunge...
2026-01-16 15:53:30,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 15:53:32,224 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 15:53:32,224 - nl2sql_chatbot - ERROR - ‚ùå Error ejecutando query despu√©s de 1.27s: 404 Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1; reason: notFound, message: Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1

Location: southamerica-east1
Job ID: d1ac37d4-04d2-46a0-ac6f-e77c5a75b94c
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 228, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.NotFound: 404 Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1; reason: notFound, message: Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1

Location: southamerica-east1
Job ID: d1ac37d4-04d2-46a0-ac6f-e77c5a75b94c

2026-01-16 15:53:32,229 - nl2sql_chatbot - ERROR - ‚ùå [2a8c04fa] Error procesando pregunta: Error ejecutando query en BigQuery: 404 Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1; reason: notFound, message: Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1

Location: southamerica-east1
Job ID: d1ac37d4-04d2-46a0-ac6f-e77c5a75b94c
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 228, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.NotFound: 404 Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1; reason: notFound, message: Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1

Location: southamerica-east1
Job ID: d1ac37d4-04d2-46a0-ac6f-e77c5a75b94c


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/main.py", line 161, in ask_question
    bq_result = execute_query(sql)
                ^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 272, in execute_query
    raise Exception(f"Error ejecutando query en BigQuery: {str(e)}")
Exception: Error ejecutando query en BigQuery: 404 Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1; reason: notFound, message: Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1

Location: southamerica-east1
Job ID: d1ac37d4-04d2-46a0-ac6f-e77c5a75b94c

2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 2a8c04fa
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO - ‚ùì Question: "List contracts grouped by province name"
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 12.48s
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO -   - Get Schema: 1.09s
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 7.88s
2026-01-16 15:53:32,231 - nl2sql_chatbot - ERROR - ‚ùå Error: Error ejecutando query en BigQuery: 404 Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1; reason: notFound, message: Not found: Table bunge-de-poc-insumos:Gold.DimProvince was not found in location southamerica-east1

Location: southamerica-east1
Job ID: d1ac37d4-04d2-46a0-ac6f-e77c5a75b94c

2026-01-16 15:53:32,231 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:54:12,463 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:54:12,463 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:54:12,463 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:54:14,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:54:14,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:54:14,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:54:27,663 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:54:27,663 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:54:27,663 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:54:39,410 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:54:39,410 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:54:39,410 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:54:53,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 15:54:53,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 15:54:53,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 15:59:21,172 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [c7550152]: List contracts grouped by province name
2026-01-16 15:59:21,172 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Paso 1: Obteniendo schema de BigQuery
2026-01-16 15:59:21,172 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 15:59:21,196 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:59:22,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 1.00s
2026-01-16 15:59:22,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Schema obtenido (1.00s)
2026-01-16 15:59:22,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Obteniendo informaci√≥n de tablas de dimensiones...
2026-01-16 15:59:22,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 15:59:22,179 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:59:22,191 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:59:22,881 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProducts (bunge-de-poc-insumos.Gold.DimProducts): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProducts: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProducts?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProducts
2026-01-16 15:59:22,894 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:59:23,687 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimProvince (bunge-de-poc-insumos.Gold.DimProvince): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimProvince: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimProvince?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimProvince
2026-01-16 15:59:23,701 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:59:24,464 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è No se pudo obtener schema de DimTime (bunge-de-poc-insumos.Gold.DimTime): Error obteniendo schema de bunge-de-poc-insumos.Gold.DimTime: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bunge-de-poc-insumos/datasets/Gold/tables/DimTime?prettyPrint=false: Not found: Table bunge-de-poc-insumos:Gold.DimTime
2026-01-16 15:59:24,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.30s (0 tablas)
2026-01-16 15:59:24,465 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  [c7550152] ‚ö†Ô∏è  No hay tablas de dimensiones disponibles (0 tablas cargadas)
2026-01-16 15:59:24,465 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  [c7550152] El sistema usar√° solo la tabla principal sin JOINs
2026-01-16 15:59:24,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Paso 2: Construyendo prompt
2026-01-16 15:59:24,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Prompt construido (0.000s, 790 chars)
2026-01-16 15:59:24,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Paso 3: Generando SQL con Gemini
2026-01-16 15:59:24,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 15:59:24,466 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 15:59:28,222 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.76s
2026-01-16 15:59:28,224 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 215, 'candidates_tokens': 61, 'total_tokens': 276}
2026-01-16 15:59:28,224 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.76s
2026-01-16 15:59:28,224 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 15:59:28,225 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 15:59:28,225 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 15:59:28,240 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 15:59:28,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.016s
2026-01-16 15:59:28,241 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 15:59:28,241 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 15:59:28,241 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 15:59:29,600 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 15:59:29,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.737s
2026-01-16 15:59:29,978 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.75s
2026-01-16 15:59:29,978 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 15:59:29,978 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] BigQuery completado (1.75s)
2026-01-16 15:59:29,978 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 15:59:29,979 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 15:59:33,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 15:59:33,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c7550152] Recomendaci√≥n de gr√°fico: bar
2026-01-16 15:59:33,418 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: c7550152
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 12.25s
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO -   - Get Schema: 1.00s
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 15:59:33,419 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.76s
2026-01-16 15:59:33,420 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.75s
2026-01-16 15:59:33,420 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.44s
2026-01-16 15:59:33,420 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province LIMIT 100
2026-01-16 15:59:33,420 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 15:59:33,421 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 215, 'candidates_tokens': 61, 'total_tokens': 276}
2026-01-16 15:59:33,421 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 15:59:33,421 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 15:59:33,421 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 15:59:33,421 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [c7550152] completado exitosamente en 12.25s
2026-01-16 16:00:13,195 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:13,195 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:13,195 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:00:17,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:17,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:17,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:00:20,276 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:20,276 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:20,276 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:00:22,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:22,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:22,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:00:28,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:28,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:28,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:00:39,856 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:39,857 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:39,857 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:00:47,856 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:00:47,856 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:00:47,856 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:01:16,255 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [15f6f2cb]: List contracts grouped by province name
2026-01-16 16:01:16,255 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:01:16,255 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:01:16,279 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:01:17,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.80s
2026-01-16 16:01:17,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Schema obtenido (0.80s)
2026-01-16 16:01:17,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:01:17,070 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:01:17,080 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:01:17,762 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no existe (bunge-de-poc-insumos.Gold.DimProducts) - Se omitir√° en futuros requests
2026-01-16 16:01:17,779 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:01:18,391 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no existe (bunge-de-poc-insumos.Gold.DimProvince) - Se omitir√° en futuros requests
2026-01-16 16:01:18,406 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:01:19,074 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no existe (bunge-de-poc-insumos.Gold.DimTime) - Se omitir√° en futuros requests
2026-01-16 16:01:19,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] ‚ÑπÔ∏è  Sin tablas de dimensiones - usando solo tabla principal
2026-01-16 16:01:19,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Paso 2: Construyendo prompt
2026-01-16 16:01:19,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Prompt construido (0.000s, 790 chars)
2026-01-16 16:01:19,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Paso 3: Generando SQL con Gemini
2026-01-16 16:01:19,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:01:19,076 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:01:22,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.85s
2026-01-16 16:01:22,927 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 215, 'candidates_tokens': 61, 'total_tokens': 276}
2026-01-16 16:01:22,927 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.85s
2026-01-16 16:01:22,927 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 16:01:22,927 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:01:22,927 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:01:22,942 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:01:22,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-16 16:01:22,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:01:22,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-16 16:01:22,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:01:24,090 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:01:24,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.591s
2026-01-16 16:01:24,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.61s
2026-01-16 16:01:24,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 16:01:24,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] BigQuery completado (1.61s)
2026-01-16 16:01:24,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:01:24,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:01:28,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:01:28,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [15f6f2cb] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:01:28,012 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 15f6f2cb
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.76s
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO -   - Get Schema: 0.80s
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.85s
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.61s
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.48s
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province LIMIT 100
2026-01-16 16:01:28,013 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 16:01:28,014 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 215, 'candidates_tokens': 61, 'total_tokens': 276}
2026-01-16 16:01:28,014 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:01:28,014 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:01:28,014 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:01:28,014 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [15f6f2cb] completado exitosamente en 11.76s
2026-01-16 16:03:50,246 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:03:50,246 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:03:50,247 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:03:53,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:03:53,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:03:53,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:03:58,226 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:03:58,226 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:03:58,226 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:04:02,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:04:02,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:04:02,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:04:03,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:04:03,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:04:03,952 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:04:12,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:04:12,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:04:12,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:04:15,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:04:15,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:04:15,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:04:23,152 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:04:23,152 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:04:23,152 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:04:31,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:04:31,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:04:31,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:05:00,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:05:00,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:05:00,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:05:52,242 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [0309fbe6]: What are the contracts by month and year?
2026-01-16 16:05:52,242 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:05:52,242 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:05:52,272 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:05:53,126 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.88s
2026-01-16 16:05:53,127 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Schema obtenido (0.88s)
2026-01-16 16:05:53,127 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:05:53,143 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:05:53,153 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:05:53,799 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:05:53,799 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:05:53,811 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:05:54,484 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:05:54,484 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:05:54,499 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:05:55,222 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:05:55,222 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:05:55,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] ‚ÑπÔ∏è  Sin tablas de dimensiones - usando solo tabla principal
2026-01-16 16:05:55,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Paso 2: Construyendo prompt
2026-01-16 16:05:55,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Prompt construido (0.000s, 792 chars)
2026-01-16 16:05:55,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Paso 3: Generando SQL con Gemini
2026-01-16 16:05:55,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:05:55,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:06:05,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 10.21s
2026-01-16 16:06:05,436 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 218, 'candidates_tokens': 81, 'total_tokens': 299}
2026-01-16 16:06:05,436 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 10.21s
2026-01-16 16:06:05,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT agreement_year, agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-i...
2026-01-16 16:06:05,438 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:06:05,438 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:06:05,452 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:06:05,453 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-16 16:06:05,454 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:06:05,455 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT agreement_year, agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-i...
2026-01-16 16:06:05,455 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:06:06,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:06:07,214 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.760s
2026-01-16 16:06:07,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 81,912 (0.08 MB)
2026-01-16 16:06:07,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.78s
2026-01-16 16:06:07,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 65
2026-01-16 16:06:07,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] BigQuery completado (1.78s)
2026-01-16 16:06:07,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:06:07,217 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:06:10,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: line
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0309fbe6] Recomendaci√≥n de gr√°fico: line
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 0309fbe6
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO - ‚ùì Question: What are the contracts by month and year?
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 18.52s
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:06:10,765 - nl2sql_chatbot - INFO -   - Get Schema: 0.88s
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 10.21s
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.78s
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.55s
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - üîç SQL: SELECT agreement_year, agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY 1, 2 ORDER BY agreement_year, agreement_month LIMIT 100
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - üìä Rows: 65
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 218, 'candidates_tokens': 81, 'total_tokens': 299}
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:06:10,766 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [0309fbe6] completado exitosamente en 18.52s
2026-01-16 16:07:45,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:07:45,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:07:45,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:07:45,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîç Verificando tablas de dimensiones al inicio...
2026-01-16 16:07:45,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:07:45,877 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:07:45,882 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:07:46,548 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:07:46,548 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:07:46,560 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:07:47,119 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:07:47,119 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:07:47,133 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:07:47,815 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:07:47,815 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:07:47,815 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  No se encontraron tablas de dimensiones
2026-01-16 16:07:47,815 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     El sistema funcionar√° solo con la tabla principal (sin JOINs)
2026-01-16 16:07:47,815 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Para forzar recarga: POST /dimensions/refresh
2026-01-16 16:08:08,065 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:08:08,065 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:08:08,065 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:08:08,065 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîç Verificando tablas de dimensiones al inicio...
2026-01-16 16:08:08,065 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:08:08,075 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:08,080 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:08,781 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:08:08,781 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:08,796 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:09,469 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:08:09,470 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:09,482 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:10,124 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:08:10,125 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:10,125 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  No se encontraron tablas de dimensiones
2026-01-16 16:08:10,125 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     El sistema funcionar√° solo con la tabla principal (sin JOINs)
2026-01-16 16:08:10,125 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Para forzar recarga: POST /dimensions/refresh
2026-01-16 16:08:21,643 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üßπ Cache de dimensiones limpiado
2026-01-16 16:08:21,644 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:08:21,649 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:21,651 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:22,267 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:08:22,267 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:22,275 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:22,882 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:08:22,882 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:22,890 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:23,509 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:08:23,510 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:24,574 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:08:24,574 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:08:24,574 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:08:24,574 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîç Verificando tablas de dimensiones al inicio...
2026-01-16 16:08:24,574 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:08:24,587 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:24,593 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:25,204 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:08:25,205 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:25,216 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:26,081 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:08:26,081 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:26,092 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:08:26,833 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:08:26,833 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:08:26,833 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  No se encontraron tablas de dimensiones
2026-01-16 16:08:26,834 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     El sistema funcionar√° solo con la tabla principal (sin JOINs)
2026-01-16 16:08:26,834 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Para forzar recarga: POST /dimensions/refresh
2026-01-16 16:09:19,132 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:09:19,132 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:09:19,132 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:09:19,132 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:09:19,143 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:09:19,149 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:09:19,893 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:09:19,893 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:09:19,906 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:09:20,526 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:09:20,526 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:09:20,541 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:09:21,197 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:09:21,197 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:09:21,197 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:09:21,197 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:10:05,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:10:05,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:10:05,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:10:05,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:10:05,192 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:05,195 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:07,180 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:10:07,181 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:07,196 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:08,679 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:10:08,679 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:08,693 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:09,498 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:10:09,498 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:09,498 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:10:09,498 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:10:33,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:10:33,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:10:33,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:10:33,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:10:33,184 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:33,188 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:33,874 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:10:33,874 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:33,885 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:34,563 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:10:34,563 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:34,578 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:35,272 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:10:35,272 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:35,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:10:35,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:10:36,239 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:10:36,239 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:10:36,239 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:10:36,239 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:10:36,248 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:36,252 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:36,939 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada (bunge-de-poc-insumos.Gold.DimProducts)
2026-01-16 16:10:36,939 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:36,950 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:37,599 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada (bunge-de-poc-insumos.Gold.DimProvince)
2026-01-16 16:10:37,600 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:37,611 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:38,267 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada (bunge-de-poc-insumos.Gold.DimTime)
2026-01-16 16:10:38,267 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Si la tabla existe, verifica permisos o usa force_refresh=True para reintentar
2026-01-16 16:10:38,268 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:10:38,268 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:10:44,709 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:10:44,709 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:10:44,709 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:10:44,709 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:10:44,718 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:44,722 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimProducts
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimProducts'
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:10:45,354 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:10:45,366 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:46,046 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada
2026-01-16 16:10:46,046 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimProvince
2026-01-16 16:10:46,046 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:10:46,046 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:10:46,047 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimProvince'
2026-01-16 16:10:46,047 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:10:46,047 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:10:46,058 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimTime
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimTime'
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:10:46,809 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:10:46,809 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:10:46,810 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:11:03,066 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:11:03,066 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:11:03,066 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:11:03,066 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:11:03,076 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:03,080 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:03,637 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada
2026-01-16 16:11:03,638 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimProducts
2026-01-16 16:11:03,638 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:11:03,638 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:11:03,638 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimProducts'
2026-01-16 16:11:03,638 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:11:03,638 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:11:03,647 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimProvince
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimProvince'
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:11:04,303 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:11:04,316 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimTime
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimTime'
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:11:04,967 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:11:04,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:11:04,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:11:10,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:11:10,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:11:10,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:11:10,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:11:10,379 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:10,382 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:12,011 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProducts no encontrada
2026-01-16 16:11:12,011 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimProducts
2026-01-16 16:11:12,012 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:11:12,012 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:11:12,012 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimProducts'
2026-01-16 16:11:12,012 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:11:12,012 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:11:12,024 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:18,769 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimProvince no encontrada
2026-01-16 16:11:18,769 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimProvince
2026-01-16 16:11:18,769 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:11:18,769 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:11:18,769 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimProvince'
2026-01-16 16:11:18,769 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:11:18,770 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:11:18,782 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è Tabla de dimensi√≥n DimTime no encontrada
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     ID buscado: bunge-de-poc-insumos.Gold.DimTime
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è     Verifica:
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       1. Que la tabla exista en BigQuery Console
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       2. Que el nombre sea exacto: 'DimTime'
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       3. Que est√© en el dataset: Gold
2026-01-16 16:11:19,445 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è       4. Ejecuta: python backend/check_dimensions.py para diagn√≥stico
2026-01-16 16:11:19,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ÑπÔ∏è  Sin tablas de dimensiones - el sistema funcionar√° solo con la tabla principal
2026-01-16 16:11:19,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è     Para forzar recarga de dimensiones: POST /dimensions/refresh
2026-01-16 16:12:31,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:12:31,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:12:31,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:12:31,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:12:31,702 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:31,703 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error verificando dimensiones al inicio: name 'dataset' is not defined
2026-01-16 16:12:32,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:12:32,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:12:32,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:12:32,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:12:32,687 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:32,691 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:36,561 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:12:36,576 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:44,124 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:12:44,136 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:44,793 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:12:44,793 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 12.12s (3 tablas)
2026-01-16 16:12:44,793 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:12:44,793 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:12:45,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:12:45,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:12:45,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:12:45,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:12:45,745 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:45,749 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:46,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:12:46,370 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:47,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:12:47,054 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:47,704 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:12:47,704 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 1.97s (3 tablas)
2026-01-16 16:12:47,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:12:47,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:12:48,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:12:48,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:12:48,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:12:48,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:12:48,751 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:48,755 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:49,359 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:12:49,374 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:50,003 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:12:50,017 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:50,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:12:50,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.00s (3 tablas)
2026-01-16 16:12:50,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:12:50,742 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:12:51,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:12:51,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:12:51,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:12:51,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:12:51,694 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:51,698 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:52,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:12:52,374 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:53,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:12:53,169 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:12:53,854 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:12:53,854 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.17s (3 tablas)
2026-01-16 16:12:53,855 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:12:53,855 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:13:23,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:13:23,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:13:23,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:13:23,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:13:23,080 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:23,083 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:23,801 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:13:23,813 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:24,505 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:13:24,517 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:25,210 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:13:25,211 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.14s (3 tablas)
2026-01-16 16:13:25,211 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:13:25,211 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:13:37,896 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:37,899 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:38,582 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:39,193 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:40,863 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:13:40,863 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:13:40,863 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:13:40,863 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:13:40,873 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:40,876 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:41,504 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:13:41,516 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:42,221 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:13:42,233 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:13:42,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:13:42,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.08s (3 tablas)
2026-01-16 16:13:42,939 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:13:42,939 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:14:22,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [021b3641]: List contracts grouped by province name
2026-01-16 16:14:22,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:14:22,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:14:22,231 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:14:22,976 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.76s
2026-01-16 16:14:22,976 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Schema obtenido (0.76s)
2026-01-16 16:14:22,976 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:14:22,976 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Paso 2: Construyendo prompt
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Prompt construido (0.000s, 2937 chars)
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Paso 3: Generando SQL con Gemini
2026-01-16 16:14:22,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:14:22,978 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:14:27,557 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.58s
2026-01-16 16:14:27,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 830, 'candidates_tokens': 106, 'total_tokens': 936}
2026-01-16 16:14:27,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.58s
2026-01-16 16:14:27,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:14:27,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:14:27,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:14:27,573 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:14:27,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.014s
2026-01-16 16:14:27,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:14:27,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:14:27,574 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:14:29,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:14:29,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.161s
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 42,328 (0.04 MB)
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.33s
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [021b3641] BigQuery completado (2.33s)
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 021b3641
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 7.67s
2026-01-16 16:14:29,888 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO -   - Get Schema: 0.76s
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.58s
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.33s
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` AS contracts_gold JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold.delivery_province = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 830, 'candidates_tokens': 106, 'total_tokens': 936}
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:14:29,889 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [021b3641] completado exitosamente en 7.67s
2026-01-16 16:15:03,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [c42ae281]: Total quantity by product name
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Schema obtenido (0.00s)
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Paso 2: Construyendo prompt
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Prompt construido (0.000s, 2928 chars)
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Preview del prompt (√∫ltimos 500 chars):
 RELACIONES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Total quantity by product name

SQL:
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Paso 3: Generando SQL con Gemini
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:15:03,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:15:08,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.11s
2026-01-16 16:15:08,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 829, 'candidates_tokens': 121, 'total_tokens': 950}
2026-01-16 16:15:08,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.11s
2026-01-16 16:15:08,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(contracts_gold.total_quantity) AS total_quantity FROM `bunge-de...
2026-01-16 16:15:08,536 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:15:08,536 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:15:08,550 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:15:08,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-16 16:15:08,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:15:08,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(contracts_gold.total_quantity) AS total_quantity FROM `bunge-de...
2026-01-16 16:15:08,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:15:09,881 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:15:10,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.722s
2026-01-16 16:15:10,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 91,494 (0.09 MB)
2026-01-16 16:15:10,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.74s
2026-01-16 16:15:10,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-16 16:15:10,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] BigQuery completado (1.74s)
2026-01-16 16:15:10,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:15:10,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:15:16,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:15:16,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c42ae281] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:15:16,129 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:15:16,129 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: c42ae281
2026-01-16 16:15:16,129 - nl2sql_chatbot - INFO - ‚ùì Question: Total quantity by product name
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 12.71s
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.11s
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.74s
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO -   - Chart Recommendation: 5.86s
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(contracts_gold.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold` AS contracts_gold JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON contracts_gold.product = DimProducts.product_id GROUP BY DimProducts.product_name ORDER BY total_quantity DESC LIMIT 100
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-16 16:15:16,130 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 829, 'candidates_tokens': 121, 'total_tokens': 950}
2026-01-16 16:16:01,964 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:16:01,964 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:16:01,964 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:16:01,964 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [c42ae281] completado exitosamente en 12.71s
2026-01-16 16:16:11,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [16ce5080]: Total quantity by product name
2026-01-16 16:16:11,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Schema obtenido (0.00s)
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Paso 2: Construyendo prompt
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Prompt construido (0.000s, 2928 chars)
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Preview del prompt (√∫ltimos 500 chars):
 RELACIONES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Total quantity by product name

SQL:
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Paso 3: Generando SQL con Gemini
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:16:11,922 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:16:17,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.26s
2026-01-16 16:16:17,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 829, 'candidates_tokens': 121, 'total_tokens': 950}
2026-01-16 16:16:17,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.26s
2026-01-16 16:16:17,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(contracts_gold.total_quantity) AS total_quantity FROM `bunge-de...
2026-01-16 16:16:17,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:16:17,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:16:17,194 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:16:17,194 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.014s
2026-01-16 16:16:17,194 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:16:17,194 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(contracts_gold.total_quantity) AS total_quantity FROM `bunge-de...
2026-01-16 16:16:17,194 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:16:18,424 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:16:18,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.700s
2026-01-16 16:16:18,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.71s
2026-01-16 16:16:18,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-16 16:16:18,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] BigQuery completado (1.71s)
2026-01-16 16:16:18,895 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:16:18,895 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [16ce5080] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 16ce5080
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - ‚ùì Question: Total quantity by product name
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.99s
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:16:23,911 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.26s
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.71s
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO -   - Chart Recommendation: 5.02s
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(contracts_gold.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold` AS contracts_gold JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON contracts_gold.product = DimProducts.product_id GROUP BY DimProducts.product_name ORDER BY total_quantity DESC LIMIT 100
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 829, 'candidates_tokens': 121, 'total_tokens': 950}
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:16:23,912 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [16ce5080] completado exitosamente en 11.99s
2026-01-16 16:21:54,086 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:21:54,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:21:54,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:21:54,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:21:54,099 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:21:54,104 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:21:54,973 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:21:54,986 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:21:55,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:21:55,655 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:21:56,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:21:56,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.25s (3 tablas)
2026-01-16 16:21:56,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:21:56,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:22:00,738 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [92003641]: List contracts grouped by province name"
2026-01-16 16:22:00,738 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:22:00,738 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:22:00,750 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:22:01,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.80s
2026-01-16 16:22:01,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Schema obtenido (0.80s)
2026-01-16 16:22:01,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:22:01,536 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:22:01,536 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:22:01,536 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Paso 2: Construyendo prompt
2026-01-16 16:22:01,537 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Prompt construido (0.001s, 2938 chars)
2026-01-16 16:22:01,537 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:22:01,537 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Preview del prompt (√∫ltimos 500 chars):
S
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name"

SQL:
2026-01-16 16:22:01,537 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Paso 3: Generando SQL con Gemini
2026-01-16 16:22:01,537 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:22:01,539 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:22:06,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.04s
2026-01-16 16:22:06,582 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 831, 'candidates_tokens': 106, 'total_tokens': 937}
2026-01-16 16:22:06,582 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.04s
2026-01-16 16:22:06,582 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:22:06,582 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:22:06,582 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:22:06,596 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:22:06,597 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.014s
2026-01-16 16:22:06,597 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:22:06,597 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:22:06,597 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:22:07,979 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:22:08,401 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.804s
2026-01-16 16:22:08,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.14s
2026-01-16 16:22:08,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-16 16:22:08,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [92003641] BigQuery completado (2.14s)
2026-01-16 16:22:08,722 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 92003641
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name"
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 7.98s
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO -   - Get Schema: 0.80s
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.04s
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.14s
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` AS contracts_gold JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold.delivery_province = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-16 16:22:08,723 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 831, 'candidates_tokens': 106, 'total_tokens': 937}
2026-01-16 16:22:08,724 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:22:08,724 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:22:08,724 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:22:08,724 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [92003641] completado exitosamente en 7.98s
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [f850058f]: List contracts grouped by province name
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Schema obtenido (0.00s)
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:27:16,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Paso 2: Construyendo prompt
2026-01-16 16:27:16,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Prompt construido (0.000s, 2937 chars)
2026-01-16 16:27:16,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:27:16,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-16 16:27:16,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Paso 3: Generando SQL con Gemini
2026-01-16 16:27:16,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:27:16,445 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:27:21,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.87s
2026-01-16 16:27:21,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 830, 'candidates_tokens': 106, 'total_tokens': 936}
2026-01-16 16:27:21,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.88s
2026-01-16 16:27:21,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:27:21,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:27:21,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:27:21,337 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:27:21,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.016s
2026-01-16 16:27:21,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:27:21,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:27:21,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:27:22,655 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:27:23,009 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.671s
2026-01-16 16:27:23,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.86s
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f850058f] BigQuery completado (1.86s)
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: f850058f
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 6.74s
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:27:23,183 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.88s
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.86s
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` AS contracts_gold JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold.delivery_province = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 830, 'candidates_tokens': 106, 'total_tokens': 936}
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:27:23,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [f850058f] completado exitosamente en 6.74s
2026-01-16 16:28:26,147 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:26,149 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:26,948 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:27,539 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:29,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:28:29,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:28:29,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:28:29,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:28:29,448 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:29,451 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:30,138 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:28:30,147 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:30,849 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:28:30,863 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:31,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:28:31,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.10s (3 tablas)
2026-01-16 16:28:31,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:28:31,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:28:57,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [1b76b1bd]: List contracts grouped by province name
2026-01-16 16:28:57,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:28:57,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:28:57,241 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:28:57,990 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.76s
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Schema obtenido (0.76s)
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Paso 2: Construyendo prompt
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Prompt construido (0.000s, 2923 chars)
2026-01-16 16:28:57,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:28:57,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-16 16:28:57,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Paso 3: Generando SQL con Gemini
2026-01-16 16:28:57,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:28:57,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:29:02,248 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.26s
2026-01-16 16:29:02,250 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:29:02,250 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.26s
2026-01-16 16:29:02,250 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:29:02,250 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:29:02,250 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:29:02,266 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:29:02,266 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.016s
2026-01-16 16:29:02,266 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:29:02,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:29:02,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:29:03,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:29:04,099 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.833s
2026-01-16 16:29:04,100 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 13,727 (0.01 MB)
2026-01-16 16:29:04,100 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.85s
2026-01-16 16:29:04,100 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 16:29:04,100 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] BigQuery completado (1.85s)
2026-01-16 16:29:04,100 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:29:04,100 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:29:08,299 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:29:08,300 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b76b1bd] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:29:08,300 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:29:08,300 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 1b76b1bd
2026-01-16 16:29:08,301 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:29:08,301 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.07s
2026-01-16 16:29:08,301 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:29:08,301 - nl2sql_chatbot - INFO -   - Get Schema: 0.76s
2026-01-16 16:29:08,301 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:29:08,302 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.26s
2026-01-16 16:29:08,302 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.85s
2026-01-16 16:29:08,302 - nl2sql_chatbot - INFO -   - Chart Recommendation: 4.20s
2026-01-16 16:29:08,302 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:29:08,302 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 16:29:08,304 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:29:08,305 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:29:08,305 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:29:08,305 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:29:08,305 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [1b76b1bd] completado exitosamente en 11.07s
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [11ff42f4]: List contracts grouped by province name
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Schema obtenido (0.00s)
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:32:28,279 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Paso 2: Construyendo prompt
2026-01-16 16:32:28,280 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Prompt construido (0.000s, 2923 chars)
2026-01-16 16:32:28,280 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:32:28,280 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-16 16:32:28,280 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Paso 3: Generando SQL con Gemini
2026-01-16 16:32:28,280 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:32:28,280 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:32:32,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.88s
2026-01-16 16:32:32,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:32:32,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.88s
2026-01-16 16:32:32,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:32:32,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:32:32,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:32:32,169 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:32:32,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.013s
2026-01-16 16:32:32,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:32:32,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:32:32,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:32:33,532 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:32:33,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.823s
2026-01-16 16:32:33,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.84s
2026-01-16 16:32:33,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 16:32:33,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] BigQuery completado (1.84s)
2026-01-16 16:32:33,993 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:32:33,994 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:32:37,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:32:37,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [11ff42f4] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 11ff42f4
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.50s
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:32:37,782 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.88s
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.84s
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.79s
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:32:37,783 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [11ff42f4] completado exitosamente en 9.50s
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [f704be38]: List contracts grouped by province name
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Schema obtenido (0.00s)
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Paso 2: Construyendo prompt
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Prompt construido (0.000s, 2923 chars)
2026-01-16 16:34:33,693 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:34:33,694 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-16 16:34:33,694 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Paso 3: Generando SQL con Gemini
2026-01-16 16:34:33,694 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:34:33,694 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:34:37,544 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.85s
2026-01-16 16:34:37,544 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:34:37,544 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.85s
2026-01-16 16:34:37,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:34:37,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:34:37,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:34:37,559 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:34:37,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-16 16:34:37,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:34:37,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:34:37,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:34:38,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:34:39,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.828s
2026-01-16 16:34:39,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.84s
2026-01-16 16:34:39,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 16:34:39,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] BigQuery completado (1.84s)
2026-01-16 16:34:39,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:34:39,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:34:42,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:34:42,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [f704be38] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:34:42,972 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: f704be38
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.28s
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:34:42,973 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.85s
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.84s
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.58s
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:34:42,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [f704be38] completado exitosamente en 9.28s
2026-01-16 16:35:04,822 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:04,824 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:05,539 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:06,326 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:08,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-16 16:35:08,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-16 16:35:08,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-16 16:35:08,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-16 16:35:08,259 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:08,263 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:09,061 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-16 16:35:09,071 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:09,771 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-16 16:35:09,780 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:10,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-16 16:35:10,443 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.19s (3 tablas)
2026-01-16 16:35:10,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-16 16:35:10,444 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-16 16:35:20,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [aca2cad1]: List contracts grouped by province name
2026-01-16 16:35:20,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Paso 1: Obteniendo schema de BigQuery
2026-01-16 16:35:20,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-16 16:35:20,893 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.81s
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Schema obtenido (0.81s)
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Tablas: DimProducts, DimProvince, DimTime
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Paso 2: Construyendo prompt
2026-01-16 16:35:21,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Prompt construido (0.000s, 2923 chars)
2026-01-16 16:35:21,682 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Prompt incluye 3 tablas de dimensiones
2026-01-16 16:35:21,682 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-16 16:35:21,682 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Paso 3: Generando SQL con Gemini
2026-01-16 16:35:21,682 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-16 16:35:21,682 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-16 16:35:26,298 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-16 16:35:28,302 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-16 16:35:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.78s
2026-01-16 16:35:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:35:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 10.40s
2026-01-16 16:35:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:35:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Paso 4: Ejecutando SQL en BigQuery
2026-01-16 16:35:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-16 16:35:32,098 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-16 16:35:32,098 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.013s
2026-01-16 16:35:32,098 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-16 16:35:32,098 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-16 16:35:32,099 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-16 16:35:33,299 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-16 16:35:33,558 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.460s
2026-01-16 16:35:33,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.47s
2026-01-16 16:35:33,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-16 16:35:33,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] BigQuery completado (1.47s)
2026-01-16 16:35:33,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-16 16:35:33,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-16 16:35:37,109 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [aca2cad1] Recomendaci√≥n de gr√°fico: bar
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: aca2cad1
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 16.24s
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-16 16:35:37,110 - nl2sql_chatbot - INFO -   - Get Schema: 0.81s
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 10.40s
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.47s
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.55s
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - ================================================================================
2026-01-16 16:35:37,111 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [aca2cad1] completado exitosamente en 16.24s
2026-01-19 15:58:23,597 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:23,599 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:24,582 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:25,515 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:27,593 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 15:58:27,593 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 15:58:27,593 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 15:58:27,593 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 15:58:27,603 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:27,606 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:28,415 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 15:58:28,430 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:29,375 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 15:58:29,392 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:58:30,298 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 15:58:30,299 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.71s (3 tablas)
2026-01-19 15:58:30,299 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 15:58:30,299 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 15:59:15,481 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [b392a897]: List contracts grouped by province name
2026-01-19 15:59:15,481 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Paso 1: Obteniendo schema de BigQuery
2026-01-19 15:59:15,481 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 15:59:15,495 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:59:16,355 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.87s
2026-01-19 15:59:16,356 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Schema obtenido (0.87s)
2026-01-19 15:59:16,356 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 15:59:16,356 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 15:59:16,356 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 15:59:16,356 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Paso 2: Construyendo prompt
2026-01-19 15:59:16,357 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Prompt construido (0.000s, 2923 chars)
2026-01-19 15:59:16,357 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Prompt incluye 3 tablas de dimensiones
2026-01-19 15:59:16,357 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-19 15:59:16,357 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Paso 3: Generando SQL con Gemini
2026-01-19 15:59:16,357 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 15:59:16,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 15:59:20,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.53s
2026-01-19 15:59:20,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-19 15:59:20,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.53s
2026-01-19 15:59:20,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-19 15:59:20,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 15:59:20,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 15:59:20,909 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 15:59:20,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-19 15:59:20,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 15:59:20,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-19 15:59:20,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 15:59:22,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 15:59:22,726 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.816s
2026-01-19 15:59:22,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 13,727 (0.01 MB)
2026-01-19 15:59:22,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.84s
2026-01-19 15:59:22,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-19 15:59:22,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] BigQuery completado (1.84s)
2026-01-19 15:59:22,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 15:59:22,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 15:59:26,271 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 15:59:26,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b392a897] Recomendaci√≥n de gr√°fico: bar
2026-01-19 15:59:26,272 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 15:59:26,272 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: b392a897
2026-01-19 15:59:26,272 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.79s
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO -   - Get Schema: 0.87s
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.53s
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.84s
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.54s
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-19 15:59:26,273 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 15:59:26,274 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 15:59:26,274 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 15:59:26,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [b392a897] completado exitosamente en 10.79s
2026-01-19 16:12:36,928 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:36,930 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:37,864 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:38,664 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:40,480 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 16:12:40,480 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 16:12:40,480 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 16:12:40,480 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 16:12:40,490 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:40,494 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:41,285 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 16:12:41,300 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:42,192 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 16:12:42,207 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:43,038 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 16:12:43,039 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.56s (3 tablas)
2026-01-19 16:12:43,039 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 16:12:43,039 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 16:12:49,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [14a81c35]: List contracts grouped by province name
2026-01-19 16:12:49,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Paso 1: Obteniendo schema de BigQuery
2026-01-19 16:12:49,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 16:12:49,792 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:12:50,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.64s
2026-01-19 16:12:50,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Schema obtenido (0.64s)
2026-01-19 16:12:50,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 16:12:50,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 16:12:50,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 16:12:50,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Paso 2: Construyendo prompt
2026-01-19 16:12:50,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Prompt construido (0.000s, 2923 chars)
2026-01-19 16:12:50,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Prompt incluye 3 tablas de dimensiones
2026-01-19 16:12:50,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-19 16:12:50,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Paso 3: Generando SQL con Gemini
2026-01-19 16:12:50,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 16:12:50,421 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 16:12:54,142 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-19 16:12:56,147 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-19 16:13:00,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.03s
2026-01-19 16:13:00,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-19 16:13:00,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 9.76s
2026-01-19 16:13:00,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-19 16:13:00,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 16:13:00,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 16:13:00,196 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:13:00,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.015s
2026-01-19 16:13:00,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 16:13:00,197 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-19 16:13:00,197 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 16:13:01,406 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 16:13:01,819 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.622s
2026-01-19 16:13:01,819 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.64s
2026-01-19 16:13:01,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-19 16:13:01,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] BigQuery completado (1.64s)
2026-01-19 16:13:01,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 16:13:01,820 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 16:13:12,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 16:13:12,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [14a81c35] Recomendaci√≥n de gr√°fico: bar
2026-01-19 16:13:12,289 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:13:12,290 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 14a81c35
2026-01-19 16:13:12,290 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-19 16:13:12,290 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 22.51s
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO -   - Get Schema: 0.64s
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 9.76s
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.64s
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO -   - Chart Recommendation: 10.47s
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 840, 'candidates_tokens': 112, 'total_tokens': 952}
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:13:12,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [14a81c35] completado exitosamente en 22.51s
2026-01-19 16:55:27,403 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [d524fd8e]: How many contracts are there by province name?
2026-01-19 16:55:27,404 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Paso 1: Obteniendo schema de BigQuery
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Schema obtenido (0.00s)
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Paso 2: Construyendo prompt
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Prompt construido (0.000s, 2930 chars)
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Prompt incluye 3 tablas de dimensiones
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Preview del prompt (√∫ltimos 500 chars):
 Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: How many contracts are there by province name?

SQL:
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Paso 3: Generando SQL con Gemini
2026-01-19 16:55:27,405 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 16:55:27,406 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 16:55:32,540 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.13s
2026-01-19 16:55:32,541 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 843, 'candidates_tokens': 120, 'total_tokens': 963}
2026-01-19 16:55:32,541 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.14s
2026-01-19 16:55:32,541 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, SUM(contracts_gold_2.total_contracts) AS total_contracts FROM `bun...
2026-01-19 16:55:32,541 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 16:55:32,541 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 16:55:32,562 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:55:32,563 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.021s
2026-01-19 16:55:32,563 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 16:55:32,563 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, SUM(contracts_gold_2.total_contracts) AS total_contracts FROM `bun...
2026-01-19 16:55:32,563 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 16:55:34,088 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 16:55:34,482 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.919s
2026-01-19 16:55:34,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 41,031 (0.04 MB)
2026-01-19 16:55:34,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.94s
2026-01-19 16:55:34,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-19 16:55:34,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] BigQuery completado (1.94s)
2026-01-19 16:55:34,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 16:55:34,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 16:55:38,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d524fd8e] Recomendaci√≥n de gr√°fico: bar
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: d524fd8e
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there by province name?
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.89s
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.14s
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.94s
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.81s
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, SUM(contracts_gold_2.total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 843, 'candidates_tokens': 120, 'total_tokens': 963}
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:55:38,290 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [d524fd8e] completado exitosamente en 10.89s
2026-01-19 16:56:00,058 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [8c190bce]: "What is the count of contracts by product category?
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Paso 1: Obteniendo schema de BigQuery
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Schema obtenido (0.00s)
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Paso 2: Construyendo prompt
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Prompt construido (0.000s, 2936 chars)
2026-01-19 16:56:00,059 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Prompt incluye 3 tablas de dimensiones
2026-01-19 16:56:00,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Preview del prompt (√∫ltimos 500 chars):
 pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: "What is the count of contracts by product category?

SQL:
2026-01-19 16:56:00,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Paso 3: Generando SQL con Gemini
2026-01-19 16:56:00,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 16:56:00,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 16:56:04,154 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.09s
2026-01-19 16:56:04,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 845, 'candidates_tokens': 129, 'total_tokens': 974}
2026-01-19 16:56:04,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.10s
2026-01-19 16:56:04,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.category, COUNT(DISTINCT `bunge-de-poc-insumos.Gold.contracts_gold_2`.customer_id...
2026-01-19 16:56:04,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8c190bce] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 16:56:04,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 16:56:04,864 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:56:04,865 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.710s
2026-01-19 16:56:04,865 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 16:56:04,865 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.category, COUNT(DISTINCT `bunge-de-poc-insumos.Gold.contracts_gold_2`.customer_id...
2026-01-19 16:56:04,865 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 16:56:07,172 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 16:56:07,175 - nl2sql_chatbot - ERROR - ‚ùå Error ejecutando query despu√©s de 3.02s: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 4aa21ec2-2743-4d0d-ba15-30be03e27030
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 4aa21ec2-2743-4d0d-ba15-30be03e27030

2026-01-19 16:56:07,178 - nl2sql_chatbot - ERROR - ‚ùå [8c190bce] Error procesando pregunta: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 4aa21ec2-2743-4d0d-ba15-30be03e27030
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 4aa21ec2-2743-4d0d-ba15-30be03e27030


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/main.py", line 184, in ask_question
    bq_result = execute_query(sql)
                ^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 335, in execute_query
    raise Exception(f"Error ejecutando query en BigQuery: {str(e)}")
Exception: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 4aa21ec2-2743-4d0d-ba15-30be03e27030

2026-01-19 16:56:07,180 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:56:07,180 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 8c190bce
2026-01-19 16:56:07,180 - nl2sql_chatbot - INFO - ‚ùì Question: "What is the count of contracts by product category?
2026-01-19 16:56:07,180 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 7.12s
2026-01-19 16:56:07,181 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 16:56:07,181 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 16:56:07,181 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 16:56:07,181 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.10s
2026-01-19 16:56:07,181 - nl2sql_chatbot - ERROR - ‚ùå Error: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 4aa21ec2-2743-4d0d-ba15-30be03e27030

2026-01-19 16:56:07,181 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [4567c6a9]: "What is the count of contracts by product category?
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Paso 1: Obteniendo schema de BigQuery
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Schema obtenido (0.00s)
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 16:56:24,318 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Paso 2: Construyendo prompt
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Prompt construido (0.000s, 2936 chars)
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Prompt incluye 3 tablas de dimensiones
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Preview del prompt (√∫ltimos 500 chars):
 pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: "What is the count of contracts by product category?

SQL:
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Paso 3: Generando SQL con Gemini
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 16:56:24,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 16:56:28,492 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.17s
2026-01-19 16:56:28,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 845, 'candidates_tokens': 129, 'total_tokens': 974}
2026-01-19 16:56:28,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.17s
2026-01-19 16:56:28,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.category, COUNT(DISTINCT `bunge-de-poc-insumos.Gold.contracts_gold_2`.customer_id...
2026-01-19 16:56:28,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4567c6a9] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 16:56:28,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 16:56:28,505 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:56:28,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.013s
2026-01-19 16:56:28,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 16:56:28,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.category, COUNT(DISTINCT `bunge-de-poc-insumos.Gold.contracts_gold_2`.customer_id...
2026-01-19 16:56:28,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 16:56:29,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 16:56:29,802 - nl2sql_chatbot - ERROR - ‚ùå Error ejecutando query despu√©s de 1.31s: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 39853e72-3772-4031-962c-b60fd51ae838
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 39853e72-3772-4031-962c-b60fd51ae838

2026-01-19 16:56:29,804 - nl2sql_chatbot - ERROR - ‚ùå [4567c6a9] Error procesando pregunta: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 39853e72-3772-4031-962c-b60fd51ae838
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 39853e72-3772-4031-962c-b60fd51ae838


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/main.py", line 184, in ask_question
    bq_result = execute_query(sql)
                ^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 335, in execute_query
    raise Exception(f"Error ejecutando query en BigQuery: {str(e)}")
Exception: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 39853e72-3772-4031-962c-b60fd51ae838

2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 4567c6a9
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO - ‚ùì Question: "What is the count of contracts by product category?
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.49s
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.17s
2026-01-19 16:56:29,805 - nl2sql_chatbot - ERROR - ‚ùå Error: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 39853e72-3772-4031-962c-b60fd51ae838

2026-01-19 16:56:29,805 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:56:35,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [bf1cce55]: What is the count of contracts by product category?
2026-01-19 16:56:35,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Paso 1: Obteniendo schema de BigQuery
2026-01-19 16:56:35,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 16:56:35,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 16:56:35,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Schema obtenido (0.00s)
2026-01-19 16:56:35,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Paso 2: Construyendo prompt
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Prompt construido (0.000s, 2935 chars)
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Prompt incluye 3 tablas de dimensiones
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Preview del prompt (√∫ltimos 500 chars):
a pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the count of contracts by product category?

SQL:
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Paso 3: Generando SQL con Gemini
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 16:56:35,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 16:56:40,262 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.85s
2026-01-19 16:56:40,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 844, 'candidates_tokens': 131, 'total_tokens': 975}
2026-01-19 16:56:40,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.85s
2026-01-19 16:56:40,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.category, COUNT(DISTINCT `bunge-de-poc-insumos.Gold.contracts_gold_2`.customer_id...
2026-01-19 16:56:40,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bf1cce55] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 16:56:40,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 16:56:40,280 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:56:40,281 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.014s
2026-01-19 16:56:40,281 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 16:56:40,281 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.category, COUNT(DISTINCT `bunge-de-poc-insumos.Gold.contracts_gold_2`.customer_id...
2026-01-19 16:56:40,282 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 16:56:41,958 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 16:56:41,958 - nl2sql_chatbot - ERROR - ‚ùå Error ejecutando query despu√©s de 1.69s: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 0ec237c6-a79e-4c36-8928-24788b9cf57b
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 0ec237c6-a79e-4c36-8928-24788b9cf57b

2026-01-19 16:56:41,960 - nl2sql_chatbot - ERROR - ‚ùå [bf1cce55] Error procesando pregunta: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 0ec237c6-a79e-4c36-8928-24788b9cf57b
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 0ec237c6-a79e-4c36-8928-24788b9cf57b


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/main.py", line 184, in ask_question
    bq_result = execute_query(sql)
                ^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 335, in execute_query
    raise Exception(f"Error ejecutando query en BigQuery: {str(e)}")
Exception: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 0ec237c6-a79e-4c36-8928-24788b9cf57b

2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: bf1cce55
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO - ‚ùì Question: What is the count of contracts by product category?
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 6.55s
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.85s
2026-01-19 16:56:41,961 - nl2sql_chatbot - ERROR - ‚ùå Error: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:45]

Location: southamerica-east1
Job ID: 0ec237c6-a79e-4c36-8928-24788b9cf57b

2026-01-19 16:56:41,961 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [8f953bc5]: What is the total quantity by product name?
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Paso 1: Obteniendo schema de BigQuery
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Schema obtenido (0.00s)
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 16:56:56,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Paso 2: Construyendo prompt
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Prompt construido (0.000s, 2927 chars)
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Prompt incluye 3 tablas de dimensiones
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Preview del prompt (√∫ltimos 500 chars):
 ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the total quantity by product name?

SQL:
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Paso 3: Generando SQL con Gemini
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 16:56:56,418 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 16:57:00,530 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.11s
2026-01-19 16:57:00,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 843, 'candidates_tokens': 120, 'total_tokens': 963}
2026-01-19 16:57:00,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.11s
2026-01-19 16:57:00,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(contracts_gold_2.total_quantity) AS total_quantity FROM `bunge-...
2026-01-19 16:57:00,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 16:57:00,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 16:57:00,547 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 16:57:00,547 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.013s
2026-01-19 16:57:00,548 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 16:57:00,548 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(contracts_gold_2.total_quantity) AS total_quantity FROM `bunge-...
2026-01-19 16:57:00,548 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 16:57:02,622 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 16:57:03,013 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.466s
2026-01-19 16:57:03,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 75,152 (0.07 MB)
2026-01-19 16:57:03,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.48s
2026-01-19 16:57:03,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-19 16:57:03,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] BigQuery completado (2.48s)
2026-01-19 16:57:03,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 16:57:03,018 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 16:57:07,015 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 16:57:07,015 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8f953bc5] Recomendaci√≥n de gr√°fico: bar
2026-01-19 16:57:07,015 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 8f953bc5
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - ‚ùì Question: What is the total quantity by product name?
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.60s
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.11s
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.48s
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO -   - Chart Recommendation: 4.00s
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(contracts_gold_2.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON contracts_gold_2.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 843, 'candidates_tokens': 120, 'total_tokens': 963}
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 16:57:07,016 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 16:57:07,017 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 16:57:07,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [8f953bc5] completado exitosamente en 10.60s
2026-01-19 17:22:58,927 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:22:58,929 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:22:59,802 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:23:00,541 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:23:02,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 17:23:02,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 17:23:02,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 17:23:02,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 17:23:02,716 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:23:02,719 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:23:03,724 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 17:23:03,740 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:23:04,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 17:23:04,660 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:23:05,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 17:23:05,440 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.73s (3 tablas)
2026-01-19 17:23:05,440 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 17:23:05,440 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 17:24:46,397 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:46,399 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:47,362 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:48,119 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:50,037 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 17:24:50,037 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 17:24:50,037 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 17:24:50,037 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 17:24:50,046 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:50,050 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:50,644 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 17:24:50,661 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:51,424 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 17:24:51,440 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:24:52,135 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 17:24:52,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.10s (3 tablas)
2026-01-19 17:24:52,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 17:24:52,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 17:27:39,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [a2582713]: Show me the average price per product name
2026-01-19 17:27:39,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Paso 1: Obteniendo schema de BigQuery
2026-01-19 17:27:39,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 17:27:39,657 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:27:40,505 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.86s
2026-01-19 17:27:40,505 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Schema obtenido (0.86s)
2026-01-19 17:27:40,505 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Paso 2: Construyendo prompt
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Prompt construido (0.000s, 2926 chars)
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Prompt incluye 3 tablas de dimensiones
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Paso 3: Generando SQL con Gemini
2026-01-19 17:27:40,506 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 17:27:40,507 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 17:27:44,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.41s
2026-01-19 17:27:44,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 842, 'candidates_tokens': 132, 'total_tokens': 974}
2026-01-19 17:27:44,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.41s
2026-01-19 17:27:44,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:27:44,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a2582713] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 17:27:44,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 17:27:44,939 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:27:44,939 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-19 17:27:44,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 17:27:44,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:27:44,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 17:27:46,259 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 17:27:46,260 - nl2sql_chatbot - ERROR - ‚ùå Error ejecutando query despu√©s de 1.34s: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]

Location: southamerica-east1
Job ID: 500b6ece-5c05-4039-8601-d142dd2af71e
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]

Location: southamerica-east1
Job ID: 500b6ece-5c05-4039-8601-d142dd2af71e

2026-01-19 17:27:46,267 - nl2sql_chatbot - ERROR - ‚ùå [a2582713] Error procesando pregunta: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]

Location: southamerica-east1
Job ID: 500b6ece-5c05-4039-8601-d142dd2af71e
Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 291, in execute_query
    results = query_job.result(max_results=max_rows)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1681, in result
    while not is_job_done():
              ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/env/lib/python3.11/site-packages/google/cloud/bigquery/job/query.py", line 1630, in is_job_done
    raise job_failed_exception
google.api_core.exceptions.BadRequest: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]

Location: southamerica-east1
Job ID: 500b6ece-5c05-4039-8601-d142dd2af71e


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/main.py", line 184, in ask_question
    bq_result = execute_query(sql)
                ^^^^^^^^^^^^^^^^^^
  File "/Users/walterbivanco/desarrollo/taligent/bunge/poc/backend/app/db.py", line 335, in execute_query
    raise Exception(f"Error ejecutando query en BigQuery: {str(e)}")
Exception: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]

Location: southamerica-east1
Job ID: 500b6ece-5c05-4039-8601-d142dd2af71e

2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: a2582713
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 6.63s
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO -   - Get Schema: 0.86s
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.41s
2026-01-19 17:27:46,269 - nl2sql_chatbot - ERROR - ‚ùå Error: Error ejecutando query en BigQuery: 400 Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]; reason: invalidQuery, location: query, message: Unrecognized name: `bunge-de-poc-insumos.Gold.contracts_gold_2` at [1:38]

Location: southamerica-east1
Job ID: 500b6ece-5c05-4039-8601-d142dd2af71e

2026-01-19 17:27:46,269 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:28:24,064 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 17:28:24,064 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 17:28:24,064 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 17:28:24,064 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 17:28:24,075 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:24,079 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:24,832 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 17:28:24,847 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:25,450 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 17:28:25,466 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:26,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 17:28:26,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.21s (3 tablas)
2026-01-19 17:28:26,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 17:28:26,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 17:28:31,091 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 17:28:31,092 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 17:28:31,092 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 17:28:31,092 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 17:28:31,101 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:31,104 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:31,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 17:28:31,772 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:32,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 17:28:32,576 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:33,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 17:28:33,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.13s (3 tablas)
2026-01-19 17:28:33,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 17:28:33,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 17:28:45,118 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 17:28:45,118 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 17:28:45,118 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 17:28:45,118 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 17:28:45,129 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:45,132 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:45,839 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 17:28:45,857 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:46,535 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 17:28:46,551 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:47,282 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 17:28:47,282 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.16s (3 tablas)
2026-01-19 17:28:47,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 17:28:47,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 17:28:57,103 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-19 17:28:57,103 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-19 17:28:57,103 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-19 17:28:57,103 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-19 17:28:57,112 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:57,115 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:57,818 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-19 17:28:57,829 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:58,465 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-19 17:28:58,483 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:28:59,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-19 17:28:59,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.03s (3 tablas)
2026-01-19 17:28:59,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-19 17:28:59,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-19 17:29:59,352 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [0e425345]: Show me the average price per product name
2026-01-19 17:29:59,352 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Paso 1: Obteniendo schema de BigQuery
2026-01-19 17:29:59,352 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 17:29:59,366 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:30:00,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.73s
2026-01-19 17:30:00,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Schema obtenido (0.73s)
2026-01-19 17:30:00,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Paso 2: Construyendo prompt
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Prompt construido (0.000s, 3226 chars)
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Prompt incluye 3 tablas de dimensiones
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Paso 3: Generando SQL con Gemini
2026-01-19 17:30:00,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 17:30:00,082 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 17:30:05,127 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.04s
2026-01-19 17:30:05,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-19 17:30:05,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.05s
2026-01-19 17:30:05,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:30:05,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 17:30:05,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 17:30:05,147 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:30:05,148 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-19 17:30:05,148 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 17:30:05,148 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:30:05,148 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 17:30:06,608 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 17:30:06,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.728s
2026-01-19 17:30:06,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 75,152 (0.07 MB)
2026-01-19 17:30:06,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.75s
2026-01-19 17:30:06,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-19 17:30:06,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] BigQuery completado (1.75s)
2026-01-19 17:30:06,878 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 17:30:06,878 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 17:30:10,359 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 17:30:10,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0e425345] Recomendaci√≥n de gr√°fico: bar
2026-01-19 17:30:10,360 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:30:10,360 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 0e425345
2026-01-19 17:30:10,360 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-19 17:30:10,360 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.01s
2026-01-19 17:30:10,360 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO -   - Get Schema: 0.73s
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.05s
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.75s
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.48s
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 17:30:10,361 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 17:30:10,362 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:30:10,362 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [0e425345] completado exitosamente en 11.01s
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [6bff5fd0]: Show me the average price per product name
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Paso 1: Obteniendo schema de BigQuery
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Schema obtenido (0.00s)
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Paso 2: Construyendo prompt
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Prompt construido (0.000s, 3226 chars)
2026-01-19 17:33:21,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Prompt incluye 3 tablas de dimensiones
2026-01-19 17:33:21,192 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-19 17:33:21,192 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Paso 3: Generando SQL con Gemini
2026-01-19 17:33:21,192 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 17:33:21,192 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 17:33:25,523 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.33s
2026-01-19 17:33:25,525 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-19 17:33:25,525 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.33s
2026-01-19 17:33:25,525 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:33:25,525 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 17:33:25,525 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 17:33:25,544 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:33:25,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-19 17:33:25,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 17:33:25,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:33:25,545 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 17:33:27,541 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 17:33:27,909 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.364s
2026-01-19 17:33:27,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.38s
2026-01-19 17:33:27,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-19 17:33:27,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] BigQuery completado (2.39s)
2026-01-19 17:33:27,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 17:33:27,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 17:33:31,679 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 17:33:31,679 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [6bff5fd0] Recomendaci√≥n de gr√°fico: bar
2026-01-19 17:33:31,680 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:33:31,680 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 6bff5fd0
2026-01-19 17:33:31,680 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-19 17:33:31,680 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.49s
2026-01-19 17:33:31,680 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 17:33:31,680 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.33s
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.39s
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.77s
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:33:31,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [6bff5fd0] completado exitosamente en 10.49s
2026-01-19 17:35:09,869 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [4b76b724]: Show me the average price per product name
2026-01-19 17:35:09,869 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Paso 1: Obteniendo schema de BigQuery
2026-01-19 17:35:09,869 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Schema obtenido (0.00s)
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Tablas: DimProducts, DimProvince, DimTime
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Paso 2: Construyendo prompt
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Prompt construido (0.000s, 3226 chars)
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Prompt incluye 3 tablas de dimensiones
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Paso 3: Generando SQL con Gemini
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-19 17:35:09,870 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-19 17:35:14,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.42s
2026-01-19 17:35:14,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-19 17:35:14,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.42s
2026-01-19 17:35:14,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:35:14,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Paso 4: Ejecutando SQL en BigQuery
2026-01-19 17:35:14,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-19 17:35:14,308 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-19 17:35:14,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-19 17:35:14,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-19 17:35:14,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-19 17:35:14,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-19 17:35:15,815 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-19 17:35:16,068 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.759s
2026-01-19 17:35:16,069 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.78s
2026-01-19 17:35:16,069 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-19 17:35:16,069 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] BigQuery completado (1.78s)
2026-01-19 17:35:16,069 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-19 17:35:16,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-19 17:35:19,872 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-19 17:35:19,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [4b76b724] Recomendaci√≥n de gr√°fico: bar
2026-01-19 17:35:19,873 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:35:19,873 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 4b76b724
2026-01-19 17:35:19,873 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.00s
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.42s
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.78s
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.80s
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-19 17:35:19,874 - nl2sql_chatbot - INFO - ================================================================================
2026-01-19 17:35:19,875 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [4b76b724] completado exitosamente en 10.00s
2026-01-20 08:58:11,070 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:11,074 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:11,913 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:12,689 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:14,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 08:58:14,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 08:58:14,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 08:58:14,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 08:58:14,843 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:14,848 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:15,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 08:58:15,639 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:16,353 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 08:58:16,368 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:17,783 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 08:58:17,784 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.95s (3 tablas)
2026-01-20 08:58:17,784 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 08:58:17,785 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 08:58:57,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [41f79761]: Show me the average price per product name
2026-01-20 08:58:57,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Paso 1: Obteniendo schema de BigQuery
2026-01-20 08:58:57,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 08:58:57,174 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:58:58,128 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.97s
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Schema obtenido (0.97s)
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Paso 2: Construyendo prompt
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Prompt construido (0.000s, 3226 chars)
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Prompt incluye 3 tablas de dimensiones
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Paso 3: Generando SQL con Gemini
2026-01-20 08:58:58,129 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 08:58:58,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 08:59:02,254 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-20 08:59:04,256 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-20 08:59:08,627 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.37s
2026-01-20 08:59:08,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-20 08:59:08,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 10.50s
2026-01-20 08:59:08,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 08:59:08,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 08:59:08,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 08:59:08,647 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 08:59:08,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-20 08:59:08,650 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 08:59:08,650 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 08:59:08,650 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 08:59:10,025 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 08:59:10,429 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.779s
2026-01-20 08:59:10,430 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.80s
2026-01-20 08:59:10,431 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 08:59:10,431 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] BigQuery completado (1.80s)
2026-01-20 08:59:10,431 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 08:59:10,431 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 08:59:14,237 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 08:59:14,238 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [41f79761] Recomendaci√≥n de gr√°fico: bar
2026-01-20 08:59:14,238 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 08:59:14,238 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 41f79761
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 17.08s
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO -   - Get Schema: 0.97s
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 10.50s
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.80s
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.81s
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 08:59:14,239 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-20 08:59:14,240 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 08:59:14,240 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 08:59:14,240 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 08:59:14,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [41f79761] completado exitosamente en 17.08s
2026-01-20 09:01:12,866 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [012c2b3b]: Show me the average price per product name
2026-01-20 09:01:12,866 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Paso 1: Obteniendo schema de BigQuery
2026-01-20 09:01:12,866 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 09:01:12,866 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 09:01:12,866 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Schema obtenido (0.00s)
2026-01-20 09:01:12,866 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Paso 2: Construyendo prompt
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Prompt construido (0.000s, 3226 chars)
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Prompt incluye 3 tablas de dimensiones
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Paso 3: Generando SQL con Gemini
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 09:01:12,867 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 09:01:17,367 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.50s
2026-01-20 09:01:17,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 09:01:17,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.50s
2026-01-20 09:01:17,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:01:17,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 09:01:17,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 09:01:17,387 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:01:17,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.020s
2026-01-20 09:01:17,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 09:01:17,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:01:17,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 09:01:19,018 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 09:01:19,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.217s
2026-01-20 09:01:19,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.24s
2026-01-20 09:01:19,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 09:01:19,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] BigQuery completado (2.24s)
2026-01-20 09:01:19,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 09:01:19,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 09:01:23,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 09:01:23,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [012c2b3b] Recomendaci√≥n de gr√°fico: bar
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 012c2b3b
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.46s
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.50s
2026-01-20 09:01:23,329 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.24s
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.72s
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:01:23,330 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [012c2b3b] completado exitosamente en 10.46s
2026-01-20 09:05:15,135 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [8e3dd2e1]: Show me the average price per product name
2026-01-20 09:05:15,135 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Paso 1: Obteniendo schema de BigQuery
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Schema obtenido (0.00s)
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Paso 2: Construyendo prompt
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Prompt construido (0.000s, 3226 chars)
2026-01-20 09:05:15,136 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Prompt incluye 3 tablas de dimensiones
2026-01-20 09:05:15,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 09:05:15,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Paso 3: Generando SQL con Gemini
2026-01-20 09:05:15,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 09:05:15,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 09:05:20,271 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.13s
2026-01-20 09:05:20,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 09:05:20,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.14s
2026-01-20 09:05:20,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:05:20,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 09:05:20,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 09:05:21,201 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:05:21,202 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.929s
2026-01-20 09:05:21,202 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 09:05:21,203 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:05:21,203 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 09:05:22,909 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 09:05:23,307 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.104s
2026-01-20 09:05:23,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.03s
2026-01-20 09:05:23,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 09:05:23,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] BigQuery completado (3.04s)
2026-01-20 09:05:23,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 09:05:23,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 09:05:27,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8e3dd2e1] Recomendaci√≥n de gr√°fico: bar
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 8e3dd2e1
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 12.24s
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.14s
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.04s
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO -   - Chart Recommendation: 4.07s
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 09:05:27,377 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 09:05:27,378 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 09:05:27,378 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:05:27,378 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [8e3dd2e1] completado exitosamente en 12.24s
2026-01-20 09:12:49,591 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:49,593 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:50,501 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:51,208 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:53,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 09:12:53,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 09:12:53,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 09:12:53,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 09:12:53,228 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:53,232 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:53,818 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 09:12:53,833 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:54,586 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 09:12:54,604 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:12:55,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 09:12:55,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.29s (3 tablas)
2026-01-20 09:12:55,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 09:12:55,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 09:13:25,787 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [710b7288]: What is the total quantity by product name?
2026-01-20 09:13:25,787 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Paso 1: Obteniendo schema de BigQuery
2026-01-20 09:13:25,787 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 09:13:25,802 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:13:26,502 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.71s
2026-01-20 09:13:26,502 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Schema obtenido (0.72s)
2026-01-20 09:13:26,502 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Paso 2: Construyendo prompt
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Prompt construido (0.000s, 3227 chars)
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Prompt incluye 3 tablas de dimensiones
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Preview del prompt (√∫ltimos 500 chars):
 ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the total quantity by product name?

SQL:
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Paso 3: Generando SQL con Gemini
2026-01-20 09:13:26,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 09:13:26,504 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 09:13:31,264 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.76s
2026-01-20 09:13:31,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 939, 'candidates_tokens': 139, 'total_tokens': 1078}
2026-01-20 09:13:31,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.76s
2026-01-20 09:13:31,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 09:13:31,268 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 09:13:31,268 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 09:13:31,284 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:13:31,285 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-20 09:13:31,286 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 09:13:31,286 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 09:13:31,286 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 09:13:33,408 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 09:13:33,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.490s
2026-01-20 09:13:33,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 75,152 (0.07 MB)
2026-01-20 09:13:33,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.51s
2026-01-20 09:13:33,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 09:13:33,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] BigQuery completado (2.51s)
2026-01-20 09:13:33,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 09:13:33,778 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 09:13:37,297 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 09:13:37,297 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [710b7288] Recomendaci√≥n de gr√°fico: bar
2026-01-20 09:13:37,299 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 710b7288
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO - ‚ùì Question: What is the total quantity by product name?
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.51s
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO -   - Get Schema: 0.72s
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.76s
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.51s
2026-01-20 09:13:37,300 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.52s
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 939, 'candidates_tokens': 139, 'total_tokens': 1078}
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:13:37,301 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [710b7288] completado exitosamente en 11.51s
2026-01-20 09:14:42,675 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [bb7a5db0]: What is the total quantity by product name?
2026-01-20 09:14:42,676 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Paso 1: Obteniendo schema de BigQuery
2026-01-20 09:14:42,676 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Schema obtenido (0.00s)
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Paso 2: Construyendo prompt
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Prompt construido (0.000s, 3227 chars)
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Prompt incluye 3 tablas de dimensiones
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Preview del prompt (√∫ltimos 500 chars):
 ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the total quantity by product name?

SQL:
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Paso 3: Generando SQL con Gemini
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 09:14:42,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 09:14:46,871 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.19s
2026-01-20 09:14:46,872 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 939, 'candidates_tokens': 139, 'total_tokens': 1078}
2026-01-20 09:14:46,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.20s
2026-01-20 09:14:46,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 09:14:46,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 09:14:46,873 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 09:14:46,894 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:14:46,895 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.022s
2026-01-20 09:14:46,895 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 09:14:46,895 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 09:14:46,895 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 09:14:48,218 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 09:14:48,660 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.765s
2026-01-20 09:14:48,661 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.79s
2026-01-20 09:14:48,661 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 09:14:48,661 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] BigQuery completado (1.79s)
2026-01-20 09:14:48,661 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 09:14:48,661 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 09:14:52,430 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 09:14:52,431 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [bb7a5db0] Recomendaci√≥n de gr√°fico: bar
2026-01-20 09:14:52,431 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:14:52,432 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: bb7a5db0
2026-01-20 09:14:52,432 - nl2sql_chatbot - INFO - ‚ùì Question: What is the total quantity by product name?
2026-01-20 09:14:52,433 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.76s
2026-01-20 09:14:52,433 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 09:14:52,433 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 09:14:52,433 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 09:14:52,433 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.20s
2026-01-20 09:14:52,433 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.79s
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.77s
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 939, 'candidates_tokens': 139, 'total_tokens': 1078}
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:14:52,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [bb7a5db0] completado exitosamente en 9.76s
2026-01-20 09:24:05,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [a608e344]: Show me the average price per product name
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Paso 1: Obteniendo schema de BigQuery
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Schema obtenido (0.00s)
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Paso 2: Construyendo prompt
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Prompt construido (0.000s, 3226 chars)
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Prompt incluye 3 tablas de dimensiones
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Paso 3: Generando SQL con Gemini
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 09:24:05,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 09:24:10,124 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.30s
2026-01-20 09:24:10,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-20 09:24:10,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.30s
2026-01-20 09:24:10,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:24:10,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 09:24:10,126 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 09:24:10,142 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:24:10,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.017s
2026-01-20 09:24:10,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 09:24:10,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:24:10,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 09:24:11,553 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 09:24:11,930 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.787s
2026-01-20 09:24:11,931 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.81s
2026-01-20 09:24:11,931 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 09:24:11,931 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] BigQuery completado (1.81s)
2026-01-20 09:24:11,931 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 09:24:11,932 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 09:24:15,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 09:24:15,650 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a608e344] Recomendaci√≥n de gr√°fico: bar
2026-01-20 09:24:15,650 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:24:15,650 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: a608e344
2026-01-20 09:24:15,650 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 09:24:15,650 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.83s
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.30s
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.81s
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.72s
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:24:15,651 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [a608e344] completado exitosamente en 9.83s
2026-01-20 09:24:40,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [55fba1a7]: Show me the average price per product name
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Paso 1: Obteniendo schema de BigQuery
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Schema obtenido (0.00s)
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Paso 2: Construyendo prompt
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Prompt construido (0.000s, 3226 chars)
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Prompt incluye 3 tablas de dimensiones
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Paso 3: Generando SQL con Gemini
2026-01-20 09:24:40,174 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 09:24:40,175 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 09:24:43,515 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-20 09:24:45,520 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-20 09:24:49,579 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.06s
2026-01-20 09:24:49,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 09:24:49,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 9.41s
2026-01-20 09:24:49,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:24:49,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 09:24:49,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 09:24:49,597 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:24:49,599 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-20 09:24:49,599 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 09:24:49,599 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 09:24:49,599 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 09:24:50,726 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 09:24:51,086 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.487s
2026-01-20 09:24:51,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.51s
2026-01-20 09:24:51,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 09:24:51,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] BigQuery completado (1.51s)
2026-01-20 09:24:51,087 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 09:24:51,088 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 09:24:54,743 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 09:24:54,743 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fba1a7] Recomendaci√≥n de gr√°fico: bar
2026-01-20 09:24:54,743 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 55fba1a7
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 14.57s
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 9.41s
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.51s
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.66s
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 09:24:54,744 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 09:24:54,745 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 09:24:54,745 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 09:24:54,745 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 09:24:54,745 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 09:24:54,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [55fba1a7] completado exitosamente en 14.57s
2026-01-20 09:55:22,827 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:22,829 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:23,766 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:24,564 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:26,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 09:55:26,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 09:55:26,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 09:55:26,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 09:55:26,545 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:26,549 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:27,350 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 09:55:27,365 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:28,002 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 09:55:28,019 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 09:55:28,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 09:55:28,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.31s (3 tablas)
2026-01-20 09:55:28,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 09:55:28,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:01:25,102 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:25,104 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:25,998 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:26,753 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:28,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:01:28,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:01:28,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:01:28,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:01:28,783 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:28,786 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:29,587 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:01:29,603 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:30,331 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:01:30,347 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:31,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:01:31,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.46s (3 tablas)
2026-01-20 10:01:31,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:01:31,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:01:55,021 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [7c73247b]: Show me the total quantity delivered by province name
2026-01-20 10:01:55,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:01:55,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:01:55,036 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:01:55,945 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.92s
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Schema obtenido (0.92s)
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Paso 2: Construyendo prompt
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Prompt construido (0.000s, 3237 chars)
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Preview del prompt (√∫ltimos 500 chars):
pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the total quantity delivered by province name

SQL:
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Paso 3: Generando SQL con Gemini
2026-01-20 10:01:55,946 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:01:55,947 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:02:00,608 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.66s
2026-01-20 10:02:00,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 939, 'candidates_tokens': 156, 'total_tokens': 1095}
2026-01-20 10:02:00,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.66s
2026-01-20 10:02:00,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity_de...
2026-01-20 10:02:00,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:02:00,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:02:00,630 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:02:00,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-20 10:02:00,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:02:00,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity_de...
2026-01-20 10:02:00,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:02:01,994 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:02:02,412 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.780s
2026-01-20 10:02:02,414 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 68,335 (0.07 MB)
2026-01-20 10:02:02,414 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.80s
2026-01-20 10:02:02,414 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-20 10:02:02,414 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] BigQuery completado (1.80s)
2026-01-20 10:02:02,414 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:02:02,414 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:02:05,917 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Error al analizar datos para gr√°fico: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-20 10:02:05,917 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c73247b] Recomendaci√≥n de gr√°fico: None
2026-01-20 10:02:05,917 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:02:05,918 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 7c73247b
2026-01-20 10:02:05,918 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the total quantity delivered by province name
2026-01-20 10:02:05,918 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.90s
2026-01-20 10:02:05,918 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:02:05,920 - nl2sql_chatbot - INFO -   - Get Schema: 0.92s
2026-01-20 10:02:05,920 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:02:05,920 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.66s
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.80s
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.50s
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity_delivered) AS total_quantity_delivered FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.province_id = DimProvince.province_id GROUP BY DimProvince.province_name ORDER BY total_quantity_delivered DESC LIMIT 100
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 939, 'candidates_tokens': 156, 'total_tokens': 1095}
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:02:05,921 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [7c73247b] completado exitosamente en 10.90s
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [7c51220d]: What is the total quantity by product name
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Schema obtenido (0.00s)
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:12:14,998 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Paso 2: Construyendo prompt
2026-01-20 10:12:14,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Prompt construido (0.000s, 3226 chars)
2026-01-20 10:12:14,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:12:14,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the total quantity by product name

SQL:
2026-01-20 10:12:14,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Paso 3: Generando SQL con Gemini
2026-01-20 10:12:14,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:12:14,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:12:19,237 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.24s
2026-01-20 10:12:19,238 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 148, 'total_tokens': 1086}
2026-01-20 10:12:19,238 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.24s
2026-01-20 10:12:19,238 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:12:19,238 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:12:19,238 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:12:19,255 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:12:19,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-20 10:12:19,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:12:19,257 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:12:19,257 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:12:20,661 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:12:21,021 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.764s
2026-01-20 10:12:21,021 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 75,152 (0.07 MB)
2026-01-20 10:12:21,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.78s
2026-01-20 10:12:21,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:12:21,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] BigQuery completado (1.78s)
2026-01-20 10:12:21,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:12:21,022 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:12:24,481 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:12:24,481 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c51220d] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:12:24,481 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:12:24,481 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 7c51220d
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO - ‚ùì Question: What is the total quantity by product name
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.48s
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.24s
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.78s
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.46s
2026-01-20 10:12:24,482 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name ORDER BY total_quantity DESC LIMIT 100
2026-01-20 10:12:24,483 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:12:24,483 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 148, 'total_tokens': 1086}
2026-01-20 10:12:24,483 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:12:24,483 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:12:24,483 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:12:24,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [7c51220d] completado exitosamente en 9.48s
2026-01-20 10:12:56,937 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [de0bf377]: What is the total quantity by product name
2026-01-20 10:12:56,937 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:12:56,937 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Schema obtenido (0.00s)
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Paso 2: Construyendo prompt
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Prompt construido (0.000s, 3226 chars)
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the total quantity by product name

SQL:
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Paso 3: Generando SQL con Gemini
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:12:56,938 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:13:01,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.12s
2026-01-20 10:13:01,056 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 148, 'total_tokens': 1086}
2026-01-20 10:13:01,056 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.12s
2026-01-20 10:13:01,056 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:13:01,056 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:13:01,056 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:13:01,074 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:13:01,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-20 10:13:01,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:13:01,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:13:01,075 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:13:02,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:13:02,698 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.623s
2026-01-20 10:13:02,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.64s
2026-01-20 10:13:02,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:13:02,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] BigQuery completado (1.64s)
2026-01-20 10:13:02,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:13:02,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:13:06,448 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:13:06,449 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [de0bf377] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:13:06,449 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:13:06,449 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: de0bf377
2026-01-20 10:13:06,449 - nl2sql_chatbot - INFO - ‚ùì Question: What is the total quantity by product name
2026-01-20 10:13:06,449 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.51s
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.12s
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.64s
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.75s
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name ORDER BY total_quantity DESC LIMIT 100
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 148, 'total_tokens': 1086}
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:13:06,450 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:13:06,451 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:13:06,451 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [de0bf377] completado exitosamente en 9.51s
2026-01-20 10:18:49,277 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:49,279 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:50,243 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:50,975 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:53,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:18:53,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:18:53,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:18:53,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:18:53,107 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:53,111 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:54,009 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:18:54,024 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:54,835 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:18:54,852 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:18:55,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:18:55,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.59s (3 tablas)
2026-01-20 10:18:55,689 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:18:55,689 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:19:01,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [ee0ef2e3]: What is the total quantity by product name
2026-01-20 10:19:01,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:19:01,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:19:01,436 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:19:02,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.65s
2026-01-20 10:19:02,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Schema obtenido (0.65s)
2026-01-20 10:19:02,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:19:02,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:19:02,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:19:02,070 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Paso 2: Construyendo prompt
2026-01-20 10:19:02,071 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Prompt construido (0.000s, 3226 chars)
2026-01-20 10:19:02,071 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:19:02,071 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: What is the total quantity by product name

SQL:
2026-01-20 10:19:02,071 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Paso 3: Generando SQL con Gemini
2026-01-20 10:19:02,071 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:19:02,071 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:19:08,737 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 6.67s
2026-01-20 10:19:08,740 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 148, 'total_tokens': 1086}
2026-01-20 10:19:08,740 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 6.67s
2026-01-20 10:19:08,740 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:19:08,741 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:19:08,741 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:19:08,758 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:19:08,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-20 10:19:08,760 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:19:08,760 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:19:08,760 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:19:10,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:19:10,684 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.924s
2026-01-20 10:19:10,684 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.94s
2026-01-20 10:19:10,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:19:10,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] BigQuery completado (1.94s)
2026-01-20 10:19:10,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:19:10,686 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:19:14,559 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:19:14,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee0ef2e3] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:19:14,560 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:19:14,560 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: ee0ef2e3
2026-01-20 10:19:14,560 - nl2sql_chatbot - INFO - ‚ùì Question: What is the total quantity by product name
2026-01-20 10:19:14,560 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 13.14s
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO -   - Get Schema: 0.65s
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 6.67s
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.94s
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.87s
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name ORDER BY total_quantity DESC LIMIT 100
2026-01-20 10:19:14,561 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:19:14,562 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 148, 'total_tokens': 1086}
2026-01-20 10:19:14,562 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:19:14,562 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:19:14,562 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:19:14,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [ee0ef2e3] completado exitosamente en 13.14s
2026-01-20 10:20:39,271 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:20:39,271 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:20:39,271 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:20:39,271 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:20:39,280 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:39,284 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:40,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:20:40,094 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:40,909 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:20:40,924 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:41,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:20:41,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.37s (3 tablas)
2026-01-20 10:20:41,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:20:41,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:20:47,200 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:20:47,200 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:20:47,200 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:20:47,200 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:20:47,209 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:47,212 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:47,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:20:47,918 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:48,889 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:20:48,905 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:20:49,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:20:49,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.39s (3 tablas)
2026-01-20 10:20:49,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:20:49,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:21:11,743 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:21:11,743 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:21:11,743 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:21:11,743 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:21:11,752 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:11,755 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:12,504 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:21:12,517 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:13,262 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:21:13,278 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:14,020 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:21:14,020 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.28s (3 tablas)
2026-01-20 10:21:14,020 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:21:14,020 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:21:20,441 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:21:20,441 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:21:20,441 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:21:20,441 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:21:20,449 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:20,452 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:21,145 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:21:21,159 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:21,983 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:21:21,997 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:22,703 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:21:22,703 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.26s (3 tablas)
2026-01-20 10:21:22,703 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:21:22,703 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:21:52,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:21:52,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:21:52,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:21:52,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:21:52,134 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:52,139 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:52,828 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:21:52,840 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:53,597 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:21:53,612 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:54,337 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:21:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.21s (3 tablas)
2026-01-20 10:21:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:21:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:21:55,265 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:21:55,266 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:21:55,266 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:21:55,266 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:21:55,274 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:55,277 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:55,965 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:21:55,981 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:56,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:21:56,735 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:21:57,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:21:57,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.26s (3 tablas)
2026-01-20 10:21:57,527 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:21:57,528 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:22:03,929 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:22:03,929 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:22:03,929 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:22:03,929 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:22:03,939 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:03,942 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:04,765 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:22:04,782 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:05,510 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:22:05,526 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:06,350 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:22:06,350 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.42s (3 tablas)
2026-01-20 10:22:06,350 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:22:06,351 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:22:21,881 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:22:21,881 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:22:21,881 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:22:21,881 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:22:21,893 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:21,896 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:22,583 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:22:22,600 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:23,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:22:23,306 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:22:24,094 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:22:24,094 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.21s (3 tablas)
2026-01-20 10:22:24,094 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:22:24,094 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:24:08,818 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:08,821 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:09,584 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:10,271 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:12,330 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:24:12,330 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:24:12,330 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:24:12,330 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:24:12,340 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:12,344 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:13,120 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:24:13,135 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:13,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:24:13,897 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:14,668 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:24:14,669 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.34s (3 tablas)
2026-01-20 10:24:14,669 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:24:14,669 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:24:25,141 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:24:25,141 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:24:25,141 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:24:25,141 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:24:25,149 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:25,153 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:26,082 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:24:26,098 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:26,814 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:24:26,828 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:24:27,740 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:24:27,740 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.60s (3 tablas)
2026-01-20 10:24:27,740 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:24:27,741 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:29:48,203 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:29:48,203 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:29:48,203 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:29:48,203 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:29:48,214 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:29:48,217 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:29:48,997 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:29:49,012 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:29:49,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:29:49,722 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:29:50,478 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:29:50,479 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.28s (3 tablas)
2026-01-20 10:29:50,479 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:29:50,479 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:30:45,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:30:45,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:30:45,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:30:45,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:30:45,781 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:30:45,784 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:30:46,621 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:30:46,635 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:30:47,380 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:30:47,396 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:30:48,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:30:48,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.40s (3 tablas)
2026-01-20 10:30:48,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:30:48,169 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:32:04,262 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:04,264 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:04,951 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:05,712 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:07,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:32:07,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:32:07,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:32:07,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:32:07,615 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:07,618 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:08,367 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:32:08,383 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:09,547 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:32:09,563 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:32:10,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:32:10,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.55s (3 tablas)
2026-01-20 10:32:10,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:32:10,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:33:11,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [62ad9a38]: Show me the average price per product name
2026-01-20 10:33:11,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:33:11,483 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:33:11,488 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:33:12,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.65s
2026-01-20 10:33:12,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Schema obtenido (0.65s)
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Paso 2: Construyendo prompt
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Prompt construido (0.000s, 3226 chars)
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 10:33:12,131 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Paso 3: Generando SQL con Gemini
2026-01-20 10:33:12,132 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:33:12,132 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:33:16,633 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.50s
2026-01-20 10:33:16,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 10:33:16,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.50s
2026-01-20 10:33:16,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 10:33:16,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:33:16,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:33:16,656 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:33:16,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.019s
2026-01-20 10:33:16,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:33:16,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 10:33:16,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:33:17,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:33:18,175 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.518s
2026-01-20 10:33:18,175 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 75,152 (0.07 MB)
2026-01-20 10:33:18,176 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.54s
2026-01-20 10:33:18,176 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:33:18,176 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] BigQuery completado (1.54s)
2026-01-20 10:33:18,176 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:33:18,176 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:33:21,813 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:33:21,813 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [62ad9a38] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:33:21,813 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 62ad9a38
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.33s
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO -   - Get Schema: 0.65s
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.50s
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.54s
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.64s
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:33:21,814 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 139, 'total_tokens': 1077}
2026-01-20 10:33:21,815 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:33:21,815 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:33:21,815 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:21,815 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [62ad9a38] completado exitosamente en 10.33s
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [99eee846]: List contracts grouped by province name
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Schema obtenido (0.00s)
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Paso 2: Construyendo prompt
2026-01-20 10:33:21,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Prompt construido (0.000s, 3223 chars)
2026-01-20 10:33:21,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:33:21,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Preview del prompt (√∫ltimos 500 chars):
ES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name

SQL:
2026-01-20 10:33:21,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Paso 3: Generando SQL con Gemini
2026-01-20 10:33:21,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:33:21,822 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:33:27,803 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 5.98s
2026-01-20 10:33:27,804 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 936, 'candidates_tokens': 112, 'total_tokens': 1048}
2026-01-20 10:33:27,804 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 5.98s
2026-01-20 10:33:27,804 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-20 10:33:27,805 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:33:27,805 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:33:27,820 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:33:27,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.016s
2026-01-20 10:33:27,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:33:27,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-20 10:33:27,821 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:33:29,140 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:33:29,474 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.653s
2026-01-20 10:33:29,475 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 13,727 (0.01 MB)
2026-01-20 10:33:29,475 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.67s
2026-01-20 10:33:29,475 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-20 10:33:29,475 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] BigQuery completado (1.67s)
2026-01-20 10:33:29,475 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:33:29,475 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:33:32,914 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:33:32,915 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [99eee846] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 99eee846
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.09s
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:33:32,916 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 5.98s
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.67s
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.44s
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 936, 'candidates_tokens': 112, 'total_tokens': 1048}
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:32,917 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [99eee846] completado exitosamente en 11.09s
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [b78a5149]: Total quantity by product name
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Schema obtenido (0.00s)
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Paso 2: Construyendo prompt
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Prompt construido (0.000s, 3214 chars)
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Preview del prompt (√∫ltimos 500 chars):
 RELACIONES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Total quantity by product name

SQL:
2026-01-20 10:33:32,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Paso 3: Generando SQL con Gemini
2026-01-20 10:33:32,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:33:32,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:33:37,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.72s
2026-01-20 10:33:37,650 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 935, 'candidates_tokens': 139, 'total_tokens': 1074}
2026-01-20 10:33:37,651 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.72s
2026-01-20 10:33:37,651 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:33:37,651 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:33:37,651 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:33:37,671 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:33:37,672 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.021s
2026-01-20 10:33:37,672 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:33:37,672 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS...
2026-01-20 10:33:37,672 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:33:38,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.486s
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 75,152 (0.07 MB)
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.51s
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] BigQuery completado (1.51s)
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:33:39,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:33:42,727 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [b78a5149] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: b78a5149
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO - ‚ùì Question: Total quantity by product name
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.80s
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.72s
2026-01-20 10:33:42,728 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.51s
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.57s
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, SUM(`bunge-de-poc-insumos.Gold.contracts_gold_2`.total_quantity) AS total_quantity FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 935, 'candidates_tokens': 139, 'total_tokens': 1074}
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:42,729 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [b78a5149] completado exitosamente en 9.80s
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [7c193eeb]: Contracts by month and year
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Schema obtenido (0.00s)
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Paso 2: Construyendo prompt
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Prompt construido (0.000s, 3211 chars)
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Preview del prompt (√∫ltimos 500 chars):
i√≥n RELACIONES
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Contracts by month and year

SQL:
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Paso 3: Generando SQL con Gemini
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:33:42,734 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:33:46,916 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.18s
2026-01-20 10:33:46,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 935, 'candidates_tokens': 132, 'total_tokens': 1067}
2026-01-20 10:33:46,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.18s
2026-01-20 10:33:46,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimTime.year, DimTime.month_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold...
2026-01-20 10:33:46,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:33:46,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:33:46,939 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:33:46,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.021s
2026-01-20 10:33:46,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:33:46,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimTime.year, DimTime.month_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold...
2026-01-20 10:33:46,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:33:48,198 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:33:48,460 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.520s
2026-01-20 10:33:48,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 30,993 (0.03 MB)
2026-01-20 10:33:48,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.54s
2026-01-20 10:33:48,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:33:48,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] BigQuery completado (1.54s)
2026-01-20 10:33:48,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:33:48,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:33:52,158 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: line
2026-01-20 10:33:52,159 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [7c193eeb] Recomendaci√≥n de gr√°fico: line
2026-01-20 10:33:52,159 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:52,159 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 7c193eeb
2026-01-20 10:33:52,159 - nl2sql_chatbot - INFO - ‚ùì Question: Contracts by month and year
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.43s
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.18s
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.54s
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.70s
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimTime.year, DimTime.month_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimTime` AS DimTime ON contracts_gold_2.agreement_date = DimTime.date_id GROUP BY 1, 2 ORDER BY DimTime.year, DimTime.month_name LIMIT 100
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 935, 'candidates_tokens': 132, 'total_tokens': 1067}
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:33:52,160 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:33:52,161 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:33:52,161 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [7c193eeb] completado exitosamente en 9.43s
2026-01-20 10:33:54,177 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  M√©tricas solicitadas
2026-01-20 10:33:54,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üßπ Solicitud de limpieza de cach√©s
2026-01-20 10:33:54,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üßπ Todos los cach√©s limpiados: 4 schemas, 1 dimensiones, 0 'no encontradas'
2026-01-20 10:34:34,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [340f313a]: Show me the average price per product name
2026-01-20 10:34:34,607 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:34:34,607 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:34:34,623 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:34:35,311 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.70s
2026-01-20 10:34:35,311 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Schema obtenido (0.70s)
2026-01-20 10:34:35,312 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:34:35,329 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:34:35,341 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:34:36,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:34:36,027 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:34:36,747 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:34:36,763 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:34:37,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:34:37,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.18s (3 tablas)
2026-01-20 10:34:37,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] ‚úÖ 3 tablas de dimensiones disponibles (2.18s)
2026-01-20 10:34:37,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Paso 2: Construyendo prompt
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Prompt construido (0.000s, 3226 chars)
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Preview del prompt (√∫ltimos 500 chars):
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: Show me the average price per product name

SQL:
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Paso 3: Generando SQL con Gemini
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:34:37,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:34:41,332 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-20 10:34:43,335 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-20 10:34:47,115 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.78s
2026-01-20 10:34:47,116 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-20 10:34:47,117 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 9.62s
2026-01-20 10:34:47,117 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 10:34:47,117 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:34:47,117 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:34:47,137 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:34:47,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.020s
2026-01-20 10:34:47,138 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:34:47,138 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS ...
2026-01-20 10:34:47,138 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:34:48,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:34:48,455 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.318s
2026-01-20 10:34:48,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.34s
2026-01-20 10:34:48,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-20 10:34:48,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] BigQuery completado (1.34s)
2026-01-20 10:34:48,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:34:48,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:34:51,989 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:34:51,989 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [340f313a] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:34:51,989 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 340f313a
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the average price per product name
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 17.38s
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO -   - Get Schema: 0.70s
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 9.62s
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.34s
2026-01-20 10:34:51,990 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.53s
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProducts.product_name, AVG(`bunge-de-poc-insumos.Gold.contracts_gold_2`.average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id GROUP BY DimProducts.product_name LIMIT 100
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 938, 'candidates_tokens': 141, 'total_tokens': 1079}
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:34:51,991 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [340f313a] completado exitosamente en 17.38s
2026-01-20 10:35:13,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [9644033d]: List contracts grouped by province name"
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Paso 1: Obteniendo schema de BigQuery
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Schema obtenido (0.00s)
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Tablas: DimProducts, DimProvince, DimTime
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Paso 2: Construyendo prompt
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Prompt construido (0.000s, 3224 chars)
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Prompt incluye 3 tablas de dimensiones
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Preview del prompt (√∫ltimos 500 chars):
S
- ‚ö†Ô∏è Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones

PREGUNTA: List contracts grouped by province name"

SQL:
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Paso 3: Generando SQL con Gemini
2026-01-20 10:35:13,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-20 10:35:13,458 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-20 10:35:17,700 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.24s
2026-01-20 10:35:17,701 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 937, 'candidates_tokens': 112, 'total_tokens': 1049}
2026-01-20 10:35:17,701 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.24s
2026-01-20 10:35:17,702 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-20 10:35:17,702 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Paso 4: Ejecutando SQL en BigQuery
2026-01-20 10:35:17,702 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-20 10:35:17,720 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:35:17,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-20 10:35:17,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-20 10:35:17,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-20 10:35:17,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-20 10:35:19,082 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-20 10:35:19,436 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.715s
2026-01-20 10:35:19,436 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.73s
2026-01-20 10:35:19,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-20 10:35:19,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] BigQuery completado (1.73s)
2026-01-20 10:35:19,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-20 10:35:19,437 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-20 10:35:23,146 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-20 10:35:23,147 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [9644033d] Recomendaci√≥n de gr√°fico: bar
2026-01-20 10:35:23,147 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:35:23,147 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 9644033d
2026-01-20 10:35:23,147 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name"
2026-01-20 10:35:23,147 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.69s
2026-01-20 10:35:23,147 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.24s
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.73s
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.71s
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 937, 'candidates_tokens': 112, 'total_tokens': 1049}
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-20 10:35:23,148 - nl2sql_chatbot - INFO - ================================================================================
2026-01-20 10:35:23,149 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [9644033d] completado exitosamente en 9.69s
2026-01-20 10:37:41,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:37:41,166 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:37:41,166 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:37:41,166 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:37:41,177 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:41,181 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:42,089 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:37:42,105 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:42,940 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:37:42,954 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:43,678 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:37:43,678 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.51s (3 tablas)
2026-01-20 10:37:43,679 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:37:43,679 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:37:46,786 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:37:46,786 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:37:46,786 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:37:46,786 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:37:46,796 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:46,800 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:47,652 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:37:47,666 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:48,331 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:37:48,346 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:49,043 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:37:49,043 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.26s (3 tablas)
2026-01-20 10:37:49,043 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:37:49,044 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:37:59,862 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:37:59,862 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:37:59,862 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:37:59,862 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:37:59,872 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:37:59,877 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:01,466 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:38:01,477 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:02,223 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:38:02,240 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:02,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:38:02,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 3.06s (3 tablas)
2026-01-20 10:38:02,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:38:02,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:38:03,848 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:38:03,848 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:38:03,848 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:38:03,848 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:38:03,858 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:03,861 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:04,584 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:38:04,600 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:05,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:38:05,362 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:05,970 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:38:05,971 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.12s (3 tablas)
2026-01-20 10:38:05,971 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:38:05,971 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 10:38:17,202 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 10:38:17,202 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 10:38:17,202 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 10:38:17,202 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 10:38:17,211 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:17,214 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:18,069 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 10:38:18,086 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:18,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 10:38:18,941 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 10:38:19,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 10:38:19,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.39s (3 tablas)
2026-01-20 10:38:19,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 10:38:19,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:01:44,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:01:44,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:01:44,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:01:44,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:01:44,624 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:44,627 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:45,485 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:01:45,499 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:46,240 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:01:46,253 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:46,958 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:01:46,958 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.35s (3 tablas)
2026-01-20 11:01:46,958 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:01:46,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:01:53,532 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:01:53,532 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:01:53,532 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:01:53,532 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:01:53,541 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:53,544 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:54,154 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:01:54,165 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:54,879 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:01:54,891 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:55,666 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:01:55,666 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.13s (3 tablas)
2026-01-20 11:01:55,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:01:55,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:01:56,579 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:01:56,579 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:01:56,579 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:01:56,579 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:01:56,587 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:56,591 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:57,325 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:01:57,339 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:58,036 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:01:58,049 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:01:58,812 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:01:58,813 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.23s (3 tablas)
2026-01-20 11:01:58,813 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:01:58,813 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:02:02,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:02:02,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:02:02,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:02:02,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:02:02,089 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:02,092 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:02,770 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:02:02,784 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:03,423 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:02:03,439 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:04,161 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:02:04,162 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.08s (3 tablas)
2026-01-20 11:02:04,162 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:02:04,162 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:02:12,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:02:12,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:02:12,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:02:12,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:02:12,486 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:12,489 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:13,310 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:02:13,324 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:14,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:02:14,069 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:14,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:02:14,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.19s (3 tablas)
2026-01-20 11:02:14,668 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:02:14,668 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:02:18,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:02:18,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:02:18,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:02:18,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:02:18,715 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:18,719 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:19,281 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:02:19,296 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:19,932 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:02:19,946 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:20,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:02:20,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 1.93s (3 tablas)
2026-01-20 11:02:20,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:02:20,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-20 11:02:49,498 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-20 11:02:49,499 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-20 11:02:49,499 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-20 11:02:49,499 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-20 11:02:49,508 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:49,512 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:50,234 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-20 11:02:50,250 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:51,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-20 11:02:51,058 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-20 11:02:51,788 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-20 11:02:51,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.29s (3 tablas)
2026-01-20 11:02:51,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-20 11:02:51,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-21 16:26:05,800 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:05,803 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:06,651 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:07,436 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:09,450 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-21 16:26:09,451 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-21 16:26:09,451 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-21 16:26:09,451 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-21 16:26:09,462 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:09,465 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:10,160 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-21 16:26:10,176 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:10,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-21 16:26:11,004 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:26:11,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-21 16:26:11,711 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.26s (3 tablas)
2026-01-21 16:26:11,711 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-21 16:26:11,711 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-21 16:27:57,560 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [c8c36ddb]: List contracts grouped by province name
2026-01-21 16:27:57,561 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Paso 1: Obteniendo schema de BigQuery
2026-01-21 16:27:57,561 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-21 16:27:57,577 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:27:58,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.67s
2026-01-21 16:27:58,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Schema obtenido (0.67s)
2026-01-21 16:27:58,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-21 16:27:58,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] ‚úÖ 3 tablas de dimensiones disponibles (0.00s)
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Tablas: DimProducts, DimProvince, DimTime
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Paso 2: Construyendo prompt
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Prompt construido (0.000s, 3231 chars)
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Prompt incluye 3 tablas de dimensiones
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Preview del prompt (√∫ltimos 500 chars):
Si la pregunta pide agrupar por "province name" ‚Üí HAZ JOIN con DimProvince y usa DimProvince.province_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide agrupar por "product name" ‚Üí HAZ JOIN con DimProducts y usa DimProducts.product_name en el GROUP BY
- ‚ö†Ô∏è Si la pregunta pide an√°lisis temporal (mes, trimestre, a√±o) ‚Üí HAZ JOIN con DimTime
- Usa solo columnas de los schemas proporcionados
- Agrega LIMIT 100
- Sin markdown ni explicaciones


PREGUNTA ACTUAL: List contracts grouped by province name

SQL:
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Paso 3: Generando SQL con Gemini
2026-01-21 16:27:58,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-21 16:27:58,230 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-21 16:28:02,425 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.19s
2026-01-21 16:28:02,426 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 937, 'candidates_tokens': 112, 'total_tokens': 1049}
2026-01-21 16:28:02,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.20s
2026-01-21 16:28:02,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-21 16:28:02,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Paso 4: Ejecutando SQL en BigQuery
2026-01-21 16:28:02,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-21 16:28:02,445 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-21 16:28:02,446 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-21 16:28:02,446 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-21 16:28:02,446 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-21 16:28:02,446 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-21 16:28:03,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-21 16:28:04,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.842s
2026-01-21 16:28:04,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 13,727 (0.01 MB)
2026-01-21 16:28:04,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.86s
2026-01-21 16:28:04,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-21 16:28:04,288 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] BigQuery completado (1.86s)
2026-01-21 16:28:04,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-21 16:28:04,289 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-21 16:28:07,812 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c8c36ddb] Recomendaci√≥n de gr√°fico: bar
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO - ================================================================================
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: c8c36ddb
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.25s
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO -   - Get Schema: 0.67s
2026-01-21 16:28:07,813 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-21 16:28:07,815 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.20s
2026-01-21 16:28:07,815 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 1.86s
2026-01-21 16:28:07,815 - nl2sql_chatbot - INFO -   - Chart Recommendation: 3.52s
2026-01-21 16:28:07,815 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-21 16:28:07,816 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-21 16:28:07,816 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 937, 'candidates_tokens': 112, 'total_tokens': 1049}
2026-01-21 16:28:07,816 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-21 16:28:07,816 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-21 16:28:07,816 - nl2sql_chatbot - INFO - ================================================================================
2026-01-21 16:28:07,816 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [c8c36ddb] completado exitosamente en 10.25s
2026-01-22 14:32:35,662 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-22 14:32:35,662 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-22 14:32:35,662 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-22 14:32:35,662 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-22 14:32:35,673 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 14:32:35,677 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 14:32:36,407 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-22 14:32:36,424 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 14:32:37,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-22 14:32:37,109 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 14:32:37,778 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-22 14:32:37,779 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.12s (3 tablas)
2026-01-22 14:32:37,779 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-22 14:32:37,779 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-22 17:57:05,882 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-22 17:57:06,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-22 17:57:06,844 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-22 17:57:06,844 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-22 17:57:06,844 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-22 17:57:06,861 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:06,867 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:07,767 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-22 17:57:07,786 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:08,491 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-22 17:57:08,509 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:10,255 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-22 17:57:10,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 3.41s (3 tablas)
2026-01-22 17:57:10,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-22 17:57:10,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-22 17:57:35,859 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-22 17:57:36,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-22 17:57:36,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-22 17:57:36,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-22 17:57:36,606 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-22 17:57:36,618 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:36,623 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:37,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-22 17:57:37,440 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:38,151 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-22 17:57:38,171 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 17:57:38,852 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-22 17:57:38,853 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.25s (3 tablas)
2026-01-22 17:57:38,853 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-22 17:57:38,853 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-22 18:03:47,379 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [34a82991]: Show me contracts with product names
2026-01-22 18:03:47,379 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] üéØ Ejecutando agente LangGraph para: Show me contracts with product names...
2026-01-22 18:03:47,379 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] Paso 1: Obteniendo schema...
2026-01-22 18:03:47,382 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Obteniendo schema de BigQuery...
2026-01-22 18:03:47,382 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-22 18:03:47,400 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-22 18:03:48,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 1.03s
2026-01-22 18:03:48,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Schema obtenido: bunge-de-poc-insumos.Gold.contracts_gold_2
2026-01-22 18:03:48,417 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] Paso 2: Obteniendo dimensiones...
2026-01-22 18:03:48,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Obteniendo informaci√≥n de dimensiones...
2026-01-22 18:03:48,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-22 18:03:48,419 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] 3 tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-22 18:03:48,420 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] Paso 3: Generando SQL...
2026-01-22 18:03:48,422 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Generando SQL para: Show me contracts with product names...
2026-01-22 18:03:48,423 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-22 18:03:48,425 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-22 18:03:52,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.20s
2026-01-22 18:03:52,634 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 937, 'candidates_tokens': 119, 'total_tokens': 1056}
2026-01-22 18:03:52,634 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.21s
2026-01-22 18:03:52,634 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-i...
2026-01-22 18:03:52,634 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] SQL generado: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-i...
2026-01-22 18:03:52,635 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] Paso 4: Ejecutando query...
2026-01-22 18:03:52,637 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Ejecutando SQL en BigQuery...
2026-01-22 18:03:52,638 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-d...
2026-01-22 18:03:52,638 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-22 18:03:52,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-22 18:03:52,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-22 18:03:52,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-i...
2026-01-22 18:03:52,657 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-22 18:03:54,259 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-22 18:03:54,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.010s
2026-01-22 18:03:54,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 574,514 (0.55 MB)
2026-01-22 18:03:54,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.04s
2026-01-22 18:03:54,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-22 18:03:54,674 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Query ejecutado: 100 filas retornadas
2026-01-22 18:03:54,675 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] Paso 5: Recomendando gr√°fico...
2026-01-22 18:03:54,676 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Analizando datos para recomendaci√≥n de gr√°fico...
2026-01-22 18:03:54,677 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-22 18:03:59,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-22 18:03:59,098 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Gr√°fico recomendado: bar
2026-01-22 18:03:59,098 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34a82991] ‚úÖ Agente completado en 11.72s
2026-01-22 18:03:59,099 - nl2sql_chatbot - INFO - ================================================================================
2026-01-22 18:03:59,099 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 34a82991
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO - ‚ùì Question: Show me contracts with product names
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.72s
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO -   - Get Schema: 1.04s
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO -   - Get Dimensions: 0.00s
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO -   - Generate SQL: 4.22s
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO -   - Execute Query: 2.04s
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO -   - Recommend Chart: 4.42s
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO - üîç SQL: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id LIMIT 100
2026-01-22 18:03:59,100 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-22 18:03:59,101 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-22 18:03:59,101 - nl2sql_chatbot - INFO - ================================================================================
2026-01-22 18:03:59,101 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [34a82991] completado exitosamente en 11.72s
2026-01-22 18:04:27,307 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [af5ce8c9]: List contracts grouped by province name
2026-01-22 18:04:27,307 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] üéØ Ejecutando agente LangGraph para: List contracts grouped by province name...
2026-01-22 18:04:27,307 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] Paso 1: Obteniendo schema...
2026-01-22 18:04:27,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Obteniendo schema de BigQuery...
2026-01-22 18:04:27,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-22 18:04:27,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.00s
2026-01-22 18:04:27,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Schema obtenido: bunge-de-poc-insumos.Gold.contracts_gold_2
2026-01-22 18:04:27,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] Paso 2: Obteniendo dimensiones...
2026-01-22 18:04:27,308 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Obteniendo informaci√≥n de dimensiones...
2026-01-22 18:04:27,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-22 18:04:27,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] 3 tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-22 18:04:27,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] Paso 3: Generando SQL...
2026-01-22 18:04:27,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Generando SQL para: List contracts grouped by province name...
2026-01-22 18:04:27,309 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-22 18:04:27,310 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-22 18:04:31,628 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.32s
2026-01-22 18:04:31,629 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 937, 'candidates_tokens': 112, 'total_tokens': 1049}
2026-01-22 18:04:31,629 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.32s
2026-01-22 18:04:31,629 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-22 18:04:31,629 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] SQL generado: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-22 18:04:31,630 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] Paso 4: Ejecutando query...
2026-01-22 18:04:31,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Ejecutando SQL en BigQuery...
2026-01-22 18:04:31,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contra...
2026-01-22 18:04:31,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-22 18:04:31,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.021s
2026-01-22 18:04:31,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-22 18:04:31,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contra...
2026-01-22 18:04:31,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-22 18:04:33,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-22 18:04:33,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.921s
2026-01-22 18:04:33,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 13,727 (0.01 MB)
2026-01-22 18:04:33,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.94s
2026-01-22 18:04:33,576 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-22 18:04:33,576 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Query ejecutado: 5 filas retornadas
2026-01-22 18:04:33,576 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] Paso 5: Recomendando gr√°fico...
2026-01-22 18:04:33,578 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Analizando datos para recomendaci√≥n de gr√°fico...
2026-01-22 18:04:33,578 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-22 18:04:37,107 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-22 18:04:37,107 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Gr√°fico recomendado: bar
2026-01-22 18:04:37,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [af5ce8c9] ‚úÖ Agente completado en 9.80s
2026-01-22 18:04:37,108 - nl2sql_chatbot - INFO - ================================================================================
2026-01-22 18:04:37,108 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: af5ce8c9
2026-01-22 18:04:37,108 - nl2sql_chatbot - INFO - ‚ùì Question: List contracts grouped by province name
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.80s
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO -   - Get Dimensions: 0.00s
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO -   - Generate SQL: 4.32s
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO -   - Execute Query: 1.95s
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO -   - Recommend Chart: 3.53s
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - üîç SQL: SELECT DimProvince.province_name, COUNT(*) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` AS contracts_gold_2 JOIN `bunge-de-poc-insumos.Dim.DimProvince` AS DimProvince ON contracts_gold_2.province_id = DimProvince.province_id GROUP BY DimProvince.province_name LIMIT 100
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - ================================================================================
2026-01-22 18:04:37,109 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [af5ce8c9] completado exitosamente en 9.80s
2026-01-26 16:20:46,415 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:20:47,572 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:20:47,572 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:20:47,572 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:20:47,572 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-26 16:20:47,584 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:20:47,590 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:20:48,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-26 16:20:48,292 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:20:48,937 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-26 16:20:48,952 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:20:49,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-26 16:20:49,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.04s (3 tablas)
2026-01-26 16:20:49,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:20:49,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:21:51,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [339757f3]: Show me contracts with product names
2026-01-26 16:21:51,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] üéØ Ejecutando agente LangGraph para: Show me contracts with product names...
2026-01-26 16:21:51,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] Paso 1: Obteniendo schema...
2026-01-26 16:21:51,697 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Obteniendo schema de BigQuery...
2026-01-26 16:21:51,697 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery...
2026-01-26 16:21:51,711 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:21:52,490 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema obtenido en 0.79s
2026-01-26 16:21:52,490 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Schema obtenido: bunge-de-poc-insumos.Gold.contracts_gold_2
2026-01-26 16:21:52,490 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] Paso 2: Obteniendo dimensiones...
2026-01-26 16:21:52,491 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Obteniendo informaci√≥n de dimensiones...
2026-01-26 16:21:52,492 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Dimensiones obtenidas desde cach√© (3 tablas)
2026-01-26 16:21:52,492 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] 3 tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:21:52,492 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] Paso 3: Generando SQL...
2026-01-26 16:21:52,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Generando SQL para: Show me contracts with product names...
2026-01-26 16:21:52,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-26 16:21:52,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-26 16:21:56,614 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.12s
2026-01-26 16:21:56,617 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 937, 'candidates_tokens': 119, 'total_tokens': 1056}
2026-01-26 16:21:56,617 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.12s
2026-01-26 16:21:56,617 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-i...
2026-01-26 16:21:56,617 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] SQL generado: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-i...
2026-01-26 16:21:56,617 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] Paso 4: Ejecutando query...
2026-01-26 16:21:56,620 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Ejecutando SQL en BigQuery...
2026-01-26 16:21:56,621 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-d...
2026-01-26 16:21:56,621 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-26 16:21:56,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.018s
2026-01-26 16:21:56,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-26 16:21:56,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-i...
2026-01-26 16:21:56,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-26 16:21:58,052 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-26 16:21:58,450 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.811s
2026-01-26 16:21:58,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 574,514 (0.55 MB)
2026-01-26 16:21:58,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 1.84s
2026-01-26 16:21:58,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-26 16:21:58,456 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Query ejecutado: 100 filas retornadas
2026-01-26 16:21:58,457 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] Paso 5: Recomendando gr√°fico...
2026-01-26 16:21:58,458 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîß [Tool] Analizando datos para recomendaci√≥n de gr√°fico...
2026-01-26 16:21:58,458 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-26 16:22:02,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ [Tool] Gr√°fico recomendado: bar
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [339757f3] ‚úÖ Agente completado en 10.64s
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - ================================================================================
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 339757f3
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - ‚ùì Question: Show me contracts with product names
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 10.64s
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO -   - Get Schema: 0.79s
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO -   - Get Dimensions: 0.00s
2026-01-26 16:22:02,334 - nl2sql_chatbot - INFO -   - Generate SQL: 4.13s
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO -   - Execute Query: 1.84s
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO -   - Recommend Chart: 3.88s
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO - üîç SQL: SELECT `bunge-de-poc-insumos.Gold.contracts_gold_2`.*, DimProducts.product_name FROM `bunge-de-poc-insumos.Gold.contracts_gold_2` JOIN `bunge-de-poc-insumos.Dim.DimProducts` AS DimProducts ON `bunge-de-poc-insumos.Gold.contracts_gold_2`.product_id = DimProducts.product_id LIMIT 100
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO - ================================================================================
2026-01-26 16:22:02,335 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [339757f3] completado exitosamente en 10.64s
2026-01-26 16:55:00,893 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:01,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:01,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:01,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:01,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-26 16:55:01,770 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:01,775 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:02,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-26 16:55:02,701 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:03,490 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-26 16:55:03,505 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:04,334 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-26 16:55:04,335 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.58s (3 tablas)
2026-01-26 16:55:04,335 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:04,335 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:05,331 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:06,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:06,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:06,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:06,130 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-26 16:55:06,142 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:06,146 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:06,872 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-26 16:55:06,892 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:07,580 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-26 16:55:07,603 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:08,380 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-26 16:55:08,380 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.25s (3 tablas)
2026-01-26 16:55:08,380 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:08,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:09,449 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:10,244 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:10,244 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:10,244 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:10,244 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schemas de tablas de dimensiones...
2026-01-26 16:55:10,256 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:10,260 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:10,966 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProducts obtenido
2026-01-26 16:55:10,987 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:11,632 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimProvince obtenido
2026-01-26 16:55:11,652 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:12,346 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema de DimTime obtenido
2026-01-26 16:55:12,346 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.10s (3 tablas)
2026-01-26 16:55:12,346 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:12,346 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:13,365 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:14,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:14,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:14,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:14,191 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:14,202 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:14,206 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:14,913 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:14,933 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:15,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:15,764 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:16,448 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:16,448 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.26s (3 tablas)
2026-01-26 16:55:16,448 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:16,448 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:17,465 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:18,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:18,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:18,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:18,228 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:18,239 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:18,244 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:18,955 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:18,976 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:19,632 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:19,654 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:20,372 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:20,372 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensiones cargadas en 2.14s (3 tablas)
2026-01-26 16:55:20,372 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:20,373 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:21,372 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:22,133 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:22,138 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:22,798 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:22,818 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:23,514 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:23,533 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:24,367 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:24,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.25s (3 tables)
2026-01-26 16:55:24,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:24,368 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:25,422 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:26,248 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:26,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:26,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:26,249 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:26,264 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:26,270 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:26,948 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:26,968 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:27,600 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:27,620 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:28,409 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:28,410 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.16s (3 tables)
2026-01-26 16:55:28,410 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:28,410 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:29,403 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:30,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:30,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:30,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:30,216 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:30,229 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:30,234 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:30,889 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:30,909 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:31,634 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:31,656 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:32,392 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:32,392 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.18s (3 tables)
2026-01-26 16:55:32,392 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:32,392 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:33,407 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:34,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:34,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:34,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:34,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:34,167 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:34,172 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:34,854 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:34,875 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:35,703 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:35,724 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:36,426 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:36,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.27s (3 tables)
2026-01-26 16:55:36,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:36,427 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:37,433 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:38,204 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:38,204 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:38,204 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:38,204 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:38,216 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:38,222 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:38,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:38,981 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:39,787 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:39,807 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:40,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:40,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.23s (3 tables)
2026-01-26 16:55:40,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:40,434 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:41,470 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:42,230 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:42,230 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:42,230 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:42,230 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:42,240 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:42,245 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:43,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:43,096 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:43,823 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:43,843 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:44,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:44,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.41s (3 tables)
2026-01-26 16:55:44,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:44,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:45,659 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:46,423 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:46,423 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:46,423 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:46,423 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:46,435 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:46,439 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:47,220 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:47,241 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:47,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:47,999 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:48,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:48,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.24s (3 tables)
2026-01-26 16:55:48,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:48,667 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:49,724 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:50,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:50,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:50,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:50,496 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:50,508 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:50,512 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:51,145 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:51,165 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:51,841 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:51,862 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:52,610 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:52,610 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.11s (3 tables)
2026-01-26 16:55:52,610 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:52,610 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:53,596 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:54,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-26 16:55:54,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:54,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-26 16:55:54,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:54,392 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:54,397 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:54,936 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:54,957 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:55,676 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:55,695 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:56,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:55:56,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.01s (3 tables)
2026-01-26 16:55:56,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:55:56,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:55:57,393 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:55:58,167 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:55:58,167 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:55:58,167 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:55:58,167 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:55:58,179 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:58,183 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:58,896 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:55:58,916 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:55:59,646 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:55:59,661 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:00,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:00,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.18s (3 tables)
2026-01-26 16:56:00,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Tablas de dimensiones disponibles: DimProducts, DimProvince, DimTime
2026-01-26 16:56:00,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ El sistema puede generar JOINs con estas tablas
2026-01-26 16:56:01,365 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:02,126 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:02,126 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:02,126 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:02,126 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:02,138 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:02,142 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:02,968 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:02,991 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:03,631 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:03,652 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:04,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:04,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.21s (3 tables)
2026-01-26 16:56:04,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:04,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:05,366 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:06,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:06,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:06,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:06,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:06,195 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:06,200 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:06,865 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:06,881 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:07,556 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:07,573 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:08,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:08,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.14s (3 tables)
2026-01-26 16:56:08,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:08,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:09,406 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:10,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:10,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:10,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:10,201 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:10,214 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:10,219 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:10,862 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:10,882 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:11,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:11,570 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:12,290 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:12,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.09s (3 tables)
2026-01-26 16:56:12,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:12,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:13,312 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:14,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:14,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:14,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:14,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:14,096 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:14,100 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:15,127 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:15,147 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:15,816 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:15,830 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:16,550 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:16,550 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.47s (3 tables)
2026-01-26 16:56:16,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:16,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:17,590 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:18,355 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:18,355 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:18,355 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:18,355 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:18,370 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:18,376 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:18,902 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:18,923 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:19,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:19,728 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:20,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:20,440 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.08s (3 tables)
2026-01-26 16:56:20,440 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:20,440 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:21,479 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:22,262 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:22,262 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:22,262 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:22,262 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:22,273 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:22,277 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:22,997 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:23,018 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:23,694 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:23,713 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:24,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:24,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.21s (3 tables)
2026-01-26 16:56:24,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:24,476 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:25,561 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:26,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:26,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:26,348 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:26,348 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:26,360 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:26,364 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:27,097 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:27,116 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:27,803 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:27,824 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:28,507 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:28,507 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.16s (3 tables)
2026-01-26 16:56:28,508 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:28,508 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:29,498 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:30,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:30,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:30,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:30,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:30,284 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:30,288 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:30,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:30,997 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:31,656 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:31,677 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:32,415 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:32,415 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.14s (3 tables)
2026-01-26 16:56:32,415 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:32,415 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:33,452 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:34,253 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:34,253 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:34,253 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:34,253 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:34,264 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:34,268 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:34,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:34,969 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:35,532 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:35,551 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:36,206 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:36,206 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 1.95s (3 tables)
2026-01-26 16:56:36,206 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:36,206 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:37,207 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:37,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:37,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:37,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:37,967 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:37,978 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:37,983 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:38,782 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:38,803 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:39,578 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:39,597 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:40,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:40,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.32s (3 tables)
2026-01-26 16:56:40,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:40,283 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:41,305 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:42,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:42,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:42,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:42,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:42,156 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:42,161 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:42,929 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:42,949 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:43,601 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:43,624 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:44,396 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:44,396 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.25s (3 tables)
2026-01-26 16:56:44,396 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:44,397 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:45,453 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:46,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:46,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:46,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:46,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:46,244 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:46,248 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:47,290 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:47,304 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:48,137 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:48,152 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:48,711 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:48,712 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.48s (3 tables)
2026-01-26 16:56:48,712 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:48,712 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:49,733 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:50,522 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:50,522 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:50,522 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:50,522 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:50,533 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:50,538 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:51,315 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:51,329 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:52,330 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:52,345 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:53,212 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:53,212 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.69s (3 tables)
2026-01-26 16:56:53,212 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:53,212 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:54,235 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:55,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:55,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:55,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:55,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:55,054 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:55,059 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:55,751 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:55,765 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:56,478 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:56:56,498 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:57,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:56:57,220 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.18s (3 tables)
2026-01-26 16:56:57,220 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:56:57,220 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:56:58,234 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:56:58,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:56:58,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:56:58,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:56:58,992 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:56:59,004 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:59,009 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:56:59,749 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:56:59,769 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:00,592 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:57:00,613 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:01,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:57:01,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.30s (3 tables)
2026-01-26 16:57:01,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:57:01,292 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:57:02,286 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:57:03,047 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:57:03,047 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:57:03,047 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:57:03,047 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:57:03,060 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:03,065 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:03,819 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:57:03,839 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:04,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:57:04,729 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:06,231 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:57:06,231 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 3.18s (3 tables)
2026-01-26 16:57:06,231 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:57:06,231 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:57:12,744 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:57:13,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:57:13,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:57:13,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:57:13,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:57:13,601 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:13,605 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:14,403 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:57:14,426 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:15,208 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:57:15,230 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:15,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:57:15,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.41s (3 tables)
2026-01-26 16:57:15,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:57:15,999 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:57:35,228 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:57:36,002 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:57:36,002 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:57:36,002 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:57:36,002 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:57:36,013 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:36,017 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:36,817 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:57:36,832 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:37,514 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:57:37,535 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:38,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:57:38,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.26s (3 tables)
2026-01-26 16:57:38,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:57:38,267 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:57:48,804 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:57:49,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:57:49,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:57:49,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:57:49,575 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:57:49,588 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:49,592 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:50,294 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:57:50,313 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:51,347 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:57:51,370 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:52,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:57:52,156 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.58s (3 tables)
2026-01-26 16:57:52,157 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:57:52,157 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 16:57:54,008 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 16:57:55,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 16:57:55,012 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 16:57:55,013 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 16:57:55,013 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 16:57:55,026 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:55,032 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:55,699 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 16:57:55,712 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:56,377 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 16:57:56,393 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 16:57:57,432 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 16:57:57,432 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.42s (3 tables)
2026-01-26 16:57:57,432 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 16:57:57,432 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:27,847 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:28,770 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:28,770 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:28,770 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:28,770 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:28,783 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:28,787 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:29,685 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:29,708 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:30,312 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:30,333 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:31,077 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:31,077 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.31s (3 tables)
2026-01-26 17:03:31,077 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:31,077 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:32,078 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:32,842 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:32,842 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:32,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:32,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:32,855 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:32,860 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:33,421 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:33,438 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:34,110 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:34,129 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:34,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:34,973 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.13s (3 tables)
2026-01-26 17:03:34,973 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:34,973 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:35,980 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:36,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:36,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:36,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:36,745 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:36,757 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:36,762 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:37,398 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:37,420 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:38,364 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:38,378 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:39,098 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:39,099 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.35s (3 tables)
2026-01-26 17:03:39,099 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:39,099 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:40,086 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:40,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:40,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:40,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:40,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:40,859 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:40,863 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:41,480 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:41,504 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:42,229 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:42,252 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:42,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:42,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.06s (3 tables)
2026-01-26 17:03:42,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:42,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:43,907 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:44,691 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:44,691 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:44,691 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:44,691 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:44,703 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:44,709 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:45,324 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:45,342 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:45,926 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:45,939 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:46,587 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:46,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 1.90s (3 tables)
2026-01-26 17:03:46,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:46,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:47,606 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:48,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:48,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:48,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:48,370 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:48,382 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:48,388 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:49,068 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:49,086 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:49,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:49,777 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:50,469 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:50,469 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.10s (3 tables)
2026-01-26 17:03:50,469 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:50,469 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:51,465 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:52,209 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:52,209 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:52,209 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:52,209 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:52,221 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:52,226 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:52,914 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:52,928 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:53,595 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:53,617 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:54,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:54,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 1.97s (3 tables)
2026-01-26 17:03:54,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:54,184 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-26 17:03:55,231 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-26 17:03:55,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-26 17:03:55,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-26 17:03:55,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-26 17:03:55,977 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-26 17:03:55,988 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:55,992 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:56,644 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-26 17:03:56,669 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:57,213 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-26 17:03:57,237 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-26 17:03:57,908 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-26 17:03:57,908 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 1.93s (3 tables)
2026-01-26 17:03:57,909 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-26 17:03:57,909 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-28 12:53:44,493 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-28 12:53:45,341 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-28 12:53:45,341 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-28 12:53:45,341 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-28 12:53:45,341 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-28 12:53:45,355 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 12:53:45,361 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 12:53:45,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-28 12:53:45,916 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 12:53:46,499 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-28 12:53:46,517 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 12:53:47,232 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-28 12:53:47,233 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 1.89s (3 tables)
2026-01-28 12:53:47,233 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-28 12:53:47,233 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
2026-01-28 14:41:43,448 - numexpr.utils - INFO - NumExpr defaulting to 10 threads.
2026-01-28 14:41:44,293 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Starting NL ‚Üí SQL Chatbot application
2026-01-28 14:41:44,293 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Initializing Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-28 14:41:44,293 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI initialized successfully
2026-01-28 14:41:44,293 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Getting dimension table schemas...
2026-01-28 14:41:44,308 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 14:41:44,313 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 14:41:45,102 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProducts obtained
2026-01-28 14:41:45,120 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 14:41:45,906 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimProvince obtained
2026-01-28 14:41:45,927 - google.auth._default - WARNING - No project ID could be determined. Consider running `gcloud config set project` or setting the GOOGLE_CLOUD_PROJECT environment variable
2026-01-28 14:41:46,634 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Schema for DimTime obtained
2026-01-28 14:41:46,635 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Dimensions loaded in 2.34s (3 tables)
2026-01-28 14:41:46,635 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Dimension tables available: DimProducts, DimProvince, DimTime
2026-01-28 14:41:46,635 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ System can generate JOINs with these tables
