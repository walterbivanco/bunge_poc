2026-01-07 10:52:01,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:14,270 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:16,111 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:20,736 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:28,555 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:42,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:52:42,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:52:42,060 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:53:02,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:53:02,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:53:02,182 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:53:10,361 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:53:10,361 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:53:10,361 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:53:11,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:53:11,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:53:11,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 10:54:20,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 10:54:20,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 10:54:20,748 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:06:47,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:06:47,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:06:47,509 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:07:02,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [31c01a23]: "Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:07:02,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Schema obtenido (1695.67ms)
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Paso 2: Construyendo prompt
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Prompt construido (0.13ms, 2160 chars)
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31c01a23] Paso 3: Generando SQL con Gemini
2026-01-07 11:07:04,319 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:07:04,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:07:06,953 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 2633.87ms: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_status:8, grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:06,962 - nl2sql_chatbot - ERROR - ‚ùå [31c01a23] Error procesando pregunta: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_status:8, grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 87, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:06,966 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:07:06,967 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 31c01a23
2026-01-07 11:07:06,967 - nl2sql_chatbot - INFO - ‚ùì Question: "Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:07:06,967 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 4339.80ms
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO -   - Get Schema: 1695.67ms
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO -   - Build Prompt: 0.13ms
2026-01-07 11:07:06,968 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:06,968 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:07:23,351 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [5162fd23]: Contratos de SOJA en 2025
2026-01-07 11:07:23,352 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:07:24,918 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Schema obtenido (1566.19ms)
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Paso 2: Construyendo prompt
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Prompt construido (0.14ms, 2150 chars)
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [5162fd23] Paso 3: Generando SQL con Gemini
2026-01-07 11:07:24,919 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:07:24,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:07:26,630 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 1710.28ms: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:26,631 - nl2sql_chatbot - ERROR - ‚ùå [5162fd23] Error procesando pregunta: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details."
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.128.234:443 {grpc_message:"Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 52, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 87, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 5162fd23
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 3280.27ms
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO -   - Get Schema: 1566.19ms
2026-01-07 11:07:26,633 - nl2sql_chatbot - INFO -   - Build Prompt: 0.14ms
2026-01-07 11:07:26,634 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2026-01-07 11:07:26,634 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:11:25,831 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:11:25,831 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:11:25,831 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:11:46,468 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [ee4feb60]: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:11:46,468 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:11:47,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Schema obtenido (1377.53ms)
2026-01-07 11:11:47,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 2: Construyendo prompt
2026-01-07 11:11:47,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Prompt construido (0.49ms, 2159 chars)
2026-01-07 11:11:47,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 3: Generando SQL con Gemini
2026-01-07 11:11:47,847 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:11:47,848 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:11:51,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:11:51,721 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3873.67ms
2026-01-07 11:11:51,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:11:51,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [ee4feb60] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:12:54,834 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:12:54,835 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 1,824,066 (1.74 MB)
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2768.76ms
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 10
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: ee4feb60
2026-01-07 11:12:57,603 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 71135.54ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Get Schema: 1377.53ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Build Prompt: 0.49ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3873.67ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2768.76ms
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üìä Rows: 10
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:12:57,604 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:12:57,605 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:12:57,605 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:12:57,605 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [ee4feb60] completado exitosamente en 71135.54ms
2026-01-07 11:14:36,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:36,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:36,534 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:38,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:38,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:38,573 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:41,518 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:41,519 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:41,519 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:43,824 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:43,824 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:43,825 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:45,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:45,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:45,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:48,764 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:48,765 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:48,765 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:51,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:51,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:51,219 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:53,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:53,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:53,688 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:14:55,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:14:55,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:14:55,173 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:15:35,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:15:35,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:15:35,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:15:44,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:15:44,705 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:15:44,706 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:15:49,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:15:49,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:15:49,376 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:16:07,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:16:07,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:16:07,272 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:17:33,403 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:17:33,404 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:17:33,404 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:18:06,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:18:06,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:18:06,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:18:22,121 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [88059123]: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:18:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:18:22,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:18:23,752 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.63s (24 columnas)
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Schema obtenido (1.63s)
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 2: Construyendo prompt
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Prompt construido (0.000s, 2159 chars)
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 3: Generando SQL con Gemini
2026-01-07 11:18:23,753 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:18:23,754 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:18:34,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:18:34,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 11.16s
2026-01-07 11:18:34,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:18:34,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [88059123] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:18:35,325 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:18:35,325 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.35s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 10
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 88059123
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 15.56s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO -   - Get Schema: 1.63s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:18:37,680 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 11.16s
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.35s
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` ORDER BY FECHACONCERTACION DESC LIMIT 10
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - üìä Rows: 10
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 737, 'candidates_tokens': 34, 'total_tokens': 771}
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:18:37,681 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [88059123] completado exitosamente en 15.56s
2026-01-07 11:19:02,004 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [d6bcf93a]: Contratos de SOJA en 2025
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Schema obtenido (0.00s)
2026-01-07 11:19:02,005 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 2: Construyendo prompt
2026-01-07 11:19:02,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Prompt construido (0.000s, 2150 chars)
2026-01-07 11:19:02,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 3: Generando SQL con Gemini
2026-01-07 11:19:02,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:19:02,007 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Llamando a Gemini para generar SQL...
2026-01-07 11:19:10,838 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-07 11:19:12,844 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-07 11:19:18,331 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 738, 'candidates_tokens': 53, 'total_tokens': 791}
2026-01-07 11:19:18,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 1 reintento(s) en 16.33s
2026-01-07 11:19:18,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:19:18,333 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [d6bcf93a] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:19:18,868 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:19:18,868 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:19:20,917 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.05s
2026-01-07 11:19:20,917 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: d6bcf93a
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 18.91s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 16.33s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.05s
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-07 11:19:20,918 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 738, 'candidates_tokens': 53, 'total_tokens': 791}
2026-01-07 11:19:20,919 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:19:20,919 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:19:20,919 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:19:20,920 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [d6bcf93a] completado exitosamente en 18.91s
2026-01-07 11:21:04,010 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:04,010 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:04,011 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:21:10,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:10,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:10,549 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:21:19,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:19,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:19,055 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:21:32,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:21:32,611 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:21:32,612 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:25:07,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:25:07,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:25:07,168 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:29:09,442 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:29:09,442 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:29:09,442 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:29:25,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [66333239]: Contratos de SOJA en 2025
2026-01-07 11:29:25,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:29:25,719 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:29:27,337 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.62s (24 columnas)
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Schema obtenido (1.62s)
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Paso 2: Construyendo prompt
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Prompt construido (0.000s, 891 chars)
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [66333239] Paso 3: Generando SQL con Gemini
2026-01-07 11:29:27,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:29:27,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:29:27,348 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 0.00s: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 80, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 771, in _generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 3201, in _prepare_request
    request_v1beta1 = super()._prepare_request(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 546, in _prepare_request
    category=gapic_content_types.HarmCategory(category),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 757, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 1171, in __new__
    raise ve_exc
ValueError: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
2026-01-07 11:29:27,355 - nl2sql_chatbot - ERROR - ‚ùå [66333239] Error procesando pregunta: Error al generar SQL con Gemini: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 80, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 771, in _generate_content
    request = self._prepare_request(
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 3201, in _prepare_request
    request_v1beta1 = super()._prepare_request(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 546, in _prepare_request
    category=gapic_content_types.HarmCategory(category),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 757, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/lib/python3.12/enum.py", line 1171, in __new__
    raise ve_exc
ValueError: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 142, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 66333239
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 1.64s
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO -   - Get Schema: 1.62s
2026-01-07 11:29:27,357 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:29:27,358 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 'HARM_CATEGORY_DANGEROUS_CONTENT' is not a valid HarmCategory
2026-01-07 11:29:27,358 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:30:11,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:30:11,304 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:30:11,304 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:30:30,292 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:30:30,292 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:30:30,293 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:30:40,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:30:40,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:30:40,165 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:30:52,398 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [3900dc65]: Contratos de SOJA en 2025
2026-01-07 11:30:52,399 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:30:52,399 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:30:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.94s (24 columnas)
2026-01-07 11:30:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Schema obtenido (1.94s)
2026-01-07 11:30:54,338 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 2: Construyendo prompt
2026-01-07 11:30:54,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Prompt construido (0.000s, 891 chars)
2026-01-07 11:30:54,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 3: Generando SQL con Gemini
2026-01-07 11:30:54,339 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:30:54,340 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:30:58,874 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.53s
2026-01-07 11:30:58,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:30:58,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.54s
2026-01-07 11:30:58,876 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:30:58,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [3900dc65] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:32:02,000 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:32:02,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.44s
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:32:04,438 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 3900dc65
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 72.04s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Get Schema: 1.94s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.54s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.44s
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:32:04,439 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [3900dc65] completado exitosamente en 72.04s
2026-01-07 11:37:31,066 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:37:31,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:37:31,067 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:37:49,899 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [8064dd02]: Contratos de SOJA en 2025
2026-01-07 11:37:49,900 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:37:49,900 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:37:51,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.43s (24 columnas)
2026-01-07 11:37:51,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Schema obtenido (1.43s)
2026-01-07 11:37:51,328 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 2: Construyendo prompt
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Prompt construido (0.000s, 891 chars)
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 3: Generando SQL con Gemini
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:37:51,329 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:38:18,880 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 27.55s
2026-01-07 11:38:18,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:38:18,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 27.55s
2026-01-07 11:38:18,883 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:38:18,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:38:18,884 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.505s
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-07 11:38:19,389 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-07 11:38:21,014 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-07 11:38:21,482 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.093s
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.61s
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [8064dd02] BigQuery completado (2.61s)
2026-01-07 11:38:21,493 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 8064dd02
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 31.59s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Get Schema: 1.43s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 27.55s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.61s
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:38:21,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [8064dd02] completado exitosamente en 31.59s
2026-01-07 11:41:22,564 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:41:22,564 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:41:22,565 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:41:39,797 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [e595379e]: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:41:39,797 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:41:39,798 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:41:41,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.84s (24 columnas)
2026-01-07 11:41:41,639 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Schema obtenido (1.84s)
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Paso 2: Construyendo prompt
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Prompt construido (0.000s, 900 chars)
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [e595379e] Paso 3: Generando SQL con Gemini
2026-01-07 11:41:41,640 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-1.5-flash-002
2026-01-07 11:41:41,641 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:41:43,687 - nl2sql_chatbot - ERROR - ‚ùå Error generando SQL despu√©s de 2.05s: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.NOT_FOUND
	details = "Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.129.106:443 {grpc_status:5, grpc_message:"Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 74, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
2026-01-07 11:41:43,696 - nl2sql_chatbot - ERROR - ‚ùå [e595379e] Error procesando pregunta: Error al generar SQL con Gemini: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 75, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 1166, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/grpc/_channel.py", line 996, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.NOT_FOUND
	details = "Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"
	debug_error_string = "UNKNOWN:Error received from peer ipv4:142.251.129.106:443 {grpc_status:5, grpc_message:"Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 74, in nl_to_sql
    response = model.generate_content(prompt)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 654, in generate_content
    return self._generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py", line 779, in _generate_content
    gapic_response = self._prediction_client.generate_content(request=request)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py", line 2159, in generate_content
    response = rpc(
               ^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/env/lib/python3.12/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/main.py", line 129, in ask_question
    llm_result = nl_to_sql(prompt)
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wb/desarrollo/taligent/bunge/poc/backend/app/llm.py", line 136, in nl_to_sql
    raise Exception(f"Error al generar SQL con Gemini: {str(e)}")
Exception: Error al generar SQL con Gemini: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: e595379e
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 3.90s
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO -   - Get Schema: 1.84s
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:41:43,700 - nl2sql_chatbot - ERROR - ‚ùå Error: Error al generar SQL con Gemini: 404 Publisher Model `projects/bunge-de-poc-insumos/locations/us-central1/publishers/google/models/gemini-1.5-flash-002` was not found or your project does not have access to it. Please ensure you are using a valid model version. For more information, see: https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions
2026-01-07 11:41:43,700 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:43:28,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-07 11:43:28,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-07 11:43:28,653 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-07 11:43:48,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [a89b2a78]: ¬øCu√°ntos contratos hay por estado?
2026-01-07 11:43:48,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 1: Obteniendo schema de BigQuery
2026-01-07 11:43:48,263 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.66s (24 columnas)
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Schema obtenido (1.66s)
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 2: Construyendo prompt
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Prompt construido (0.000s, 900 chars)
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 3: Generando SQL con Gemini
2026-01-07 11:43:49,924 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-07 11:43:49,925 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-07 11:43:53,096 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 2s antes de reintentar...
2026-01-07 11:43:55,097 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 1/3 - Llamando a Gemini...
2026-01-07 11:43:56,470 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  ‚ö†Ô∏è  Error 429 (Rate Limit) - Esperando 4s antes de reintentar...
2026-01-07 11:44:00,471 - nl2sql_chatbot - WARNING - ‚ö†Ô∏è  Reintento 2/3 - Llamando a Gemini...
2026-01-07 11:44:37,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 37.42s
2026-01-07 11:44:37,890 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 312, 'candidates_tokens': 53, 'total_tokens': 365}
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ √âxito despu√©s de 2 reintento(s) en 47.97s
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT ESTADOCONTRATO, COUNT(*) AS cantidad_contratos FROM `bunge-de-poc-insumos.Bronce.viterra` GRO...
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] Paso 4: Ejecutando SQL en BigQuery
2026-01-07 11:44:37,891 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.503s
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT ESTADOCONTRATO, COUNT(*) AS cantidad_contratos FROM `bunge-de-poc-insumos.Bronce.viterra` GRO...
2026-01-07 11:44:38,394 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-07 11:44:40,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-07 11:44:40,709 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.315s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 80,849 (0.08 MB)
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.82s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 10
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a89b2a78] BigQuery completado (2.82s)
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: a89b2a78
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚ùì Question: ¬øCu√°ntos contratos hay por estado?
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 52.45s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Get Schema: 1.66s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 47.97s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.82s
2026-01-07 11:44:40,710 - nl2sql_chatbot - INFO - üîç SQL: SELECT ESTADOCONTRATO, COUNT(*) AS cantidad_contratos FROM `bunge-de-poc-insumos.Bronce.viterra` GROUP BY ESTADOCONTRATO LIMIT 100
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - üìä Rows: 10
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 312, 'candidates_tokens': 53, 'total_tokens': 365}
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ================================================================================
2026-01-07 11:44:40,711 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [a89b2a78] completado exitosamente en 52.45s
2026-01-08 14:30:40,561 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-08 14:30:40,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-08 14:30:40,562 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-08 14:31:10,428 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [1b3a3c18]: Contratos de SOJA en 2025
2026-01-08 14:31:10,429 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 1: Obteniendo schema de BigQuery
2026-01-08 14:31:10,429 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-08 14:31:11,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.47s (24 columnas)
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Schema obtenido (1.47s)
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 2: Construyendo prompt
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Prompt construido (0.000s, 891 chars)
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 3: Generando SQL con Gemini
2026-01-08 14:31:11,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-08 14:31:11,899 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-08 14:31:16,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 4.46s
2026-01-08 14:31:16,359 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 4.46s
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] Paso 4: Ejecutando SQL en BigQuery
2026-01-08 14:31:16,360 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.374s
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FE...
2026-01-08 14:31:16,735 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-08 14:31:18,285 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-08 14:31:18,733 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.998s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 1,824,066 (1.74 MB)
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.38s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [1b3a3c18] BigQuery completado (2.38s)
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ================================================================================
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 1b3a3c18
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 8.32s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Get Schema: 1.47s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 4.46s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.38s
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üîç SQL: SELECT * FROM `bunge-de-poc-insumos.Bronce.viterra` WHERE PRODUCTO = 'SOJA' AND EXTRACT(YEAR FROM FECHACONCERTACION) = 2025 LIMIT 100
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 315, 'candidates_tokens': 68, 'total_tokens': 383}
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ================================================================================
2026-01-08 14:31:18,744 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [1b3a3c18] completado exitosamente en 8.32s
2026-01-13 11:50:05,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 11:50:05,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 11:50:05,846 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 11:50:35,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [31f29f38]: "Contratos de SOJA en 2025"
2026-01-13 11:50:35,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 1: Obteniendo schema de BigQuery
2026-01-13 11:50:35,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 11:50:36,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.50s (14 columnas)
2026-01-13 11:50:36,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Schema obtenido (1.50s)
2026-01-13 11:50:36,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 2: Construyendo prompt
2026-01-13 11:50:36,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Prompt construido (0.000s, 657 chars)
2026-01-13 11:50:36,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 3: Generando SQL con Gemini
2026-01-13 11:50:36,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 11:50:36,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 11:50:40,385 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.79s
2026-01-13 11:50:40,386 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 203, 'candidates_tokens': 147, 'total_tokens': 350}
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.80s
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT cliente, producto, proveedor, cosecha, negocio, provincia_lugarentrega, total_contratos, tota...
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 11:50:40,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 63.116s
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT cliente, producto, proveedor, cosecha, negocio, provincia_lugarentrega, total_contratos, tota...
2026-01-13 11:51:43,503 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 11:51:45,317 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 11:51:45,777 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.274s
2026-01-13 11:51:45,780 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 645,784 (0.62 MB)
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 65.39s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 53
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [31f29f38] BigQuery completado (65.39s)
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 31f29f38
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚ùì Question: "Contratos de SOJA en 2025"
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 70.70s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Get Schema: 1.50s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.80s
2026-01-13 11:51:45,781 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 65.39s
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - üîç SQL: SELECT cliente, producto, proveedor, cosecha, negocio, provincia_lugarentrega, total_contratos, total_cantidad, total_cantidad_entregada, total_cantidad_liquidada, precio_promedio, monto_total, anio_concertacion, mes_concertacion FROM `bunge-de-poc-insumos.Gold.contratos_gold` WHERE producto = 'SOJA' AND anio_concertacion = 2025 LIMIT 100
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - üìä Rows: 53
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 203, 'candidates_tokens': 147, 'total_tokens': 350}
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:51:45,782 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [31f29f38] completado exitosamente en 70.70s
2026-01-13 11:51:52,944 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 11:51:52,944 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 11:51:52,944 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 11:52:03,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [67f583fd]: Contratos de SOJA en 2025
2026-01-13 11:52:03,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 1: Obteniendo schema de BigQuery
2026-01-13 11:52:03,722 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 11:52:05,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.36s (14 columnas)
2026-01-13 11:52:05,080 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Schema obtenido (1.36s)
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 2: Construyendo prompt
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Prompt construido (0.000s, 643 chars)
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 3: Generando SQL con Gemini
2026-01-13 11:52:05,081 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 11:52:05,082 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 11:52:08,567 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.48s
2026-01-13 11:52:08,570 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 11:52:08,570 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.49s
2026-01-13 11:52:08,571 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:52:08,571 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 11:52:08,572 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.361s
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:52:08,933 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 11:52:10,812 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 11:52:11,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.370s
2026-01-13 11:52:11,623 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 646,695 (0.62 MB)
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.05s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [67f583fd] BigQuery completado (3.05s)
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 67f583fd
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 7.90s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO -   - Get Schema: 1.36s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 11:52:11,624 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.49s
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.05s
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - üîç SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_quantity, total_quantity_delivered, total_quantity_settled, average_price, total_amount, agreement_year, agreement_month FROM `bunge-de-poc-insumos.Gold.contracts_gold` WHERE product = 'SOJA' AND agreement_year = 2025 LIMIT 100
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:52:11,625 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [67f583fd] completado exitosamente en 7.90s
2026-01-13 11:52:40,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 11:52:40,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 11:52:40,987 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 11:52:55,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [c39f19bd]: Mu√©strame los √∫ltimos 10 contratos
2026-01-13 11:52:55,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 1: Obteniendo schema de BigQuery
2026-01-13 11:52:55,155 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 3.02s (14 columnas)
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Schema obtenido (3.02s)
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 2: Construyendo prompt
2026-01-13 11:52:58,179 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Prompt construido (0.000s, 652 chars)
2026-01-13 11:52:58,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 3: Generando SQL con Gemini
2026-01-13 11:52:58,180 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 11:52:58,181 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 11:53:01,894 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.71s
2026-01-13 11:53:01,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 190, 'candidates_tokens': 125, 'total_tokens': 315}
2026-01-13 11:53:01,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.72s
2026-01-13 11:53:01,897 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:53:01,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 11:53:01,898 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 11:53:02,260 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.362s
2026-01-13 11:53:02,261 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 11:53:02,261 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 11:53:02,261 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 11:53:04,348 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 11:53:04,936 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.675s
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 646,695 (0.62 MB)
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.04s
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 100
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [c39f19bd] BigQuery completado (3.05s)
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:53:04,943 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: c39f19bd
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - ‚ùì Question: Mu√©strame los √∫ltimos 10 contratos
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.79s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Get Schema: 3.02s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.72s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.05s
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - üîç SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_quantity, total_quantity_delivered, total_quantity_settled, average_price, total_amount, agreement_year, agreement_month FROM `bunge-de-poc-insumos.Gold.contracts_gold` ORDER BY agreement_year DESC, agreement_month DESC LIMIT 100
2026-01-13 11:53:04,944 - nl2sql_chatbot - INFO - üìä Rows: 100
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 190, 'candidates_tokens': 125, 'total_tokens': 315}
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 11:53:04,945 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [c39f19bd] completado exitosamente en 9.79s
2026-01-13 12:05:43,380 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:05:43,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:05:43,381 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:05:50,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:05:50,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:05:50,888 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:06:23,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:06:23,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:06:23,196 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:22:42,758 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:22:42,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:22:42,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:23:44,520 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:23:44,520 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:23:44,520 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:24:43,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:24:43,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:24:43,696 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:25:09,550 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [651afde9]: Contratos de SOJA en 2025
2026-01-13 12:25:09,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:25:09,551 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 12:25:12,122 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 2.57s (14 columnas)
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Schema obtenido (2.57s)
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 2: Construyendo prompt
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Prompt construido (0.000s, 643 chars)
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 3: Generando SQL con Gemini
2026-01-13 12:25:12,123 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:25:12,124 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:25:15,754 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.63s
2026-01-13 12:25:15,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 12:25:15,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.63s
2026-01-13 12:25:15,755 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 12:25:15,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:25:15,756 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.369s
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_qua...
2026-01-13 12:25:16,125 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:25:17,899 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:25:18,382 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.256s
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.05s
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 0
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [651afde9] BigQuery completado (3.05s)
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:25:18,808 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 651afde9
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO - ‚ùì Question: Contratos de SOJA en 2025
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 9.26s
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO -   - Get Schema: 2.57s
2026-01-13 12:25:18,809 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.63s
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.05s
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - üîç SQL: SELECT customer, product, supplier, harvest, business, delivery_province, total_contracts, total_quantity, total_quantity_delivered, total_quantity_settled, average_price, total_amount, agreement_year, agreement_month FROM `bunge-de-poc-insumos.Gold.contracts_gold` WHERE product = 'SOJA' AND agreement_year = 2025 LIMIT 100
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - üìä Rows: 0
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 191, 'candidates_tokens': 131, 'total_tokens': 322}
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:25:18,810 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:25:18,811 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:25:18,811 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [651afde9] completado exitosamente en 9.26s
2026-01-13 12:33:32,083 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [34edc6b1]: How many contracts are there by status?
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Schema obtenido (0.00s)
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 2: Construyendo prompt
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Prompt construido (0.000s, 657 chars)
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 3: Generando SQL con Gemini
2026-01-13 12:33:32,084 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:33:32,085 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:33:34,830 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.75s
2026-01-13 12:33:34,832 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 188, 'candidates_tokens': 114, 'total_tokens': 302}
2026-01-13 12:33:34,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.75s
2026-01-13 12:33:34,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN customer END) AS pend...
2026-01-13 12:33:34,833 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:33:34,834 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:33:35,387 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.554s
2026-01-13 12:33:35,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:33:35,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN customer END) AS pend...
2026-01-13 12:33:35,388 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:33:37,256 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:33:37,902 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.514s
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 225,258 (0.21 MB)
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 3.07s
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [34edc6b1] BigQuery completado (3.07s)
2026-01-13 12:33:37,903 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 34edc6b1
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there by status?
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.82s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.75s
2026-01-13 12:33:37,904 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 3.07s
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - üîç SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN customer END) AS pending_delivery, COUNT(DISTINCT CASE WHEN total_quantity_delivered > total_quantity_settled THEN customer END) AS pending_settlement, COUNT(DISTINCT CASE WHEN total_quantity = total_quantity_settled THEN customer END) AS completed FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 188, 'candidates_tokens': 114, 'total_tokens': 302}
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:33:37,905 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [34edc6b1] completado exitosamente en 5.82s
2026-01-13 12:41:56,493 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:41:56,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:41:56,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:42:04,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [138a10c7]: How many contracts are there by status
2026-01-13 12:42:04,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:42:04,358 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 12:42:06,143 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 1.78s (14 columnas)
2026-01-13 12:42:06,144 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Schema obtenido (1.79s)
2026-01-13 12:42:06,144 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 2: Construyendo prompt
2026-01-13 12:42:06,144 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Prompt construido (0.000s, 656 chars)
2026-01-13 12:42:06,145 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 3: Generando SQL con Gemini
2026-01-13 12:42:06,146 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:42:06,147 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:42:09,588 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.44s
2026-01-13 12:42:09,589 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 187, 'candidates_tokens': 129, 'total_tokens': 316}
2026-01-13 12:42:09,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.44s
2026-01-13 12:42:09,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END)...
2026-01-13 12:42:09,590 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:42:09,591 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:42:09,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.363s
2026-01-13 12:42:09,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:42:09,953 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END)...
2026-01-13 12:42:09,954 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:42:11,754 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:42:12,460 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.507s
2026-01-13 12:42:12,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 163,824 (0.16 MB)
2026-01-13 12:42:12,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.87s
2026-01-13 12:42:12,461 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 1
2026-01-13 12:42:12,463 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [138a10c7] BigQuery completado (2.87s)
2026-01-13 12:42:12,463 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:12,464 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 138a10c7
2026-01-13 12:42:12,464 - nl2sql_chatbot - INFO - ‚ùì Question: How many contracts are there by status
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 8.11s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Get Schema: 1.79s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.44s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.87s
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - üîç SQL: SELECT COUNT(DISTINCT CASE WHEN total_quantity > total_quantity_delivered THEN 'Open' ELSE NULL END) AS Open_Contracts, COUNT(DISTINCT CASE WHEN total_quantity = total_quantity_delivered THEN 'Delivered' ELSE NULL END) AS Delivered_Contracts, COUNT(DISTINCT CASE WHEN total_quantity_delivered = total_quantity_settled THEN 'Settled' ELSE NULL END) AS Settled_Contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` LIMIT 100
2026-01-13 12:42:12,465 - nl2sql_chatbot - INFO - üìä Rows: 1
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 187, 'candidates_tokens': 129, 'total_tokens': 316}
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:12,466 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [138a10c7] completado exitosamente en 8.11s
2026-01-13 12:42:37,038 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [77d7b1b3]: Show me sales by month
2026-01-13 12:42:37,039 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Schema obtenido (0.00s)
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 2: Construyendo prompt
2026-01-13 12:42:37,040 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Prompt construido (0.000s, 640 chars)
2026-01-13 12:42:37,041 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 3: Generando SQL con Gemini
2026-01-13 12:42:37,041 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:42:37,042 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:42:39,492 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.45s
2026-01-13 12:42:39,494 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 185, 'candidates_tokens': 87, 'total_tokens': 272}
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.45s
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT agreement_year, agreement_month, SUM(total_amount) AS total_sales FROM `bunge-de-poc-insumos....
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:42:39,495 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.506s
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT agreement_year, agreement_month, SUM(total_amount) AS total_sales FROM `bunge-de-poc-insumos....
2026-01-13 12:42:40,001 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:42:41,877 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:42:42,273 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.272s
2026-01-13 12:42:42,274 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 109,216 (0.10 MB)
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.78s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 65
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [77d7b1b3] BigQuery completado (2.78s)
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 77d7b1b3
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚ùì Question: Show me sales by month
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.24s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.45s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.78s
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üîç SQL: SELECT agreement_year, agreement_month, SUM(total_amount) AS total_sales FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY agreement_year, agreement_month ORDER BY agreement_year, agreement_month LIMIT 100
2026-01-13 12:42:42,275 - nl2sql_chatbot - INFO - üìä Rows: 65
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 185, 'candidates_tokens': 87, 'total_tokens': 272}
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:42:42,276 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [77d7b1b3] completado exitosamente en 5.24s
2026-01-13 12:42:59,187 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [0efecfe8]: Average price per product
2026-01-13 12:42:59,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:42:59,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:42:59,188 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Schema obtenido (0.00s)
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 2: Construyendo prompt
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Prompt construido (0.000s, 643 chars)
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 3: Generando SQL con Gemini
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:42:59,189 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:43:01,301 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.11s
2026-01-13 12:43:01,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 184, 'candidates_tokens': 47, 'total_tokens': 231}
2026-01-13 12:43:01,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.11s
2026-01-13 12:43:01,302 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-13 12:43:01,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:43:01,303 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.540s
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` ...
2026-01-13 12:43:01,843 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:43:03,311 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:43:03,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.067s
2026-01-13 12:43:03,910 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 91,428 (0.09 MB)
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.61s
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 4
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [0efecfe8] BigQuery completado (2.61s)
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 0efecfe8
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚ùì Question: Average price per product
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 4.72s
2026-01-13 12:43:03,911 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.11s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.61s
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - üîç SQL: SELECT product, AVG(average_price) AS average_price FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY product LIMIT 100
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - üìä Rows: 4
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 184, 'candidates_tokens': 47, 'total_tokens': 231}
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:43:03,912 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:03,913 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [0efecfe8] completado exitosamente en 4.72s
2026-01-13 12:43:21,958 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [55fec23d]: Total revenue by region
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Schema obtenido (0.00s)
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 2: Construyendo prompt
2026-01-13 12:43:21,959 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Prompt construido (0.000s, 641 chars)
2026-01-13 12:43:21,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 3: Generando SQL con Gemini
2026-01-13 12:43:21,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:43:21,960 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:43:24,801 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.84s
2026-01-13 12:43:24,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 184, 'candidates_tokens': 51, 'total_tokens': 235}
2026-01-13 12:43:24,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.84s
2026-01-13 12:43:24,802 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_amount) AS total_revenue FROM `bunge-de-poc-insumos.Gold.contrac...
2026-01-13 12:43:24,803 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:43:24,803 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.488s
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_amount) AS total_revenue FROM `bunge-de-poc-insumos.Gold.contrac...
2026-01-13 12:43:25,291 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:43:26,806 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.816s
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 96,861 (0.09 MB)
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.31s
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-13 12:43:27,108 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [55fec23d] BigQuery completado (2.31s)
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 55fec23d
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - ‚ùì Question: Total revenue by region
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 5.15s
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:43:27,109 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.84s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.31s
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_amount) AS total_revenue FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province LIMIT 100
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-13 12:43:27,110 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 184, 'candidates_tokens': 51, 'total_tokens': 235}
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:43:27,111 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [55fec23d] completado exitosamente en 5.15s
2026-01-13 12:44:54,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:44:54,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:44:54,649 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:18,642 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:18,643 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:18,643 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:21,258 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:21,258 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:21,259 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:40,327 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:40,327 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:40,327 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:45:41,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:45:41,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:45:41,789 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:47:10,252 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Iniciando aplicaci√≥n NL ‚Üí SQL Chatbot
2026-01-13 12:47:10,252 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Inicializando Vertex AI - Project: bunge-de-poc-insumos, Location: us-central1
2026-01-13 12:47:10,252 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Vertex AI inicializado correctamente
2026-01-13 12:55:34,716 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [a6acb5b3]: What is the count of contracts by province?"**
  - Tipo esperado: Bar Chart
2026-01-13 12:55:34,717 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:55:34,717 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìã Obteniendo schema de BigQuery (sin cach√©)...
2026-01-13 12:55:37,320 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Schema cargado y cacheado en 2.60s (14 columnas)
2026-01-13 12:55:37,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Schema obtenido (2.60s)
2026-01-13 12:55:37,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 2: Construyendo prompt
2026-01-13 12:55:37,321 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Prompt construido (0.000s, 693 chars)
2026-01-13 12:55:37,322 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 3: Generando SQL con Gemini
2026-01-13 12:55:37,322 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:55:37,323 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:55:41,006 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 3.68s
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 198, 'candidates_tokens': 58, 'total_tokens': 256}
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 3.69s
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:55:41,008 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.354s
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.co...
2026-01-13 12:55:41,363 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:55:43,187 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:55:43,773 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 2.410s
2026-01-13 12:55:43,774 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 69,557 (0.07 MB)
2026-01-13 12:55:43,774 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.77s
2026-01-13 12:55:43,774 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 5
2026-01-13 12:55:43,775 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] BigQuery completado (2.77s)
2026-01-13 12:55:43,775 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 12:55:43,776 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 12:55:45,758 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [a6acb5b3] Recomendaci√≥n de gr√°fico: bar
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: a6acb5b3
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ‚ùì Question: What is the count of contracts by province?"**
  - Tipo esperado: Bar Chart
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 11.04s
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO -   - Get Schema: 2.60s
2026-01-13 12:55:45,759 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 3.69s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.77s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO -   - Chart Recommendation: 1.98s
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - üîç SQL: SELECT delivery_province, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` GROUP BY delivery_province ORDER BY total_contracts DESC LIMIT 100
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - üìä Rows: 5
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 198, 'candidates_tokens': 58, 'total_tokens': 256}
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:55:45,760 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [a6acb5b3] completado exitosamente en 11.04s
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ Nuevo request [634c2e19]: Show me the number of contracts per month in 2025"
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 1: Obteniendo schema de BigQuery
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ú® Schema obtenido desde cach√© (instant√°neo)
2026-01-13 12:56:03,972 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Schema obtenido (0.00s)
2026-01-13 12:56:03,973 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 2: Construyendo prompt
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Prompt construido (0.001s, 668 chars)
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 3: Generando SQL con Gemini
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Generando SQL con modelo: gemini-2.0-flash-exp
2026-01-13 12:56:03,974 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚è≥ Llamando a Gemini para generar SQL...
2026-01-13 12:56:06,014 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚ö° Respuesta recibida de Gemini en 2.04s
2026-01-13 12:56:06,016 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Tokens usados: {'prompt_tokens': 195, 'candidates_tokens': 62, 'total_tokens': 257}
2026-01-13 12:56:06,016 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL generado exitosamente en 2.04s
2026-01-13 12:56:06,016 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  SQL: SELECT agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.cont...
2026-01-13 12:56:06,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 4: Ejecutando SQL en BigQuery
2026-01-13 12:56:06,017 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Inicio execute_query
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Cliente obtenido en 0.499s
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Ejecutando query en BigQuery (max 100 rows)
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query: SELECT agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.cont...
2026-01-13 12:56:06,516 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Enviando query a BigQuery...
2026-01-13 12:56:08,104 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Query enviada, esperando resultados...
2026-01-13 12:56:08,512 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üîµ [BQ] Resultados recibidos en 1.996s
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Bytes procesados: 81,912 (0.08 MB)
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Query ejecutada exitosamente en 2.50s
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  Filas retornadas: 12
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] BigQuery completado (2.50s)
2026-01-13 12:56:08,513 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Paso 5: Analizando datos para recomendaci√≥n de gr√°fico
2026-01-13 12:56:08,514 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  üìä Analizando datos con Gemini para recomendar tipo de gr√°fico...
2026-01-13 12:56:10,497 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Gr√°fico recomendado: bar
2026-01-13 12:56:10,498 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  [634c2e19] Recomendaci√≥n de gr√°fico: bar
2026-01-13 12:56:10,498 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:56:10,498 - nl2sql_chatbot - INFO - üìä REQUEST SUMMARY - ID: 634c2e19
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO - ‚ùì Question: Show me the number of contracts per month in 2025"
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO - ‚è±Ô∏è  Total Time: 6.53s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO - üìù Steps:
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Get Schema: 0.00s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Build Prompt: 0.00s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Generate SQL (Gemini): 2.04s
2026-01-13 12:56:10,499 - nl2sql_chatbot - INFO -   - Execute SQL (BigQuery): 2.50s
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO -   - Chart Recommendation: 1.98s
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - üîç SQL: SELECT agreement_month, SUM(total_contracts) AS total_contracts FROM `bunge-de-poc-insumos.Gold.contracts_gold` WHERE agreement_year = 2025 GROUP BY agreement_month LIMIT 100
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - üìä Rows: 12
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - üéØ Tokens: {'prompt_tokens': 195, 'candidates_tokens': 62, 'total_tokens': 257}
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - ü§ñ Model: gemini-2.0-flash-exp
2026-01-13 12:56:10,500 - nl2sql_chatbot - INFO - ‚úÖ Success
2026-01-13 12:56:10,501 - nl2sql_chatbot - INFO - ================================================================================
2026-01-13 12:56:10,501 - nl2sql_chatbot - INFO - ‚ÑπÔ∏è  ‚úÖ Request [634c2e19] completado exitosamente en 6.53s
